[2025-05-23 15:43:46,114][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'089b6c1c590cc6130ebc8913d8c571a1'), (b'Date', b'Fri, 23 May 2025 06:43:46 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 15:43:46,116][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:43:46,116][DEBUG][receive_response_body.complete]
[2025-05-23 15:43:46,116][DEBUG][response_closed.started]
[2025-05-23 15:43:46,118][DEBUG][response_closed.complete]
[2025-05-23 15:44:53,093][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 15:44:53,110][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'metadata', 'message_id': '0', 'data': '{"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","attempt":1}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:53.110888Z'}]
[2025-05-23 15:44:53,112][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '1', 'data': '{"type":"checkpoint","timestamp":"2025-05-23T06:44:53.110310+00:00","step":6,"payload":{"config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f037a16-e77f-6766-8006-bb2a23368c68","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"parent_config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"values":{"question":"안녕하세요!","generate_message":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","documents":[{"id":null,"metadata":{"source":"https://www.youtube.com/watch?v=gUivHveIAZE"},"page_content":"... 돼, 주말 ... [날씨] 전국 흐리고 더위 주춤…밤부터 다시 비 / 연합뉴스TV (YonhapnewsTV). 1.2K views · 6 hours ago #비 #오늘날씨 #주말비","type":"Document"},{"id":null,"metadata":{"source":"https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825"},"page_content":"아침 최저기온은 10~17도, 낮 최고기온 17~24도가 되겠습니다. 지역별 아침 최저기온은 서울 16도, 인천 16도, 춘천 12도, 강릉 13도,","type":"Document"},{"id":null,"metadata":{"source":"https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109"},"page_content":"기상청 날씨누리\\n\\n실시간 TOP5\\n\\n기상플러스\\n\\n행정\\n\\n부속사이트\\n\\n19부\\n\\n3처\\n\\n20청\\n\\n단기예보\\n\\n도움말\\n\\n별표를 누르면 관심지역으로 등록 또는 삭제할 수 있습니다\\n\\n오늘(5월 10일)~글피(5월 13일)\\n\\n□  (종합) 오늘 비, 소강 곳, 오늘 바람 강, 서해중부해상 풍랑 유의 ○  (오늘, 10일) 흐림, 서울.인천.경기도 늦은 오후(15~18시)까지 가끔 비 곳, 일부 경기동부 중심 늦은 밤(21~24시)까지 비 이어지는 곳, 소강상태 많겠음,\\n                  서해5도 늦은 오후(15~18시)까지 가끔 비 곳○  (내일, 11일) 구름많다가 늦은 밤부터 맑아짐, 서해5도 대체로 맑음○  (모레, 12일) 대체로 맑음○  (글피, 13일) 가끔 구름많음\\n*  예상 강수량(10일)-  경기북부: 5~10mm-  서울.인천.경기남부, 서해5도: 5mm 내외 [...] 예보요소 | 평년(오늘) | 어제(09일) | 오늘(10일) | 내일(11일) | 모레(12일) | 글피(13일)\\n최저기온 (℃) | 8.1 ~ 13.5 | 12.3 ~ 14.3 | 10.1 ~ 12.5 | 9 ~ 11 | 7 ~ 12 | 10 ~ 14\\n최고기온 (℃) | 20.1 ~ 23.1 | 14.7 ~ 18.5 | 13 ~ 15 | 18 ~ 23 | 20 ~ 26 | 22 ~ 27\\n파고(m) | 인천·경기북부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n인천·경기남부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n충남북부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n충남남부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n인천·경기북부 앞바다\\n\\n인천·경기남부 앞바다\\n\\n충남북부 앞바다","type":"Document"}],"messages":[{"content":"오늘은 전국이 흐리고 비가 오는 곳이 있습니다. 서울, 인천, 경기도는 늦은 오후(15~18시)까지 가끔 비가 오겠습니다. 최저기온은 10~12.5도, 최고기온은 13~15도로 예상됩니다.\\n\\n**출처**\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109\\n- https://www.youtube.com/watch?v=gUivHveIAZE","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"2059902a-6a7e-43b2-8cf6-fa181d39d775","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},{"content":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"5ce88d0f-8fda-46ed-906c-ad683d4aa529","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]},"metadata":{"source":"input","writes":{"__start__":{"question":"현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?"}},"step":6,"parents":{},"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"next":["__start__"],"tasks":[{"id":"5dab3ff9-e791-3e6b-4040-c79e08e0cea4","name":"__start__","interrupts":[],"state":null}],"checkpoint":{"checkpoint_id":"1f037a16-e77f-6766-8006-bb2a23368c68","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""},"parent_checkpoint":{"checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:53.112642Z'}]
[2025-05-23 15:44:53,141][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-32708057-9bf8-4397-80a4-59758043a5fc', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-23 15:44:53,142][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:44:53,142][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:44:53,263][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x11905bcd0>]
[2025-05-23 15:44:53,263][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x119e6d640> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:44:53,295][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x119e94890>]
[2025-05-23 15:44:53,296][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:44:53,296][DEBUG][send_request_headers.complete]
[2025-05-23 15:44:53,296][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:44:53,296][DEBUG][send_request_body.complete]
[2025-05-23 15:44:53,296][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:44:53,304][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 15:44:53,361][DEBUG][Sending multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=1f037a16-de61-66e8-bffd-720e7cbaff88; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=bc3f1fc9-21ff-46b9-bcf5-0697b6d0fa76; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=a65c099a-6cf5-4ca5-ba47-7dbeb68e3ebb; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=9889672c-08d8-4684-937e-1fafc3329961; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=368d8fc7-a4d2-4282-b5b3-324d4ae1208d; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=f0d1e26f-95f2-4a2b-9f38-37b40367be9a]
[2025-05-23 15:44:53,782][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:44:54,169][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:44:54 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:44:55Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:07Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:45:05Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:44:55Z'), (b'request-id', b'req_011CPQ1YjQDjU3hYQPcUG9Wg'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94429659dda78b5b-ICN')])]
[2025-05-23 15:44:54,171][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:44:54 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:44:55Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:07Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:45:05Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:44:55Z', 'request-id': 'req_011CPQ1YjQDjU3hYQPcUG9Wg', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94429659dda78b5b-ICN'})]
[2025-05-23 15:44:54,171][DEBUG][request_id: req_011CPQ1YjQDjU3hYQPcUG9Wg]
[2025-05-23 15:44:54,171][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:44:54,179][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '2', 'data': '{"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":7,"langgraph_node":"__start__","langgraph_triggers":["__start__"],"langgraph_path":["__pregel_pull","__start__"],"langgraph_checkpoint_ns":"__start__:5dab3ff9-e791-3e6b-4040-c79e08e0cea4","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024,"tags":["langsmith:hidden"]}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.179565Z'}]
[2025-05-23 15:44:54,180][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '3', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":840,"output_tokens":0,"total_tokens":840,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.180567Z'}]
[2025-05-23 15:44:54,181][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '4', 'data': '[{"content":[{"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","input":{},"name":"RouteQuery","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a","example":false,"tool_calls":[{"name":"RouteQuery","args":{},"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":840,"output_tokens":0,"total_tokens":840,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.181739Z'}]
[2025-05-23 15:44:54,182][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '5', 'data': '[{"content":[{"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a","example":false,"tool_calls":[{"name":"RouteQuery","args":{},"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":840,"output_tokens":0,"total_tokens":840,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.182795Z'}]
[2025-05-23 15:44:54,329][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '6', 'data': '[{"content":[{"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a","example":false,"tool_calls":[{"name":"RouteQuery","args":{},"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":840,"output_tokens":0,"total_tokens":840,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.329511Z'}]
[2025-05-23 15:44:54,333][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '7', 'data': '[{"content":[{"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next_nod"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a","example":false,"tool_calls":[{"name":"RouteQuery","args":{},"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":840,"output_tokens":0,"total_tokens":840,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.333000Z'}]
[2025-05-23 15:44:54,335][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '8', 'data': '[{"content":[{"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next_node\\": \\"vec"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a","example":false,"tool_calls":[{"name":"RouteQuery","args":{"next_node":"vec"},"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":840,"output_tokens":0,"total_tokens":840,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.335367Z'}]
[2025-05-23 15:44:54,336][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '9', 'data': '[{"content":[{"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next_node\\": \\"vector"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a","example":false,"tool_calls":[{"name":"RouteQuery","args":{"next_node":"vector"},"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":840,"output_tokens":0,"total_tokens":840,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.336610Z'}]
[2025-05-23 15:44:54,337][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '10', 'data': '[{"content":[{"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next_node\\": \\"vector\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a","example":false,"tool_calls":[{"name":"RouteQuery","args":{"next_node":"vector"},"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":840,"output_tokens":0,"total_tokens":840,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.337770Z'}]
[2025-05-23 15:44:54,340][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '11', 'data': '[{"content":[{"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next_node\\": \\"vector\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--f0d1e26f-95f2-4a2b-9f38-37b40367be9a","example":false,"tool_calls":[{"name":"RouteQuery","args":{"next_node":"vector"},"id":"toolu_01PVui4x9DYGaT1g9xHtDsAX","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":840,"output_tokens":35,"total_tokens":875,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.340770Z'}]
[2025-05-23 15:44:54,353][DEBUG][receive_response_body.complete]
[2025-05-23 15:44:54,353][DEBUG][response_closed.started]
[2025-05-23 15:44:54,353][DEBUG][response_closed.complete]
[2025-05-23 15:44:54,357][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '12', 'data': '{"type":"checkpoint","timestamp":"2025-05-23T06:44:54.356982+00:00","step":7,"payload":{"config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f037a16-f362-6ff6-8007-fb2eb795dda7","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"parent_config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f037a16-e77f-6766-8006-bb2a23368c68","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"values":{"question":"현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?","generate_message":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","documents":[{"id":null,"metadata":{"source":"https://www.youtube.com/watch?v=gUivHveIAZE"},"page_content":"... 돼, 주말 ... [날씨] 전국 흐리고 더위 주춤…밤부터 다시 비 / 연합뉴스TV (YonhapnewsTV). 1.2K views · 6 hours ago #비 #오늘날씨 #주말비","type":"Document"},{"id":null,"metadata":{"source":"https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825"},"page_content":"아침 최저기온은 10~17도, 낮 최고기온 17~24도가 되겠습니다. 지역별 아침 최저기온은 서울 16도, 인천 16도, 춘천 12도, 강릉 13도,","type":"Document"},{"id":null,"metadata":{"source":"https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109"},"page_content":"기상청 날씨누리\\n\\n실시간 TOP5\\n\\n기상플러스\\n\\n행정\\n\\n부속사이트\\n\\n19부\\n\\n3처\\n\\n20청\\n\\n단기예보\\n\\n도움말\\n\\n별표를 누르면 관심지역으로 등록 또는 삭제할 수 있습니다\\n\\n오늘(5월 10일)~글피(5월 13일)\\n\\n□  (종합) 오늘 비, 소강 곳, 오늘 바람 강, 서해중부해상 풍랑 유의 ○  (오늘, 10일) 흐림, 서울.인천.경기도 늦은 오후(15~18시)까지 가끔 비 곳, 일부 경기동부 중심 늦은 밤(21~24시)까지 비 이어지는 곳, 소강상태 많겠음,\\n                  서해5도 늦은 오후(15~18시)까지 가끔 비 곳○  (내일, 11일) 구름많다가 늦은 밤부터 맑아짐, 서해5도 대체로 맑음○  (모레, 12일) 대체로 맑음○  (글피, 13일) 가끔 구름많음\\n*  예상 강수량(10일)-  경기북부: 5~10mm-  서울.인천.경기남부, 서해5도: 5mm 내외 [...] 예보요소 | 평년(오늘) | 어제(09일) | 오늘(10일) | 내일(11일) | 모레(12일) | 글피(13일)\\n최저기온 (℃) | 8.1 ~ 13.5 | 12.3 ~ 14.3 | 10.1 ~ 12.5 | 9 ~ 11 | 7 ~ 12 | 10 ~ 14\\n최고기온 (℃) | 20.1 ~ 23.1 | 14.7 ~ 18.5 | 13 ~ 15 | 18 ~ 23 | 20 ~ 26 | 22 ~ 27\\n파고(m) | 인천·경기북부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n인천·경기남부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n충남북부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n충남남부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n인천·경기북부 앞바다\\n\\n인천·경기남부 앞바다\\n\\n충남북부 앞바다","type":"Document"}],"messages":[{"content":"오늘은 전국이 흐리고 비가 오는 곳이 있습니다. 서울, 인천, 경기도는 늦은 오후(15~18시)까지 가끔 비가 오겠습니다. 최저기온은 10~12.5도, 최고기온은 13~15도로 예상됩니다.\\n\\n**출처**\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109\\n- https://www.youtube.com/watch?v=gUivHveIAZE","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"2059902a-6a7e-43b2-8cf6-fa181d39d775","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},{"content":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"5ce88d0f-8fda-46ed-906c-ad683d4aa529","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]},"metadata":{"source":"loop","writes":null,"step":7,"parents":{},"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"next":["retrieve"],"tasks":[{"id":"e22a0160-fd79-6ad0-1035-b160e6a60288","name":"retrieve","interrupts":[],"state":null}],"checkpoint":{"checkpoint_id":"1f037a16-f362-6ff6-8007-fb2eb795dda7","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""},"parent_checkpoint":{"checkpoint_id":"1f037a16-e77f-6766-8006-bb2a23368c68","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.357904Z'}]
[2025-05-23 15:44:54,360][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '13', 'data': '{"type":"task","timestamp":"2025-05-23T06:44:54.357126+00:00","step":8,"payload":{"id":"e22a0160-fd79-6ad0-1035-b160e6a60288","name":"retrieve","input":{"question":"현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?","generate_message":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","documents":[{"id":null,"metadata":{"source":"https://www.youtube.com/watch?v=gUivHveIAZE"},"page_content":"... 돼, 주말 ... [날씨] 전국 흐리고 더위 주춤…밤부터 다시 비 / 연합뉴스TV (YonhapnewsTV). 1.2K views · 6 hours ago #비 #오늘날씨 #주말비","type":"Document"},{"id":null,"metadata":{"source":"https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825"},"page_content":"아침 최저기온은 10~17도, 낮 최고기온 17~24도가 되겠습니다. 지역별 아침 최저기온은 서울 16도, 인천 16도, 춘천 12도, 강릉 13도,","type":"Document"},{"id":null,"metadata":{"source":"https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109"},"page_content":"기상청 날씨누리\\n\\n실시간 TOP5\\n\\n기상플러스\\n\\n행정\\n\\n부속사이트\\n\\n19부\\n\\n3처\\n\\n20청\\n\\n단기예보\\n\\n도움말\\n\\n별표를 누르면 관심지역으로 등록 또는 삭제할 수 있습니다\\n\\n오늘(5월 10일)~글피(5월 13일)\\n\\n□  (종합) 오늘 비, 소강 곳, 오늘 바람 강, 서해중부해상 풍랑 유의 ○  (오늘, 10일) 흐림, 서울.인천.경기도 늦은 오후(15~18시)까지 가끔 비 곳, 일부 경기동부 중심 늦은 밤(21~24시)까지 비 이어지는 곳, 소강상태 많겠음,\\n                  서해5도 늦은 오후(15~18시)까지 가끔 비 곳○  (내일, 11일) 구름많다가 늦은 밤부터 맑아짐, 서해5도 대체로 맑음○  (모레, 12일) 대체로 맑음○  (글피, 13일) 가끔 구름많음\\n*  예상 강수량(10일)-  경기북부: 5~10mm-  서울.인천.경기남부, 서해5도: 5mm 내외 [...] 예보요소 | 평년(오늘) | 어제(09일) | 오늘(10일) | 내일(11일) | 모레(12일) | 글피(13일)\\n최저기온 (℃) | 8.1 ~ 13.5 | 12.3 ~ 14.3 | 10.1 ~ 12.5 | 9 ~ 11 | 7 ~ 12 | 10 ~ 14\\n최고기온 (℃) | 20.1 ~ 23.1 | 14.7 ~ 18.5 | 13 ~ 15 | 18 ~ 23 | 20 ~ 26 | 22 ~ 27\\n파고(m) | 인천·경기북부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n인천·경기남부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n충남북부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n충남남부 앞바다 | 1.0 ~ 2.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5 | 0.5 ~ 1.5\\n인천·경기북부 앞바다\\n\\n인천·경기남부 앞바다\\n\\n충남북부 앞바다","type":"Document"}],"messages":[{"content":"오늘은 전국이 흐리고 비가 오는 곳이 있습니다. 서울, 인천, 경기도는 늦은 오후(15~18시)까지 가끔 비가 오겠습니다. 최저기온은 10~12.5도, 최고기온은 13~15도로 예상됩니다.\\n\\n**출처**\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109\\n- https://www.youtube.com/watch?v=gUivHveIAZE","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"2059902a-6a7e-43b2-8cf6-fa181d39d775","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},{"content":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"5ce88d0f-8fda-46ed-906c-ad683d4aa529","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]},"triggers":["branch:to:retrieve"]}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:44:54.360781Z'}]
[2025-05-23 15:44:54,422][DEBUG][close.started]
[2025-05-23 15:44:54,423][DEBUG][close.complete]
[2025-05-23 15:44:55,163][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=f0d1e26f-95f2-4a2b-9f38-37b40367be9a; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=bd89660c-85d3-4b41-8e53-47a3d97beb13; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=bd89660c-85d3-4b41-8e53-47a3d97beb13; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=9889672c-08d8-4684-937e-1fafc3329961; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=a65c099a-6cf5-4ca5-ba47-7dbeb68e3ebb; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=bc3f1fc9-21ff-46b9-bcf5-0697b6d0fa76; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=75476166-54b5-45be-bce4-ab5f5ab53941]
[2025-05-23 15:44:55,381][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:44:59,829][DEBUG][Starting new HTTPS connection (1): huggingface.co:443]
[2025-05-23 15:45:00,155][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/modules.json HTTP/1.1" 200 0]
[2025-05-23 15:45:00,459][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/config_sentence_transformers.json HTTP/1.1" 200 0]
[2025-05-23 15:45:00,671][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/README.md HTTP/1.1" 200 0]
[2025-05-23 15:45:00,926][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/modules.json HTTP/1.1" 200 0]
[2025-05-23 15:45:01,132][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/sentence_bert_config.json HTTP/1.1" 200 0]
[2025-05-23 15:45:01,353][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/adapter_config.json HTTP/1.1" 404 0]
[2025-05-23 15:45:01,660][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/config.json HTTP/1.1" 200 0]
[2025-05-23 15:45:02,501][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/model.safetensors HTTP/1.1" 404 0]
[2025-05-23 15:45:02,505][DEBUG][Starting new HTTPS connection (1): huggingface.co:443]
[2025-05-23 15:45:02,755][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3 HTTP/1.1" 200 5220]
[2025-05-23 15:45:03,047][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/commits/main HTTP/1.1" 200 9525]
[2025-05-23 15:45:03,394][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/discussions?p=0 HTTP/1.1" 200 30448]
[2025-05-23 15:45:03,941][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/commits/refs%2Fpr%2F118 HTTP/1.1" 200 10490]
[2025-05-23 15:45:04,071][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/tokenizer_config.json HTTP/1.1" 200 0]
[2025-05-23 15:45:04,151][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/refs%2Fpr%2F118/model.safetensors.index.json HTTP/1.1" 404 0]
[2025-05-23 15:45:04,365][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64]
[2025-05-23 15:45:04,378][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/refs%2Fpr%2F118/model.safetensors HTTP/1.1" 302 0]
[2025-05-23 15:45:05,882][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/revision/main HTTP/1.1" 200 5220]
[2025-05-23 15:45:06,169][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3 HTTP/1.1" 200 5220]
[2025-05-23 15:45:10,118][DEBUG][Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU]
[2025-05-23 15:45:10,729][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=f7c5e4ad-c63a-4e12-8511-2077b037617b]
[2025-05-23 15:45:10,944][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '14', 'data': '{"type":"task_result","timestamp":"2025-05-23T06:45:10.941582+00:00","step":8,"payload":{"id":"e22a0160-fd79-6ad0-1035-b160e6a60288","name":"retrieve","error":null,"result":[["documents",[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"},{"id":"32d5aa22-9a6a-4e85-9b83-ba357aa2715a","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"- 다만, 공공행정사업이더라도 근로형태가 현저히 다르고 노무관리가\\n명확히 구분되는 경우에는 해당 부문의 유사업종에 기초하여 법\\n적용여부를 판단하여야 함\\n○ 즉, 지방자치단체는 ｢한국표준산업분류｣에 따르면 원칙적으로 공공\\n행정에 해당하나,\\n- 일반 행정사무와 근로형태나 노무관리가 명확히 구분되는 환경\\n미화, 가로청소 등의 현업업무는 별도로 해당 업무와 유사한 업종에\\n따라 ｢산업안전보건법｣ 적용 여부를 판단해야 할 것이므로 산업\\n안전보건법이 전부 적용됨\\n○ 한편, 지방자치단체는 ｢지방자치법｣ 제3조에 따른 법인인 사업주","type":"Document"}]]],"interrupts":[]}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:10.944937Z'}]
[2025-05-23 15:45:10,949][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '15', 'data': '{"type":"checkpoint","timestamp":"2025-05-23T06:45:10.943540+00:00","step":8,"payload":{"config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f037a17-9191-68ee-8008-c69421046b95","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"parent_config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f037a16-f362-6ff6-8007-fb2eb795dda7","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"values":{"question":"현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?","generate_message":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","documents":[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"},{"id":"32d5aa22-9a6a-4e85-9b83-ba357aa2715a","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"- 다만, 공공행정사업이더라도 근로형태가 현저히 다르고 노무관리가\\n명확히 구분되는 경우에는 해당 부문의 유사업종에 기초하여 법\\n적용여부를 판단하여야 함\\n○ 즉, 지방자치단체는 ｢한국표준산업분류｣에 따르면 원칙적으로 공공\\n행정에 해당하나,\\n- 일반 행정사무와 근로형태나 노무관리가 명확히 구분되는 환경\\n미화, 가로청소 등의 현업업무는 별도로 해당 업무와 유사한 업종에\\n따라 ｢산업안전보건법｣ 적용 여부를 판단해야 할 것이므로 산업\\n안전보건법이 전부 적용됨\\n○ 한편, 지방자치단체는 ｢지방자치법｣ 제3조에 따른 법인인 사업주","type":"Document"}],"messages":[{"content":"오늘은 전국이 흐리고 비가 오는 곳이 있습니다. 서울, 인천, 경기도는 늦은 오후(15~18시)까지 가끔 비가 오겠습니다. 최저기온은 10~12.5도, 최고기온은 13~15도로 예상됩니다.\\n\\n**출처**\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109\\n- https://www.youtube.com/watch?v=gUivHveIAZE","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"2059902a-6a7e-43b2-8cf6-fa181d39d775","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},{"content":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"5ce88d0f-8fda-46ed-906c-ad683d4aa529","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]},"metadata":{"source":"loop","writes":{"retrieve":{"documents":[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"},{"id":"32d5aa22-9a6a-4e85-9b83-ba357aa2715a","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"- 다만, 공공행정사업이더라도 근로형태가 현저히 다르고 노무관리가\\n명확히 구분되는 경우에는 해당 부문의 유사업종에 기초하여 법\\n적용여부를 판단하여야 함\\n○ 즉, 지방자치단체는 ｢한국표준산업분류｣에 따르면 원칙적으로 공공\\n행정에 해당하나,\\n- 일반 행정사무와 근로형태나 노무관리가 명확히 구분되는 환경\\n미화, 가로청소 등의 현업업무는 별도로 해당 업무와 유사한 업종에\\n따라 ｢산업안전보건법｣ 적용 여부를 판단해야 할 것이므로 산업\\n안전보건법이 전부 적용됨\\n○ 한편, 지방자치단체는 ｢지방자치법｣ 제3조에 따른 법인인 사업주","type":"Document"}]}},"step":8,"parents":{},"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"next":["grade_documents"],"tasks":[{"id":"3c4440d9-faa1-1e45-2193-23815fbb74bf","name":"grade_documents","interrupts":[],"state":null}],"checkpoint":{"checkpoint_id":"1f037a17-9191-68ee-8008-c69421046b95","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""},"parent_checkpoint":{"checkpoint_id":"1f037a16-f362-6ff6-8007-fb2eb795dda7","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:10.949617Z'}]
[2025-05-23 15:45:10,954][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '16', 'data': '{"type":"task","timestamp":"2025-05-23T06:45:10.944766+00:00","step":9,"payload":{"id":"3c4440d9-faa1-1e45-2193-23815fbb74bf","name":"grade_documents","input":{"question":"현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?","generate_message":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","documents":[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"},{"id":"32d5aa22-9a6a-4e85-9b83-ba357aa2715a","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"- 다만, 공공행정사업이더라도 근로형태가 현저히 다르고 노무관리가\\n명확히 구분되는 경우에는 해당 부문의 유사업종에 기초하여 법\\n적용여부를 판단하여야 함\\n○ 즉, 지방자치단체는 ｢한국표준산업분류｣에 따르면 원칙적으로 공공\\n행정에 해당하나,\\n- 일반 행정사무와 근로형태나 노무관리가 명확히 구분되는 환경\\n미화, 가로청소 등의 현업업무는 별도로 해당 업무와 유사한 업종에\\n따라 ｢산업안전보건법｣ 적용 여부를 판단해야 할 것이므로 산업\\n안전보건법이 전부 적용됨\\n○ 한편, 지방자치단체는 ｢지방자치법｣ 제3조에 따른 법인인 사업주","type":"Document"}],"messages":[{"content":"오늘은 전국이 흐리고 비가 오는 곳이 있습니다. 서울, 인천, 경기도는 늦은 오후(15~18시)까지 가끔 비가 오겠습니다. 최저기온은 10~12.5도, 최고기온은 13~15도로 예상됩니다.\\n\\n**출처**\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109\\n- https://www.youtube.com/watch?v=gUivHveIAZE","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"2059902a-6a7e-43b2-8cf6-fa181d39d775","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},{"content":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"5ce88d0f-8fda-46ed-906c-ad683d4aa529","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]},"triggers":["branch:to:grade_documents"]}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:10.954270Z'}]
[2025-05-23 15:45:10,987][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-43e70be6-1765-43f8-a0d6-bb1310f63640', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\n해야 할 것이므로 산업안전보건법이 전부 적용됨\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 15:45:10,989][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:10,990][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:11,030][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31b73c7d0>]
[2025-05-23 15:45:11,031][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x31b586060> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:11,052][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31b753250>]
[2025-05-23 15:45:11,052][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:11,053][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:11,053][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:11,053][DEBUG][send_request_body.complete]
[2025-05-23 15:45:11,053][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:11,077][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:45:11,618][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=f7c5e4ad-c63a-4e12-8511-2077b037617b; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=75476166-54b5-45be-bce4-ab5f5ab53941; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=58e6f178-8c48-4bcb-9a48-91632940475f; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=aedee877-b07c-4828-adf8-81ed5a759108; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=5a467187-02bf-496a-a980-0d3d839506cb; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=5a467187-02bf-496a-a980-0d3d839506cb; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=9b57264b-c94f-4117-b778-d47cff5b0755]
[2025-05-23 15:45:11,941][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:45:12,028][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:45:12 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:14Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:24Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:45:23Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:14Z'), (b'request-id', b'req_011CPQ1a3JGV437M6xmeyZfA'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944296c8dce7a7cc-ICN')])]
[2025-05-23 15:45:12,029][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:45:12 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:14Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:24Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:45:23Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:14Z', 'request-id': 'req_011CPQ1a3JGV437M6xmeyZfA', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944296c8dce7a7cc-ICN'})]
[2025-05-23 15:45:12,029][DEBUG][request_id: req_011CPQ1a3JGV437M6xmeyZfA]
[2025-05-23 15:45:12,030][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:12,032][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '17', 'data': '{"run--9b57264b-c94f-4117-b778-d47cff5b0755":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":9,"langgraph_node":"grade_documents","langgraph_triggers":["branch:to:grade_documents"],"langgraph_path":["__pregel_pull","grade_documents"],"langgraph_checkpoint_ns":"grade_documents:3c4440d9-faa1-1e45-2193-23815fbb74bf","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:12.032233Z'}]
[2025-05-23 15:45:12,034][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '18', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--9b57264b-c94f-4117-b778-d47cff5b0755","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1490,"output_tokens":0,"total_tokens":1490,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:12.034252Z'}]
[2025-05-23 15:45:12,035][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '19', 'data': '[{"content":[{"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","input":{},"name":"GradeDocuments","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--9b57264b-c94f-4117-b778-d47cff5b0755","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1490,"output_tokens":0,"total_tokens":1490,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:12.035937Z'}]
[2025-05-23 15:45:12,037][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '20', 'data': '[{"content":[{"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--9b57264b-c94f-4117-b778-d47cff5b0755","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1490,"output_tokens":0,"total_tokens":1490,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:12.036995Z'}]
[2025-05-23 15:45:12,191][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '21', 'data': '[{"content":[{"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--9b57264b-c94f-4117-b778-d47cff5b0755","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1490,"output_tokens":0,"total_tokens":1490,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:12.191788Z'}]
[2025-05-23 15:45:12,193][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '22', 'data': '[{"content":[{"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--9b57264b-c94f-4117-b778-d47cff5b0755","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"Y"},"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1490,"output_tokens":0,"total_tokens":1490,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:12.193150Z'}]
[2025-05-23 15:45:12,195][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '23', 'data': '[{"content":[{"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--9b57264b-c94f-4117-b778-d47cff5b0755","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"Y"},"id":"toolu_01WVY3XRBEShrkTMuoLQdKAs","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1490,"output_tokens":35,"total_tokens":1525,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:12.195112Z'}]
[2025-05-23 15:45:12,220][DEBUG][receive_response_body.complete]
[2025-05-23 15:45:12,220][DEBUG][response_closed.started]
[2025-05-23 15:45:12,220][DEBUG][response_closed.complete]
[2025-05-23 15:45:12,225][DEBUG][close.started]
[2025-05-23 15:45:12,225][DEBUG][close.complete]
[2025-05-23 15:45:12,240][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-ab2939b3-fc8f-4be1-b7c9-700102049493', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\n가능한지?\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\n되는 범위에서의 상시근로자수를 판단하여야 함\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 15:45:12,241][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:12,241][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:12,258][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b5192d10>]
[2025-05-23 15:45:12,258][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x3b51d7c80> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:12,278][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b5192d90>]
[2025-05-23 15:45:12,278][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:12,279][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:12,279][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:12,279][DEBUG][send_request_body.complete]
[2025-05-23 15:45:12,279][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:12,762][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=9b57264b-c94f-4117-b778-d47cff5b0755; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=2886ed86-d9f7-4757-bb82-090edf419456; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=2886ed86-d9f7-4757-bb82-090edf419456; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=aedee877-b07c-4828-adf8-81ed5a759108; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=21001dc1-0a94-4761-a4d5-7784e6d63947; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=02a8e625-2850-4b80-b906-40fec4406c31; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=02a8e625-2850-4b80-b906-40fec4406c31; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=f6aab9ce-f4e5-4874-9277-33686716d8ea]
[2025-05-23 15:45:13,206][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:45:13,341][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:45:13 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:18Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:26Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:45:35Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'21000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:18Z'), (b'request-id', b'req_011CPQ1a8ZGxr72NqWjsbQLn'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944296d08a23aa66-ICN')])]
[2025-05-23 15:45:13,342][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:45:13 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:18Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:26Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:45:35Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '21000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:18Z', 'request-id': 'req_011CPQ1a8ZGxr72NqWjsbQLn', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944296d08a23aa66-ICN'})]
[2025-05-23 15:45:13,343][DEBUG][request_id: req_011CPQ1a8ZGxr72NqWjsbQLn]
[2025-05-23 15:45:13,343][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:13,344][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '24', 'data': '{"run--f6aab9ce-f4e5-4874-9277-33686716d8ea":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":9,"langgraph_node":"grade_documents","langgraph_triggers":["branch:to:grade_documents"],"langgraph_path":["__pregel_pull","grade_documents"],"langgraph_checkpoint_ns":"grade_documents:3c4440d9-faa1-1e45-2193-23815fbb74bf","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:13.344666Z'}]
[2025-05-23 15:45:13,345][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '25', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f6aab9ce-f4e5-4874-9277-33686716d8ea","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1484,"output_tokens":0,"total_tokens":1484,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:13.345606Z'}]
[2025-05-23 15:45:13,346][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '26', 'data': '[{"content":[{"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","input":{},"name":"GradeDocuments","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f6aab9ce-f4e5-4874-9277-33686716d8ea","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1484,"output_tokens":0,"total_tokens":1484,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:13.346544Z'}]
[2025-05-23 15:45:13,514][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '27', 'data': '[{"content":[{"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f6aab9ce-f4e5-4874-9277-33686716d8ea","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1484,"output_tokens":0,"total_tokens":1484,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:13.514038Z'}]
[2025-05-23 15:45:13,521][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '28', 'data': '[{"content":[{"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f6aab9ce-f4e5-4874-9277-33686716d8ea","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1484,"output_tokens":0,"total_tokens":1484,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:13.521479Z'}]
[2025-05-23 15:45:13,523][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '29', 'data': '[{"content":[{"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f6aab9ce-f4e5-4874-9277-33686716d8ea","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"Y"},"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1484,"output_tokens":0,"total_tokens":1484,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:13.523721Z'}]
[2025-05-23 15:45:13,524][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '30', 'data': '[{"content":[{"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--f6aab9ce-f4e5-4874-9277-33686716d8ea","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"Y"},"id":"toolu_01Lp1eWih4mzWxMuyvADEkkg","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1484,"output_tokens":35,"total_tokens":1519,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:13.524946Z'}]
[2025-05-23 15:45:13,527][DEBUG][receive_response_body.complete]
[2025-05-23 15:45:13,527][DEBUG][response_closed.started]
[2025-05-23 15:45:13,527][DEBUG][response_closed.complete]
[2025-05-23 15:45:13,545][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-9fc53628-0306-401a-9c3c-a7104ff60253', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\n므로 상시근로자수 판단에서 제외하여야 함\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\n보건관리체제 등을 갖추도록 할 경우\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 15:45:13,546][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:13,546][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:13,556][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b51a9f90>]
[2025-05-23 15:45:13,556][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x3b51d7d10> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:13,575][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b519a050>]
[2025-05-23 15:45:13,575][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:13,575][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:13,576][DEBUG][close.started]
[2025-05-23 15:45:13,576][DEBUG][close.complete]
[2025-05-23 15:45:13,575][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:13,577][DEBUG][send_request_body.complete]
[2025-05-23 15:45:13,578][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:14,083][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=f6aab9ce-f4e5-4874-9277-33686716d8ea; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=4d7bb94e-98af-4385-989b-c87660090627; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=4d7bb94e-98af-4385-989b-c87660090627; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=21001dc1-0a94-4761-a4d5-7784e6d63947; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=3f3bc5b4-28b4-49b8-a2c7-bd91106bf397; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=dfe37391-6fe8-4528-97e6-4b00e30f998e; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=dfe37391-6fe8-4528-97e6-4b00e30f998e; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=5bc02a2f-eddf-4ca8-b90e-82ebb775a549]
[2025-05-23 15:45:14,301][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:45:14,341][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:45:14 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:22Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:27Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:45:47Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'20000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:22Z'), (b'request-id', b'req_011CPQ1aE6epDai14G959yEw'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944296d89ae93170-ICN')])]
[2025-05-23 15:45:14,342][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:45:14 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:22Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:27Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:45:47Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '20000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:22Z', 'request-id': 'req_011CPQ1aE6epDai14G959yEw', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944296d89ae93170-ICN'})]
[2025-05-23 15:45:14,342][DEBUG][request_id: req_011CPQ1aE6epDai14G959yEw]
[2025-05-23 15:45:14,343][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:14,344][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '31', 'data': '{"run--5bc02a2f-eddf-4ca8-b90e-82ebb775a549":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":9,"langgraph_node":"grade_documents","langgraph_triggers":["branch:to:grade_documents"],"langgraph_path":["__pregel_pull","grade_documents"],"langgraph_checkpoint_ns":"grade_documents:3c4440d9-faa1-1e45-2193-23815fbb74bf","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:14.344612Z'}]
[2025-05-23 15:45:14,345][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '32', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--5bc02a2f-eddf-4ca8-b90e-82ebb775a549","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1487,"output_tokens":0,"total_tokens":1487,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:14.345533Z'}]
[2025-05-23 15:45:14,346][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '33', 'data': '[{"content":[{"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","input":{},"name":"GradeDocuments","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--5bc02a2f-eddf-4ca8-b90e-82ebb775a549","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1487,"output_tokens":0,"total_tokens":1487,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:14.346444Z'}]
[2025-05-23 15:45:14,347][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '34', 'data': '[{"content":[{"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--5bc02a2f-eddf-4ca8-b90e-82ebb775a549","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1487,"output_tokens":0,"total_tokens":1487,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:14.347765Z'}]
[2025-05-23 15:45:14,562][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '35', 'data': '[{"content":[{"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_y"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--5bc02a2f-eddf-4ca8-b90e-82ebb775a549","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1487,"output_tokens":0,"total_tokens":1487,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:14.562510Z'}]
[2025-05-23 15:45:14,564][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '36', 'data': '[{"content":[{"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\":"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--5bc02a2f-eddf-4ca8-b90e-82ebb775a549","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1487,"output_tokens":0,"total_tokens":1487,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:14.564006Z'}]
[2025-05-23 15:45:14,571][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '37', 'data': '[{"content":[{"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--5bc02a2f-eddf-4ca8-b90e-82ebb775a549","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"Y"},"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1487,"output_tokens":0,"total_tokens":1487,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:14.571090Z'}]
[2025-05-23 15:45:14,572][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '38', 'data': '[{"content":[{"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--5bc02a2f-eddf-4ca8-b90e-82ebb775a549","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"Y"},"id":"toolu_017QvpzbCBtPhVsFE2SMaVLF","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1487,"output_tokens":35,"total_tokens":1522,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:14.572114Z'}]
[2025-05-23 15:45:14,579][DEBUG][receive_response_body.complete]
[2025-05-23 15:45:14,580][DEBUG][response_closed.started]
[2025-05-23 15:45:14,580][DEBUG][response_closed.complete]
[2025-05-23 15:45:14,595][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-ee7c8377-e658-4227-9776-6482e6d7233c', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\n포함하여 상시근로자로 판단하여야 함\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\n안법 위반으로 처분 가능한지?\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 15:45:14,596][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:14,597][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:14,609][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b51b7950>]
[2025-05-23 15:45:14,609][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x119e6dfd0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:14,631][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b5187390>]
[2025-05-23 15:45:14,631][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:14,631][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:14,631][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:14,631][DEBUG][send_request_body.complete]
[2025-05-23 15:45:14,631][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:15,123][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=5bc02a2f-eddf-4ca8-b90e-82ebb775a549; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=a6912b12-8483-46d0-849d-425e14e32be2; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=a6912b12-8483-46d0-849d-425e14e32be2; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=3f3bc5b4-28b4-49b8-a2c7-bd91106bf397; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=ad67dfaf-639c-4463-b191-41847eae375d; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=4e7a29d0-22c3-4542-be6d-f0bf1f766177; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=4e7a29d0-22c3-4542-be6d-f0bf1f766177; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=a7795914-f397-4626-9124-88edfad9347e]
[2025-05-23 15:45:15,354][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:45:15,607][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:45:15 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'16000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:27Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:28Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'1'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:45:59Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'19000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:27Z'), (b'request-id', b'req_011CPQ1aJc25jKtQkCrDHGHj'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944296df3dbe329c-ICN')])]
[2025-05-23 15:45:15,607][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:45:15 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '16000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:27Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:28Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '1', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:45:59Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '19000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:27Z', 'request-id': 'req_011CPQ1aJc25jKtQkCrDHGHj', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944296df3dbe329c-ICN'})]
[2025-05-23 15:45:15,608][DEBUG][request_id: req_011CPQ1aJc25jKtQkCrDHGHj]
[2025-05-23 15:45:15,608][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:15,610][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '39', 'data': '{"run--a7795914-f397-4626-9124-88edfad9347e":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":9,"langgraph_node":"grade_documents","langgraph_triggers":["branch:to:grade_documents"],"langgraph_path":["__pregel_pull","grade_documents"],"langgraph_checkpoint_ns":"grade_documents:3c4440d9-faa1-1e45-2193-23815fbb74bf","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:15.610300Z'}]
[2025-05-23 15:45:15,611][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '40', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--a7795914-f397-4626-9124-88edfad9347e","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1464,"output_tokens":0,"total_tokens":1464,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:15.611175Z'}]
[2025-05-23 15:45:15,612][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '41', 'data': '[{"content":[{"id":"toolu_01FLrnZcmMUtkh656wPpvidA","input":{},"name":"GradeDocuments","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--a7795914-f397-4626-9124-88edfad9347e","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_01FLrnZcmMUtkh656wPpvidA","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1464,"output_tokens":0,"total_tokens":1464,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:15.612095Z'}]
[2025-05-23 15:45:15,614][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '42', 'data': '[{"content":[{"id":"toolu_01FLrnZcmMUtkh656wPpvidA","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--a7795914-f397-4626-9124-88edfad9347e","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_01FLrnZcmMUtkh656wPpvidA","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1464,"output_tokens":0,"total_tokens":1464,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:15.614012Z'}]
[2025-05-23 15:45:15,750][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '43', 'data': '[{"content":[{"id":"toolu_01FLrnZcmMUtkh656wPpvidA","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_y"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--a7795914-f397-4626-9124-88edfad9347e","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_01FLrnZcmMUtkh656wPpvidA","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1464,"output_tokens":0,"total_tokens":1464,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:15.750426Z'}]
[2025-05-23 15:45:15,751][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '44', 'data': '[{"content":[{"id":"toolu_01FLrnZcmMUtkh656wPpvidA","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--a7795914-f397-4626-9124-88edfad9347e","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":""},"id":"toolu_01FLrnZcmMUtkh656wPpvidA","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1464,"output_tokens":0,"total_tokens":1464,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:15.751781Z'}]
[2025-05-23 15:45:15,752][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '45', 'data': '[{"content":[{"id":"toolu_01FLrnZcmMUtkh656wPpvidA","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--a7795914-f397-4626-9124-88edfad9347e","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"Y"},"id":"toolu_01FLrnZcmMUtkh656wPpvidA","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1464,"output_tokens":0,"total_tokens":1464,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:15.752800Z'}]
[2025-05-23 15:45:15,753][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '46', 'data': '[{"content":[{"id":"toolu_01FLrnZcmMUtkh656wPpvidA","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--a7795914-f397-4626-9124-88edfad9347e","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"Y"},"id":"toolu_01FLrnZcmMUtkh656wPpvidA","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1464,"output_tokens":35,"total_tokens":1499,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:15.753945Z'}]
[2025-05-23 15:45:15,768][DEBUG][receive_response_body.complete]
[2025-05-23 15:45:15,768][DEBUG][response_closed.started]
[2025-05-23 15:45:15,768][DEBUG][response_closed.complete]
[2025-05-23 15:45:15,785][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-babc954f-46b1-4bf7-8ea6-03ee9d5526d5', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'- 다만, 공공행정사업이더라도 근로형태가 현저히 다르고 노무관리가\n명확히 구분되는 경우에는 해당 부문의 유사업종에 기초하여 법\n적용여부를 판단하여야 함\n○ 즉, 지방자치단체는 ｢한국표준산업분류｣에 따르면 원칙적으로 공공\n행정에 해당하나,\n- 일반 행정사무와 근로형태나 노무관리가 명확히 구분되는 환경\n미화, 가로청소 등의 현업업무는 별도로 해당 업무와 유사한 업종에\n따라 ｢산업안전보건법｣ 적용 여부를 판단해야 할 것이므로 산업\n안전보건법이 전부 적용됨\n○ 한편, 지방자치단체는 ｢지방자치법｣ 제3조에 따른 법인인 사업주\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 15:45:15,786][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:15,786][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:15,822][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31b756810>]
[2025-05-23 15:45:15,823][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x119e6dbe0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:15,846][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b51bf390>]
[2025-05-23 15:45:15,847][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:15,847][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:15,847][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:15,847][DEBUG][send_request_body.complete]
[2025-05-23 15:45:15,847][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:16,311][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=a7795914-f397-4626-9124-88edfad9347e; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=24a37fd3-0edf-4817-9fc3-3efcca001f50; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=24a37fd3-0edf-4817-9fc3-3efcca001f50; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=ad67dfaf-639c-4463-b191-41847eae375d; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=1d44c2ba-49de-4f04-a632-02a1f0fcc9b2; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=9dc53bdc-0eff-40d7-9688-cc6855727154; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=9dc53bdc-0eff-40d7-9688-cc6855727154; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=fb0b689b-2547-43ca-bd5f-deafc0407d2f]
[2025-05-23 15:45:16,655][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:45:16,715][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:45:16 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'15000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:31Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:29Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:46:11Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'18000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:29Z'), (b'request-id', b'req_011CPQ1aPq3U5R9kM9p7og4B'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944296e6c968c067-ICN')])]
[2025-05-23 15:45:16,716][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:45:16 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '15000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:31Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:29Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:46:11Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '18000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:29Z', 'request-id': 'req_011CPQ1aPq3U5R9kM9p7og4B', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944296e6c968c067-ICN'})]
[2025-05-23 15:45:16,717][DEBUG][request_id: req_011CPQ1aPq3U5R9kM9p7og4B]
[2025-05-23 15:45:16,718][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:16,720][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '47', 'data': '{"run--fb0b689b-2547-43ca-bd5f-deafc0407d2f":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":9,"langgraph_node":"grade_documents","langgraph_triggers":["branch:to:grade_documents"],"langgraph_path":["__pregel_pull","grade_documents"],"langgraph_checkpoint_ns":"grade_documents:3c4440d9-faa1-1e45-2193-23815fbb74bf","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:16.720190Z'}]
[2025-05-23 15:45:16,722][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '48', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--fb0b689b-2547-43ca-bd5f-deafc0407d2f","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1508,"output_tokens":0,"total_tokens":1508,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:16.722495Z'}]
[2025-05-23 15:45:16,723][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '49', 'data': '[{"content":[{"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","input":{},"name":"GradeDocuments","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--fb0b689b-2547-43ca-bd5f-deafc0407d2f","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1508,"output_tokens":0,"total_tokens":1508,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:16.723834Z'}]
[2025-05-23 15:45:16,725][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '50', 'data': '[{"content":[{"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--fb0b689b-2547-43ca-bd5f-deafc0407d2f","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1508,"output_tokens":0,"total_tokens":1508,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:16.725129Z'}]
[2025-05-23 15:45:16,951][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '51', 'data': '[{"content":[{"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--fb0b689b-2547-43ca-bd5f-deafc0407d2f","example":false,"tool_calls":[{"name":"GradeDocuments","args":{},"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1508,"output_tokens":0,"total_tokens":1508,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:16.950934Z'}]
[2025-05-23 15:45:16,953][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '52', 'data': '[{"content":[{"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"N"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--fb0b689b-2547-43ca-bd5f-deafc0407d2f","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"N"},"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1508,"output_tokens":0,"total_tokens":1508,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:16.953776Z'}]
[2025-05-23 15:45:16,955][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '53', 'data': '[{"content":[{"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"N\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--fb0b689b-2547-43ca-bd5f-deafc0407d2f","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"N"},"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1508,"output_tokens":0,"total_tokens":1508,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:16.955527Z'}]
[2025-05-23 15:45:17,179][DEBUG][receive_response_body.complete]
[2025-05-23 15:45:17,180][DEBUG][response_closed.started]
[2025-05-23 15:45:17,180][DEBUG][response_closed.complete]
[2025-05-23 15:45:17,182][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '54', 'data': '[{"content":[{"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","input":{},"name":"GradeDocuments","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"N\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--fb0b689b-2547-43ca-bd5f-deafc0407d2f","example":false,"tool_calls":[{"name":"GradeDocuments","args":{"pass_yn":"N"},"id":"toolu_014EdY8w8wrvcQxiUVdhG8wh","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1508,"output_tokens":35,"total_tokens":1543,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:17.182821Z'}]
[2025-05-23 15:45:17,186][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '55', 'data': '{"type":"task_result","timestamp":"2025-05-23T06:45:17.185064+00:00","step":9,"payload":{"id":"3c4440d9-faa1-1e45-2193-23815fbb74bf","name":"grade_documents","error":null,"result":[["documents",[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"}]]],"interrupts":[]}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:17.186601Z'}]
[2025-05-23 15:45:17,188][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '56', 'data': '{"type":"checkpoint","timestamp":"2025-05-23T06:45:17.185644+00:00","step":9,"payload":{"config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f037a17-cd19-6092-8009-8f893069fe0a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"parent_config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f037a17-9191-68ee-8008-c69421046b95","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"values":{"question":"현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?","generate_message":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","documents":[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"}],"messages":[{"content":"오늘은 전국이 흐리고 비가 오는 곳이 있습니다. 서울, 인천, 경기도는 늦은 오후(15~18시)까지 가끔 비가 오겠습니다. 최저기온은 10~12.5도, 최고기온은 13~15도로 예상됩니다.\\n\\n**출처**\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109\\n- https://www.youtube.com/watch?v=gUivHveIAZE","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"2059902a-6a7e-43b2-8cf6-fa181d39d775","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},{"content":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"5ce88d0f-8fda-46ed-906c-ad683d4aa529","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]},"metadata":{"source":"loop","writes":{"grade_documents":{"documents":[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"}]}},"step":9,"parents":{},"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"next":["generate"],"tasks":[{"id":"8aa6aa3f-83aa-b455-a094-016adeb92688","name":"generate","interrupts":[],"state":null}],"checkpoint":{"checkpoint_id":"1f037a17-cd19-6092-8009-8f893069fe0a","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""},"parent_checkpoint":{"checkpoint_id":"1f037a17-9191-68ee-8008-c69421046b95","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:17.188511Z'}]
[2025-05-23 15:45:17,191][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '57', 'data': '{"type":"task","timestamp":"2025-05-23T06:45:17.186385+00:00","step":10,"payload":{"id":"8aa6aa3f-83aa-b455-a094-016adeb92688","name":"generate","input":{"question":"현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?","generate_message":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","documents":[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"}],"messages":[{"content":"오늘은 전국이 흐리고 비가 오는 곳이 있습니다. 서울, 인천, 경기도는 늦은 오후(15~18시)까지 가끔 비가 오겠습니다. 최저기온은 10~12.5도, 최고기온은 13~15도로 예상됩니다.\\n\\n**출처**\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109\\n- https://www.youtube.com/watch?v=gUivHveIAZE","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"2059902a-6a7e-43b2-8cf6-fa181d39d775","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},{"content":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"5ce88d0f-8fda-46ed-906c-ad683d4aa529","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]},"triggers":["branch:to:generate"]}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:17.191204Z'}]
[2025-05-23 15:45:17,215][DEBUG][close.started]
[2025-05-23 15:45:17,215][DEBUG][close.complete]
[2025-05-23 15:45:17,220][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-99e69d83-4200-4496-b085-8f6d0443b644', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n[Document(id=\'085958b9-7bd7-496c-87c8-eba671f1f005\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'33ca2856-7451-4a6a-ab73-673c80a20660\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'d9960882-a398-4d57-bc78-cc429809cc7c\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지\'), Document(id=\'00236c14-275d-46d2-bd3e-80d605b6f1af\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')]\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'temperature': 0.0}}]
[2025-05-23 15:45:17,224][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:17,224][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:17,235][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31b7554d0>]
[2025-05-23 15:45:17,236][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x3b51b8680> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:17,335][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b5182010>]
[2025-05-23 15:45:17,336][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:17,348][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:17,348][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:17,355][DEBUG][send_request_body.complete]
[2025-05-23 15:45:17,355][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:17,703][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Fri, 23 May 2025 06:45:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'15000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:33Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:17Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:46:11Z'), (b'retry-after', b'6'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'19000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:17Z'), (b'request-id', b'req_011CPQ1aWHywtn2tsFkeEoB2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944296f04c303091-ICN')])]
[2025-05-23 15:45:17,704][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Fri, 23 May 2025 06:45:17 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '15000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:33Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:17Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:46:11Z', 'retry-after': '6', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '19000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:17Z', 'request-id': 'req_011CPQ1aWHywtn2tsFkeEoB2', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944296f04c303091-ICN'})]
[2025-05-23 15:45:17,705][DEBUG][request_id: req_011CPQ1aWHywtn2tsFkeEoB2]
[2025-05-23 15:45:17,705][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-23 15:45:17,708][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-23 15:45:17,708][DEBUG][response_closed.started]
[2025-05-23 15:45:17,708][DEBUG][response_closed.complete]
[2025-05-23 15:45:17,708][DEBUG][2 retries left]
[2025-05-23 15:45:17,724][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=fb0b689b-2547-43ca-bd5f-deafc0407d2f; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=646e7f08-1c85-4d6c-9346-069c336df373; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=646e7f08-1c85-4d6c-9346-069c336df373; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=1d44c2ba-49de-4f04-a632-02a1f0fcc9b2; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=dcfcce70-1019-41f0-98a4-bfb072e4b576; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=dcfcce70-1019-41f0-98a4-bfb072e4b576; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=58e6f178-8c48-4bcb-9a48-91632940475f; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=c886e607-a713-46ea-94d7-cf370ae832ac; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=d4674a8f-ba43-4ccd-a5c1-c362c7f0e9aa; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=42ce68cf-e1fb-40da-8eea-f10682c882d5; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=42ce68cf-e1fb-40da-8eea-f10682c882d5; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=e191985e-5627-41d5-bbdd-ac8e5255b603]
[2025-05-23 15:45:17,971][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:45:23,714][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-99e69d83-4200-4496-b085-8f6d0443b644', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n[Document(id=\'085958b9-7bd7-496c-87c8-eba671f1f005\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'33ca2856-7451-4a6a-ab73-673c80a20660\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'d9960882-a398-4d57-bc78-cc429809cc7c\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지\'), Document(id=\'00236c14-275d-46d2-bd3e-80d605b6f1af\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')]\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'temperature': 0.0}}]
[2025-05-23 15:45:23,724][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:23,725][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:23,738][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b5191910>]
[2025-05-23 15:45:23,738][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x3b51b8680> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:23,768][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31b7a9e10>]
[2025-05-23 15:45:23,768][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:23,768][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:23,769][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:23,769][DEBUG][send_request_body.complete]
[2025-05-23 15:45:23,769][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:24,523][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:45:24 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'15000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:39Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:37Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:46:23Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'18000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:37Z'), (b'request-id', b'req_011CPQ1ayg1XTuzw8BpG14D1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944297185e8ad1f5-ICN')])]
[2025-05-23 15:45:24,524][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:45:24 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '15000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:39Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:37Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:46:23Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '18000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:37Z', 'request-id': 'req_011CPQ1ayg1XTuzw8BpG14D1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944297185e8ad1f5-ICN'})]
[2025-05-23 15:45:24,524][DEBUG][request_id: req_011CPQ1ayg1XTuzw8BpG14D1]
[2025-05-23 15:45:24,524][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:24,526][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '58', 'data': '{"run--e191985e-5627-41d5-bbdd-ac8e5255b603":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":10,"langgraph_node":"generate","langgraph_triggers":["branch:to:generate"],"langgraph_path":["__pregel_pull","generate"],"langgraph_checkpoint_ns":"generate:8aa6aa3f-83aa-b455-a094-016adeb92688","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:24.526100Z'}]
[2025-05-23 15:45:24,527][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '59', 'data': '[{"content":"","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:24.527140Z'}]
[2025-05-23 15:45:24,528][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '60', 'data': '[{"content":"네","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:24.528111Z'}]
[2025-05-23 15:45:24,535][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '61', 'data': '[{"content":"네, 가","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:24.535336Z'}]
[2025-05-23 15:45:24,639][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '62', 'data': '[{"content":"네, 가능합니다. ","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:24.639805Z'}]
[2025-05-23 15:45:25,055][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '63', 'data': '[{"content":"네, 가능합니다. 지방자치단체","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.055883Z'}]
[2025-05-23 15:45:25,057][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '64', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 ","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.057027Z'}]
[2025-05-23 15:45:25,058][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '65', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.058029Z'}]
[2025-05-23 15:45:25,059][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '66', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.059084Z'}]
[2025-05-23 15:45:25,061][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '67', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.061350Z'}]
[2025-05-23 15:45:25,135][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '68', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.135958Z'}]
[2025-05-23 15:45:25,153][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '69', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.153642Z'}]
[2025-05-23 15:45:25,215][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '70', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.215719Z'}]
[2025-05-23 15:45:25,219][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '71', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.219799Z'}]
[2025-05-23 15:45:25,312][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '72', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 ","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.312651Z'}]
[2025-05-23 15:45:25,463][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '73', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.463806Z'}]
[2025-05-23 15:45:25,570][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '74', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.570347Z'}]
[2025-05-23 15:45:25,571][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '75', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.571539Z'}]
[2025-05-23 15:45:25,686][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '76', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.685990Z'}]
[2025-05-23 15:45:25,744][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '77', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.743955Z'}]
[2025-05-23 15:45:25,781][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '78', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.781127Z'}]
[2025-05-23 15:45:25,874][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '79', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.874096Z'}]
[2025-05-23 15:45:25,966][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '80', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:25.966932Z'}]
[2025-05-23 15:45:26,092][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '81', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.092256Z'}]
[2025-05-23 15:45:26,093][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '82', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.093517Z'}]
[2025-05-23 15:45:26,205][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '83', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.205510Z'}]
[2025-05-23 15:45:26,254][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '84', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.254156Z'}]
[2025-05-23 15:45:26,400][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '85', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.400286Z'}]
[2025-05-23 15:45:26,616][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '86', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.616939Z'}]
[2025-05-23 15:45:26,632][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '87', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.632706Z'}]
[2025-05-23 15:45:26,729][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '88', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.729214Z'}]
[2025-05-23 15:45:26,778][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '89', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.778558Z'}]
[2025-05-23 15:45:26,822][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '90', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 ","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.822868Z'}]
[2025-05-23 15:45:26,873][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '91', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.873373Z'}]
[2025-05-23 15:45:26,918][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '92', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 ","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.918311Z'}]
[2025-05-23 15:45:26,972][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '93', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:26.972052Z'}]
[2025-05-23 15:45:27,019][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '94', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:27.019375Z'}]
[2025-05-23 15:45:27,140][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '95', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:27.140873Z'}]
[2025-05-23 15:45:27,142][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '96', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06.","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:27.142135Z'}]
[2025-05-23 15:45:27,160][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '97', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:27.160451Z'}]
[2025-05-23 15:45:27,311][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '98', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":0,"total_tokens":3272,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:27.311902Z'}]
[2025-05-23 15:45:27,375][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '99', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"end_turn","stop_sequence":null},"type":"ai","name":null,"id":"run--e191985e-5627-41d5-bbdd-ac8e5255b603","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3272,"output_tokens":172,"total_tokens":3444,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:27.375212Z'}]
[2025-05-23 15:45:27,400][DEBUG][receive_response_body.complete]
[2025-05-23 15:45:27,401][DEBUG][response_closed.started]
[2025-05-23 15:45:27,401][DEBUG][response_closed.complete]
[2025-05-23 15:45:27,419][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-998b8f97-df47-406b-a6c4-ed68321e0a86', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n [Document(id=\'085958b9-7bd7-496c-87c8-eba671f1f005\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'33ca2856-7451-4a6a-ab73-673c80a20660\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'d9960882-a398-4d57-bc78-cc429809cc7c\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지\'), Document(id=\'00236c14-275d-46d2-bd3e-80d605b6f1af\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')] \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 15:45:27,421][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:27,421][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:27,432][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31b7d3f50>]
[2025-05-23 15:45:27,432][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x3b51b8440> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:27,456][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x119c13210>]
[2025-05-23 15:45:27,456][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:27,457][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:27,457][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:27,457][DEBUG][send_request_body.complete]
[2025-05-23 15:45:27,457][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:27,689][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Fri, 23 May 2025 06:45:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'15000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:43Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:27Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:46:23Z'), (b'retry-after', b'8'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'19000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:27Z'), (b'request-id', b'req_011CPQ1bFS3iRPJUQhCH7JzH'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442972f591b322a-ICN')])]
[2025-05-23 15:45:27,690][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Fri, 23 May 2025 06:45:27 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '15000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:43Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:27Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:46:23Z', 'retry-after': '8', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '19000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:27Z', 'request-id': 'req_011CPQ1bFS3iRPJUQhCH7JzH', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442972f591b322a-ICN'})]
[2025-05-23 15:45:27,690][DEBUG][request_id: req_011CPQ1bFS3iRPJUQhCH7JzH]
[2025-05-23 15:45:27,691][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-23 15:45:27,692][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-23 15:45:27,692][DEBUG][response_closed.started]
[2025-05-23 15:45:27,693][DEBUG][response_closed.complete]
[2025-05-23 15:45:27,693][DEBUG][2 retries left]
[2025-05-23 15:45:27,942][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=e191985e-5627-41d5-bbdd-ac8e5255b603; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=d126c8b8-1fb9-4559-9b1a-0ef15f938cf1; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=d126c8b8-1fb9-4559-9b1a-0ef15f938cf1; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=d4674a8f-ba43-4ccd-a5c1-c362c7f0e9aa; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=67603471-0475-4c8d-afbc-a0b83d280d27; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=b12ecab9-fd04-4690-9403-0da4e9c9eeb1; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=25e24532-67a7-4c33-9f2b-3d2f1e922a9c; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=25e24532-67a7-4c33-9f2b-3d2f1e922a9c; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=1d260e83-082a-464d-b057-5ae46182c47b]
[2025-05-23 15:45:28,185][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:45:35,698][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-998b8f97-df47-406b-a6c4-ed68321e0a86', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n [Document(id=\'085958b9-7bd7-496c-87c8-eba671f1f005\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'33ca2856-7451-4a6a-ab73-673c80a20660\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'d9960882-a398-4d57-bc78-cc429809cc7c\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지\'), Document(id=\'00236c14-275d-46d2-bd3e-80d605b6f1af\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')] \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 15:45:35,700][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:35,700][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:35,727][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31b77da90>]
[2025-05-23 15:45:35,727][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x3b51b8440> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:35,742][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3258027d0>]
[2025-05-23 15:45:35,742][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:35,743][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:35,743][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:35,743][DEBUG][send_request_body.complete]
[2025-05-23 15:45:35,743][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:36,592][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:45:36 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'16000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:49Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:49Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:46:35Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'19000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:49Z'), (b'request-id', b'req_011CPQ1brrmmak1qHdQtV7eT'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944297632936ea1f-ICN')])]
[2025-05-23 15:45:36,594][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:45:36 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '16000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:49Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:49Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:46:35Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '19000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:49Z', 'request-id': 'req_011CPQ1brrmmak1qHdQtV7eT', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944297632936ea1f-ICN'})]
[2025-05-23 15:45:36,594][DEBUG][request_id: req_011CPQ1brrmmak1qHdQtV7eT]
[2025-05-23 15:45:36,595][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:36,597][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '100', 'data': '{"run--1d260e83-082a-464d-b057-5ae46182c47b":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":10,"langgraph_node":"generate","langgraph_triggers":["branch:to:generate"],"langgraph_path":["__pregel_pull","generate"],"langgraph_checkpoint_ns":"generate:8aa6aa3f-83aa-b455-a094-016adeb92688","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:36.597160Z'}]
[2025-05-23 15:45:36,599][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '101', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--1d260e83-082a-464d-b057-5ae46182c47b","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3169,"output_tokens":0,"total_tokens":3169,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:36.599133Z'}]
[2025-05-23 15:45:36,600][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '102', 'data': '[{"content":[{"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","input":{},"name":"GradeHallucinations","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--1d260e83-082a-464d-b057-5ae46182c47b","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{},"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3169,"output_tokens":0,"total_tokens":3169,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:36.600355Z'}]
[2025-05-23 15:45:36,601][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '103', 'data': '[{"content":[{"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--1d260e83-082a-464d-b057-5ae46182c47b","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{},"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3169,"output_tokens":0,"total_tokens":3169,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:36.601403Z'}]
[2025-05-23 15:45:36,769][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '104', 'data': '[{"content":[{"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":"{\\"pas"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--1d260e83-082a-464d-b057-5ae46182c47b","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{},"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3169,"output_tokens":0,"total_tokens":3169,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:36.769354Z'}]
[2025-05-23 15:45:36,771][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '105', 'data': '[{"content":[{"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\":"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--1d260e83-082a-464d-b057-5ae46182c47b","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{},"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3169,"output_tokens":0,"total_tokens":3169,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:36.771056Z'}]
[2025-05-23 15:45:36,772][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '106', 'data': '[{"content":[{"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--1d260e83-082a-464d-b057-5ae46182c47b","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{"pass_yn":""},"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3169,"output_tokens":0,"total_tokens":3169,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:36.772089Z'}]
[2025-05-23 15:45:36,773][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '107', 'data': '[{"content":[{"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--1d260e83-082a-464d-b057-5ae46182c47b","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{"pass_yn":"Y"},"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3169,"output_tokens":0,"total_tokens":3169,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:36.772996Z'}]
[2025-05-23 15:45:36,773][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '108', 'data': '[{"content":[{"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--1d260e83-082a-464d-b057-5ae46182c47b","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{"pass_yn":"Y"},"id":"toolu_01G1YqnraYLtk6L6w2m5BnrR","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":3169,"output_tokens":35,"total_tokens":3204,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:36.773896Z'}]
[2025-05-23 15:45:36,805][DEBUG][receive_response_body.complete]
[2025-05-23 15:45:36,805][DEBUG][response_closed.started]
[2025-05-23 15:45:36,806][DEBUG][response_closed.complete]
[2025-05-23 15:45:36,822][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-24d60990-bba4-40f4-96fa-50d03bdfdae5', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지? \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 15:45:36,822][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:36,822][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:36,835][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3258147d0>]
[2025-05-23 15:45:36,835][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x31b779490> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:36,853][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3b51be890>]
[2025-05-23 15:45:36,854][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:36,854][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:36,854][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:36,854][DEBUG][send_request_body.complete]
[2025-05-23 15:45:36,854][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:37,096][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Fri, 23 May 2025 06:45:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'15000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:52Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:45:37Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:46:35Z'), (b'retry-after', b'11'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'19000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:37Z'), (b'request-id', b'req_011CPQ1bwfFNqu791WLscTJT'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442976a19beeaaa-ICN')])]
[2025-05-23 15:45:37,096][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Fri, 23 May 2025 06:45:37 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '15000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:52Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:45:37Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:46:35Z', 'retry-after': '11', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '19000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:37Z', 'request-id': 'req_011CPQ1bwfFNqu791WLscTJT', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442976a19beeaaa-ICN'})]
[2025-05-23 15:45:37,097][DEBUG][request_id: req_011CPQ1bwfFNqu791WLscTJT]
[2025-05-23 15:45:37,097][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-23 15:45:37,098][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-23 15:45:37,098][DEBUG][response_closed.started]
[2025-05-23 15:45:37,098][DEBUG][response_closed.complete]
[2025-05-23 15:45:37,098][DEBUG][2 retries left]
[2025-05-23 15:45:37,346][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=1d260e83-082a-464d-b057-5ae46182c47b; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=944865db-619c-48d8-9953-c3721d087443; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=944865db-619c-48d8-9953-c3721d087443; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=b12ecab9-fd04-4690-9403-0da4e9c9eeb1; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=97905c9e-c378-4866-a2ca-8bcca33f2f6a; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=03ff502b-5034-45ce-9b67-04fb4bd6487f; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=03ff502b-5034-45ce-9b67-04fb4bd6487f; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=98d0b211-2fbf-4f8b-8dd5-69785b167d23]
[2025-05-23 15:45:37,584][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:45:48,103][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-24d60990-bba4-40f4-96fa-50d03bdfdae5', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지? \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 15:45:48,106][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:45:48,107][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:45:48,119][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31b757310>]
[2025-05-23 15:45:48,120][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x31b779490> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:45:48,142][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3258173d0>]
[2025-05-23 15:45:48,142][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:48,143][DEBUG][send_request_headers.complete]
[2025-05-23 15:45:48,143][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:48,143][DEBUG][send_request_body.complete]
[2025-05-23 15:45:48,143][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:45:49,406][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:45:49 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:45:54Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:46:01Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:46:47Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'21000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:45:54Z'), (b'request-id', b'req_011CPQ1cmu9ave2s2scqu8mK'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944297b0a805ea33-ICN')])]
[2025-05-23 15:45:49,407][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:45:49 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:45:54Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:46:01Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:46:47Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '21000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:45:54Z', 'request-id': 'req_011CPQ1cmu9ave2s2scqu8mK', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944297b0a805ea33-ICN'})]
[2025-05-23 15:45:49,408][DEBUG][request_id: req_011CPQ1cmu9ave2s2scqu8mK]
[2025-05-23 15:45:49,408][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:45:49,411][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '109', 'data': '{"run--98d0b211-2fbf-4f8b-8dd5-69785b167d23":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":10,"langgraph_node":"generate","langgraph_triggers":["branch:to:generate"],"langgraph_path":["__pregel_pull","generate"],"langgraph_checkpoint_ns":"generate:8aa6aa3f-83aa-b455-a094-016adeb92688","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.411632Z'}]
[2025-05-23 15:45:49,414][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '110', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--98d0b211-2fbf-4f8b-8dd5-69785b167d23","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1033,"output_tokens":0,"total_tokens":1033,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.414702Z'}]
[2025-05-23 15:45:49,420][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '111', 'data': '[{"content":[{"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--98d0b211-2fbf-4f8b-8dd5-69785b167d23","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{},"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1033,"output_tokens":0,"total_tokens":1033,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.420101Z'}]
[2025-05-23 15:45:49,422][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '112', 'data': '[{"content":[{"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--98d0b211-2fbf-4f8b-8dd5-69785b167d23","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{},"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1033,"output_tokens":0,"total_tokens":1033,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.421958Z'}]
[2025-05-23 15:45:49,530][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '113', 'data': '[{"content":[{"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0,"partial_json":"{\\"pas"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--98d0b211-2fbf-4f8b-8dd5-69785b167d23","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{},"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1033,"output_tokens":0,"total_tokens":1033,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.530183Z'}]
[2025-05-23 15:45:49,532][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '114', 'data': '[{"content":[{"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--98d0b211-2fbf-4f8b-8dd5-69785b167d23","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{"pass_yn":""},"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1033,"output_tokens":0,"total_tokens":1033,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.532304Z'}]
[2025-05-23 15:45:49,534][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '115', 'data': '[{"content":[{"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--98d0b211-2fbf-4f8b-8dd5-69785b167d23","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{"pass_yn":"Y"},"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1033,"output_tokens":0,"total_tokens":1033,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.534316Z'}]
[2025-05-23 15:45:49,698][DEBUG][receive_response_body.complete]
[2025-05-23 15:45:49,700][DEBUG][response_closed.started]
[2025-05-23 15:45:49,700][DEBUG][response_closed.complete]
[2025-05-23 15:45:49,708][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/partial', 'message_id': '116', 'data': '[{"content":[{"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--98d0b211-2fbf-4f8b-8dd5-69785b167d23","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{"pass_yn":"Y"},"id":"toolu_01HK4XK47Hs6Qe9iEMRu5pc4","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":1033,"output_tokens":35,"total_tokens":1068,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.708184Z'}]
[2025-05-23 15:45:49,714][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/metadata', 'message_id': '117', 'data': '{"4594e9ce-8590-4468-a59a-4ce152ea6be5":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":"","langgraph_step":10,"langgraph_node":"generate","langgraph_triggers":["branch:to:generate"],"langgraph_path":["__pregel_pull","generate"],"langgraph_checkpoint_ns":"generate:8aa6aa3f-83aa-b455-a094-016adeb92688"}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.714506Z'}]
[2025-05-23 15:45:49,716][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'messages/complete', 'message_id': '118', 'data': '[{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"4594e9ce-8590-4468-a59a-4ce152ea6be5","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.716760Z'}]
[2025-05-23 15:45:49,718][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '119', 'data': '{"type":"task_result","timestamp":"2025-05-23T06:45:49.713391+00:00","step":10,"payload":{"id":"8aa6aa3f-83aa-b455-a094-016adeb92688","name":"generate","error":null,"result":[["generate_message","네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)"],["messages",{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"4594e9ce-8590-4468-a59a-4ce152ea6be5","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}],["documents",[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"}]]],"interrupts":[]}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.718636Z'}]
[2025-05-23 15:45:49,723][DEBUG][{'run_id': '1f037a16-de61-66e8-bffd-720e7cbaff88', 'stream_mode': 'debug', 'message_id': '120', 'data': '{"type":"checkpoint","timestamp":"2025-05-23T06:45:49.718420+00:00","step":10,"payload":{"config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f037a19-035a-6c7c-800a-29d0158795e9","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"parent_config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_ns":"","checkpoint_id":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","checkpoint_id":"1f037a17-cd19-6092-8009-8f893069fe0a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true},"run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88"},"values":{"question":"현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?","generate_message":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)","documents":[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"}],"messages":[{"content":"오늘은 전국이 흐리고 비가 오는 곳이 있습니다. 서울, 인천, 경기도는 늦은 오후(15~18시)까지 가끔 비가 오겠습니다. 최저기온은 10~12.5도, 최고기온은 13~15도로 예상됩니다.\\n\\n**출처**\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109\\n- https://www.youtube.com/watch?v=gUivHveIAZE","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"2059902a-6a7e-43b2-8cf6-fa181d39d775","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},{"content":"안녕하세요! 반갑습니다.\\n\\n**출처**\\n- https://www.youtube.com/watch?v=gUivHveIAZE\\n- https://www.newsclaim.co.kr/news/articleView.html?idxno=3044825\\n- https://www.weather.go.kr/w/weather/forecast/short-term.do?stnId=109","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"5ce88d0f-8fda-46ed-906c-ad683d4aa529","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"4594e9ce-8590-4468-a59a-4ce152ea6be5","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]},"metadata":{"source":"loop","writes":{"generate":{"generate_message":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)","messages":{"content":"네, 가능합니다. 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반 행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업 업무종사자의 업태와 유사한 업종을 기준으로 판단해야 합니다.\\n\\n**출처**\\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"4594e9ce-8590-4468-a59a-4ce152ea6be5","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},"documents":[{"id":"085958b9-7bd7-496c-87c8-eba671f1f005","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업","type":"Document"},{"id":"33ca2856-7451-4a6a-ab73-673c80a20660","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로","type":"Document"},{"id":"d9960882-a398-4d57-bc78-cc429809cc7c","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":1,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\\n므로 상시근로자수 판단에서 제외하여야 함\\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\\n보건관리체제 등을 갖추도록 할 경우\\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지","type":"Document"},{"id":"00236c14-275d-46d2-bd3e-80d605b6f1af","metadata":{"source":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","file_path":"/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf","page":2,"total_pages":3,"Author":"dw","CreationDate":"D:20241223160641+09\'00\'","Creator":"Hwp 2022 12.0.0.2416","ModDate":"D:20241223160641+09\'00\'","PDFVersion":"1.4","Producer":"Hancom PDF 1.3.0.545"},"page_content":"보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정","type":"Document"}]}},"step":10,"parents":{},"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","langgraph_auth_user_id":"","langgraph_request_id":"a4643d6c-a695-4715-b3ef-fcbd368e5c7a","thread_ts":"1f0379f9-29fa-6dc0-8005-4c36bed8ce9a","run_id":"1f037a16-de61-66e8-bffd-720e7cbaff88","user_id":""},"next":[],"tasks":[],"checkpoint":{"checkpoint_id":"1f037a19-035a-6c7c-800a-29d0158795e9","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""},"parent_checkpoint":{"checkpoint_id":"1f037a17-cd19-6092-8009-8f893069fe0a","thread_id":"4763e2ab-a843-4188-9c9f-ea7a06b6844b","checkpoint_ns":""}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:45:49.723666Z'}]
[2025-05-23 15:45:49,780][DEBUG][close.started]
[2025-05-23 15:45:49,780][DEBUG][close.complete]
[2025-05-23 15:45:49,781][DEBUG][close.started]
[2025-05-23 15:45:49,781][DEBUG][close.complete]
[2025-05-23 15:45:49,781][DEBUG][close.started]
[2025-05-23 15:45:49,782][DEBUG][close.complete]
[2025-05-23 15:45:49,782][DEBUG][close.started]
[2025-05-23 15:45:49,782][DEBUG][close.complete]
[2025-05-23 15:45:49,783][DEBUG][close.started]
[2025-05-23 15:45:49,784][DEBUG][close.complete]
[2025-05-23 15:45:50,277][DEBUG][Sending compressed multipart request with context: trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=98d0b211-2fbf-4f8b-8dd5-69785b167d23; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=7bdae372-362f-4fad-af37-29ebcaf3041b; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=7bdae372-362f-4fad-af37-29ebcaf3041b; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=97905c9e-c378-4866-a2ca-8bcca33f2f6a; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=67603471-0475-4c8d-afbc-a0b83d280d27; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=c886e607-a713-46ea-94d7-cf370ae832ac; trace=1f037a16-de61-66e8-bffd-720e7cbaff88,id=1f037a16-de61-66e8-bffd-720e7cbaff88]
[2025-05-23 15:45:50,500][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:48:46,116][DEBUG][close.started]
[2025-05-23 15:48:46,117][DEBUG][close.complete]
[2025-05-23 15:48:46,118][DEBUG][connect_tcp.started host='api.smith.langchain.com' port=443 local_address=None timeout=5 socket_options=None]
[2025-05-23 15:48:46,136][DEBUG][connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x3193ffd10>]
[2025-05-23 15:48:46,137][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x10e588710> server_hostname='api.smith.langchain.com' timeout=5]
[2025-05-23 15:48:46,159][DEBUG][start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x31797b3d0>]
[2025-05-23 15:48:46,160][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:48:46,160][DEBUG][send_request_headers.complete]
[2025-05-23 15:48:46,160][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:48:46,161][DEBUG][send_request_body.complete]
[2025-05-23 15:48:46,162][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:48:46,355][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'5d409946b75eef7e0f59288f9d1c08f2'), (b'Date', b'Fri, 23 May 2025 06:48:46 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 15:48:46,358][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:48:46,358][DEBUG][receive_response_body.complete]
[2025-05-23 15:48:46,359][DEBUG][response_closed.started]
[2025-05-23 15:48:46,359][DEBUG][response_closed.complete]
[2025-05-23 15:49:47,732][DEBUG][close.started]
[2025-05-23 15:49:47,732][DEBUG][close.complete]
[2025-05-23 15:50:05,689][DEBUG][close.started]
[2025-05-23 15:50:05,689][DEBUG][close.complete]
[2025-05-23 15:50:06,863][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'0161f1ee78a2a1f501aa17b688eda91a'), (b'Date', b'Fri, 23 May 2025 06:50:06 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 15:50:06,865][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:50:06,865][DEBUG][receive_response_body.complete]
[2025-05-23 15:50:06,866][DEBUG][response_closed.started]
[2025-05-23 15:50:06,866][DEBUG][response_closed.complete]
[2025-05-23 15:50:18,536][DEBUG][close.started]
[2025-05-23 15:50:18,537][DEBUG][close.complete]
[2025-05-23 15:56:01,041][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'412201966f245d7669a86b70dfed2453'), (b'Date', b'Fri, 23 May 2025 06:56:01 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 15:56:01,052][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:56:01,054][DEBUG][receive_response_body.complete]
[2025-05-23 15:56:01,057][DEBUG][response_closed.started]
[2025-05-23 15:56:01,058][DEBUG][response_closed.complete]
[2025-05-23 15:56:32,371][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 15:56:32,384][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'metadata', 'message_id': '0', 'data': '{"run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","attempt":1}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:32.384816Z'}]
[2025-05-23 15:56:32,386][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'debug', 'message_id': '1', 'data': '{"type":"checkpoint","timestamp":"2025-05-23T06:56:32.384458+00:00","step":-1,"payload":{"config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true,"checkpoint_id":"1f037a30-f44b-6a48-bfff-053a33a81037"},"run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec"},"parent_config":null,"values":{"messages":[]},"metadata":{"source":"input","writes":{"__start__":{"question":"오늘 점심 추천해줘"}},"step":-1,"parents":{},"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":""},"next":["__start__"],"tasks":[{"id":"6b1379d0-c1cc-077d-2b1c-664f3e0bd095","name":"__start__","interrupts":[],"state":null}],"checkpoint":{"checkpoint_id":"1f037a30-f44b-6a48-bfff-053a33a81037","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","checkpoint_ns":""},"parent_checkpoint":null}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:32.386230Z'}]
[2025-05-23 15:56:32,407][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-70c679af-2904-4f5d-9441-611a4d15d389', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '오늘 점심 추천해줘'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-23 15:56:32,408][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:56:32,408][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:56:32,430][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1082988d0>]
[2025-05-23 15:56:32,430][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x108546210> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:56:32,454][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108143310>]
[2025-05-23 15:56:32,454][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:56:32,455][DEBUG][send_request_headers.complete]
[2025-05-23 15:56:32,455][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:56:32,455][DEBUG][send_request_body.complete]
[2025-05-23 15:56:32,455][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:56:32,595][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 15:56:32,648][DEBUG][Sending multipart request with context: trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=1f037a30-eeb1-61c8-8c06-fa3b01827bec; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=94bf401a-18db-47cc-9c69-09bdc9086f10; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=0310fff0-c7ab-4fee-8131-c0beaf24da37; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=6edce408-ea5f-44d7-87f1-e00df6597c0e; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=1e0fb89e-cd02-45dd-a752-1e822853909e; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=d00bd0b4-ebbe-4d3b-9147-294d00aa6c73]
[2025-05-23 15:56:32,880][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:56:33,296][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:56:33 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:56:34Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:56:46Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:56:44Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:56:34Z'), (b'request-id', b'req_011CPQ2SGd6duRnTFu98Bijb'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442a76bad13aa84-ICN')])]
[2025-05-23 15:56:33,297][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:56:33 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:56:34Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:56:46Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:56:44Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:56:34Z', 'request-id': 'req_011CPQ2SGd6duRnTFu98Bijb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442a76bad13aa84-ICN'})]
[2025-05-23 15:56:33,297][DEBUG][request_id: req_011CPQ2SGd6duRnTFu98Bijb]
[2025-05-23 15:56:33,297][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:56:33,305][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/metadata', 'message_id': '2', 'data': '{"run--d00bd0b4-ebbe-4d3b-9147-294d00aa6c73":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":"","langgraph_step":0,"langgraph_node":"__start__","langgraph_triggers":["__start__"],"langgraph_path":["__pregel_pull","__start__"],"langgraph_checkpoint_ns":"__start__:6b1379d0-c1cc-077d-2b1c-664f3e0bd095","checkpoint_ns":"__start__:6b1379d0-c1cc-077d-2b1c-664f3e0bd095","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024,"tags":["langsmith:hidden"]}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.305616Z'}]
[2025-05-23 15:56:33,307][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '3', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--d00bd0b4-ebbe-4d3b-9147-294d00aa6c73","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":746,"output_tokens":0,"total_tokens":746,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.307458Z'}]
[2025-05-23 15:56:33,308][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '4', 'data': '[{"content":[{"id":"toolu_01441PHKQgWevKZxp4Zwmn65","input":{},"name":"RouteQuery","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--d00bd0b4-ebbe-4d3b-9147-294d00aa6c73","example":false,"tool_calls":[{"name":"RouteQuery","args":{},"id":"toolu_01441PHKQgWevKZxp4Zwmn65","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":746,"output_tokens":0,"total_tokens":746,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.308555Z'}]
[2025-05-23 15:56:33,310][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '5', 'data': '[{"content":[{"id":"toolu_01441PHKQgWevKZxp4Zwmn65","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--d00bd0b4-ebbe-4d3b-9147-294d00aa6c73","example":false,"tool_calls":[{"name":"RouteQuery","args":{},"id":"toolu_01441PHKQgWevKZxp4Zwmn65","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":746,"output_tokens":0,"total_tokens":746,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.310252Z'}]
[2025-05-23 15:56:33,529][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '6', 'data': '[{"content":[{"id":"toolu_01441PHKQgWevKZxp4Zwmn65","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--d00bd0b4-ebbe-4d3b-9147-294d00aa6c73","example":false,"tool_calls":[{"name":"RouteQuery","args":{},"id":"toolu_01441PHKQgWevKZxp4Zwmn65","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":746,"output_tokens":0,"total_tokens":746,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.528983Z'}]
[2025-05-23 15:56:33,532][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '7', 'data': '[{"content":[{"id":"toolu_01441PHKQgWevKZxp4Zwmn65","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next_no"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--d00bd0b4-ebbe-4d3b-9147-294d00aa6c73","example":false,"tool_calls":[{"name":"RouteQuery","args":{},"id":"toolu_01441PHKQgWevKZxp4Zwmn65","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":746,"output_tokens":0,"total_tokens":746,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.532583Z'}]
[2025-05-23 15:56:33,534][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '8', 'data': '[{"content":[{"id":"toolu_01441PHKQgWevKZxp4Zwmn65","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next_node\\": \\"gener"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--d00bd0b4-ebbe-4d3b-9147-294d00aa6c73","example":false,"tool_calls":[{"name":"RouteQuery","args":{"next_node":"gener"},"id":"toolu_01441PHKQgWevKZxp4Zwmn65","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":746,"output_tokens":0,"total_tokens":746,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.534514Z'}]
[2025-05-23 15:56:33,536][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '9', 'data': '[{"content":[{"id":"toolu_01441PHKQgWevKZxp4Zwmn65","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next_node\\": \\"generate\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--d00bd0b4-ebbe-4d3b-9147-294d00aa6c73","example":false,"tool_calls":[{"name":"RouteQuery","args":{"next_node":"generate"},"id":"toolu_01441PHKQgWevKZxp4Zwmn65","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":746,"output_tokens":0,"total_tokens":746,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.536606Z'}]
[2025-05-23 15:56:33,538][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '10', 'data': '[{"content":[{"id":"toolu_01441PHKQgWevKZxp4Zwmn65","input":{},"name":"RouteQuery","type":"tool_use","index":0,"partial_json":"{\\"next_node\\": \\"generate\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--d00bd0b4-ebbe-4d3b-9147-294d00aa6c73","example":false,"tool_calls":[{"name":"RouteQuery","args":{"next_node":"generate"},"id":"toolu_01441PHKQgWevKZxp4Zwmn65","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":746,"output_tokens":35,"total_tokens":781,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.538086Z'}]
[2025-05-23 15:56:33,538][DEBUG][receive_response_body.complete]
[2025-05-23 15:56:33,538][DEBUG][response_closed.started]
[2025-05-23 15:56:33,539][DEBUG][response_closed.complete]
[2025-05-23 15:56:33,545][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'debug', 'message_id': '11', 'data': '{"type":"checkpoint","timestamp":"2025-05-23T06:56:33.543864+00:00","step":0,"payload":{"config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true,"checkpoint_id":"1f037a30-ff5a-6394-8000-825a53ad0c97"},"run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec"},"parent_config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true,"checkpoint_id":"1f037a30-f44b-6a48-bfff-053a33a81037"},"run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec"},"values":{"question":"오늘 점심 추천해줘","messages":[]},"metadata":{"source":"loop","writes":null,"step":0,"parents":{},"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":""},"next":["generate"],"tasks":[{"id":"d05419f2-3ba0-7e58-3c09-b3f24b71290e","name":"generate","interrupts":[],"state":null}],"checkpoint":{"checkpoint_id":"1f037a30-ff5a-6394-8000-825a53ad0c97","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","checkpoint_ns":""},"parent_checkpoint":{"checkpoint_id":"1f037a30-f44b-6a48-bfff-053a33a81037","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","checkpoint_ns":""}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.545631Z'}]
[2025-05-23 15:56:33,548][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'debug', 'message_id': '12', 'data': '{"type":"task","timestamp":"2025-05-23T06:56:33.544208+00:00","step":1,"payload":{"id":"d05419f2-3ba0-7e58-3c09-b3f24b71290e","name":"generate","input":{"question":"오늘 점심 추천해줘","messages":[]},"triggers":["branch:to:generate"]}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:33.548294Z'}]
[2025-05-23 15:56:33,573][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-a361974d-f39b-432e-ad6e-0f235f40d0f2', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n오늘 점심 추천해줘\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'temperature': 0.0}}]
[2025-05-23 15:56:33,577][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:56:33,578][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:56:33,594][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108128cd0>]
[2025-05-23 15:56:33,594][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x108546f00> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:56:33,614][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108143710>]
[2025-05-23 15:56:33,614][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:56:33,615][DEBUG][send_request_headers.complete]
[2025-05-23 15:56:33,615][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:56:33,615][DEBUG][send_request_body.complete]
[2025-05-23 15:56:33,615][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:56:34,086][DEBUG][Sending compressed multipart request with context: trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=d00bd0b4-ebbe-4d3b-9147-294d00aa6c73; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=a7703ffc-1f1c-4749-bff7-db25a5ca5bd0; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=a7703ffc-1f1c-4749-bff7-db25a5ca5bd0; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=6edce408-ea5f-44d7-87f1-e00df6597c0e; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=0310fff0-c7ab-4fee-8131-c0beaf24da37; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=94bf401a-18db-47cc-9c69-09bdc9086f10; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=8831d10b-6231-4d1c-8b8b-4bec32b103a3; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=2fad4efe-1985-4544-af4c-e354029315c4; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=2c7eb6c4-09f3-42b3-8e73-ef515579b5dc; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=2c7eb6c4-09f3-42b3-8e73-ef515579b5dc; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=f60a7e05-1cca-48fe-93a5-bdaffb887599]
[2025-05-23 15:56:34,316][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:56:34,507][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:56:34 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:56:36Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:56:47Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:56:56Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:56:36Z'), (b'request-id', b'req_011CPQ2SMeUNuneefPnE2HUo'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442a772ef60ea01-ICN')])]
[2025-05-23 15:56:34,508][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:56:34 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:56:36Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:56:47Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:56:56Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:56:36Z', 'request-id': 'req_011CPQ2SMeUNuneefPnE2HUo', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442a772ef60ea01-ICN'})]
[2025-05-23 15:56:34,508][DEBUG][request_id: req_011CPQ2SMeUNuneefPnE2HUo]
[2025-05-23 15:56:34,508][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:56:34,510][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/metadata', 'message_id': '13', 'data': '{"run--f60a7e05-1cca-48fe-93a5-bdaffb887599":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":"","langgraph_step":1,"langgraph_node":"generate","langgraph_triggers":["branch:to:generate"],"langgraph_path":["__pregel_pull","generate"],"langgraph_checkpoint_ns":"generate:d05419f2-3ba0-7e58-3c09-b3f24b71290e","checkpoint_ns":"generate:d05419f2-3ba0-7e58-3c09-b3f24b71290e","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:34.510000Z'}]
[2025-05-23 15:56:34,512][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '14', 'data': '[{"content":"","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f60a7e05-1cca-48fe-93a5-bdaffb887599","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":902,"output_tokens":0,"total_tokens":902,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:34.512289Z'}]
[2025-05-23 15:56:34,595][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '15', 'data': '[{"content":"죄송합니다","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f60a7e05-1cca-48fe-93a5-bdaffb887599","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":902,"output_tokens":0,"total_tokens":902,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:34.595546Z'}]
[2025-05-23 15:56:34,617][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '16', 'data': '[{"content":"죄송합니다. 다","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f60a7e05-1cca-48fe-93a5-bdaffb887599","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":902,"output_tokens":0,"total_tokens":902,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:34.617197Z'}]
[2025-05-23 15:56:34,662][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '17', 'data': '[{"content":"죄송합니다. 다른 질문을","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f60a7e05-1cca-48fe-93a5-bdaffb887599","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":902,"output_tokens":0,"total_tokens":902,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:34.662130Z'}]
[2025-05-23 15:56:34,713][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '18', 'data': '[{"content":"죄송합니다. 다른 질문을 해주세요","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f60a7e05-1cca-48fe-93a5-bdaffb887599","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":902,"output_tokens":0,"total_tokens":902,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:34.713295Z'}]
[2025-05-23 15:56:34,751][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '19', 'data': '[{"content":"죄송합니다. 다른 질문을 해주세요.","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--f60a7e05-1cca-48fe-93a5-bdaffb887599","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":902,"output_tokens":0,"total_tokens":902,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:34.751148Z'}]
[2025-05-23 15:56:34,756][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '20', 'data': '[{"content":"죄송합니다. 다른 질문을 해주세요.","additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"end_turn","stop_sequence":null},"type":"ai","name":null,"id":"run--f60a7e05-1cca-48fe-93a5-bdaffb887599","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":902,"output_tokens":24,"total_tokens":926,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:34.756441Z'}]
[2025-05-23 15:56:34,773][DEBUG][receive_response_body.complete]
[2025-05-23 15:56:34,774][DEBUG][response_closed.started]
[2025-05-23 15:56:34,774][DEBUG][response_closed.complete]
[2025-05-23 15:56:34,793][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-c6ea3a6f-816a-4d6d-9edf-655fa5fe7144', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n  \n\n LLM generation: 죄송합니다. 다른 질문을 해주세요.'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 15:56:34,795][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:56:34,795][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:56:34,806][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10870c290>]
[2025-05-23 15:56:34,807][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x108546c30> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:56:34,824][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10870c210>]
[2025-05-23 15:56:34,824][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:56:34,825][DEBUG][send_request_headers.complete]
[2025-05-23 15:56:34,825][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:56:34,825][DEBUG][send_request_body.complete]
[2025-05-23 15:56:34,825][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:56:35,312][DEBUG][Sending compressed multipart request with context: trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=f60a7e05-1cca-48fe-93a5-bdaffb887599; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=ba9dc2f3-09a5-4499-b8c8-8a664625ebae; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=ba9dc2f3-09a5-4499-b8c8-8a664625ebae; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=2fad4efe-1985-4544-af4c-e354029315c4; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=385cf2af-efb6-4de1-a013-fa822f9fdaf6; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=9a415cd8-6ed3-4236-855f-a2e9d9d2d51a; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=2d7afecf-f4ae-484b-aae0-4e106e5b8322; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=2d7afecf-f4ae-484b-aae0-4e106e5b8322; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=c1ae264d-c75d-48b1-93b9-1c72af819cd0]
[2025-05-23 15:56:35,317][DEBUG][close.started]
[2025-05-23 15:56:35,318][DEBUG][close.complete]
[2025-05-23 15:56:35,318][DEBUG][close.started]
[2025-05-23 15:56:35,319][DEBUG][close.complete]
[2025-05-23 15:56:35,547][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:56:36,051][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:56:36 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:56:39Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:56:48Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:57:08Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:56:39Z'), (b'request-id', b'req_011CPQ2SSnYKqhkRyTfzQ9YS'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442a77a7a1e309e-ICN')])]
[2025-05-23 15:56:36,053][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:56:36 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:56:39Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:56:48Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:57:08Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:56:39Z', 'request-id': 'req_011CPQ2SSnYKqhkRyTfzQ9YS', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442a77a7a1e309e-ICN'})]
[2025-05-23 15:56:36,053][DEBUG][request_id: req_011CPQ2SSnYKqhkRyTfzQ9YS]
[2025-05-23 15:56:36,053][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:56:36,055][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/metadata', 'message_id': '21', 'data': '{"run--c1ae264d-c75d-48b1-93b9-1c72af819cd0":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":"","langgraph_step":1,"langgraph_node":"generate","langgraph_triggers":["branch:to:generate"],"langgraph_path":["__pregel_pull","generate"],"langgraph_checkpoint_ns":"generate:d05419f2-3ba0-7e58-3c09-b3f24b71290e","checkpoint_ns":"generate:d05419f2-3ba0-7e58-3c09-b3f24b71290e","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:36.055565Z'}]
[2025-05-23 15:56:36,058][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '22', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--c1ae264d-c75d-48b1-93b9-1c72af819cd0","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":744,"output_tokens":0,"total_tokens":744,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:36.058175Z'}]
[2025-05-23 15:56:36,064][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '23', 'data': '[{"content":[{"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","input":{},"name":"GradeHallucinations","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--c1ae264d-c75d-48b1-93b9-1c72af819cd0","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{},"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":744,"output_tokens":0,"total_tokens":744,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:36.064264Z'}]
[2025-05-23 15:56:36,066][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '24', 'data': '[{"content":[{"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--c1ae264d-c75d-48b1-93b9-1c72af819cd0","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{},"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":744,"output_tokens":0,"total_tokens":744,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:36.066195Z'}]
[2025-05-23 15:56:36,074][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '25', 'data': '[{"content":[{"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":"{\\"pas"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--c1ae264d-c75d-48b1-93b9-1c72af819cd0","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{},"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":744,"output_tokens":0,"total_tokens":744,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:36.074455Z'}]
[2025-05-23 15:56:36,077][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '26', 'data': '[{"content":[{"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--c1ae264d-c75d-48b1-93b9-1c72af819cd0","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{"pass_yn":"Y"},"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":744,"output_tokens":0,"total_tokens":744,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:36.077017Z'}]
[2025-05-23 15:56:36,083][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '27', 'data': '[{"content":[{"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","input":{},"name":"GradeHallucinations","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--c1ae264d-c75d-48b1-93b9-1c72af819cd0","example":false,"tool_calls":[{"name":"GradeHallucinations","args":{"pass_yn":"Y"},"id":"toolu_015dnzxqXQ7tw3Va2oqdTS7s","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":744,"output_tokens":35,"total_tokens":779,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:36.083444Z'}]
[2025-05-23 15:56:36,159][DEBUG][receive_response_body.complete]
[2025-05-23 15:56:36,159][DEBUG][response_closed.started]
[2025-05-23 15:56:36,160][DEBUG][response_closed.complete]
[2025-05-23 15:56:36,177][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-0fda5d7d-e072-4119-bd29-ad17f064a75e', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 오늘 점심 추천해줘 \n\n LLM generation: 죄송합니다. 다른 질문을 해주세요.'}], 'model': 'claude-3-5-sonnet-20240620', 'stream': True, 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 15:56:36,178][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 15:56:36,178][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 15:56:36,196][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108229a10>]
[2025-05-23 15:56:36,196][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x108546960> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 15:56:36,275][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108161c50>]
[2025-05-23 15:56:36,275][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 15:56:36,277][DEBUG][send_request_headers.complete]
[2025-05-23 15:56:36,277][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 15:56:36,277][DEBUG][send_request_body.complete]
[2025-05-23 15:56:36,278][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 15:56:36,713][DEBUG][Sending compressed multipart request with context: trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=c1ae264d-c75d-48b1-93b9-1c72af819cd0; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=a2beef17-b21a-4f2d-ab1c-cdeecf6505d5; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=a2beef17-b21a-4f2d-ab1c-cdeecf6505d5; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=9a415cd8-6ed3-4236-855f-a2e9d9d2d51a; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=5f33fa0b-7a19-45a6-9cc8-580e4b48b0cb; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=14fa3a14-df6f-4961-ad3e-d38bc9522aeb; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=14fa3a14-df6f-4961-ad3e-d38bc9522aeb; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=7d25d4fe-3fbc-4b3b-b644-c59fb24f95ca]
[2025-05-23 15:56:36,923][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:56:37,035][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 06:56:37 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T06:56:41Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'3000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T06:56:50Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'1'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T06:57:20Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'21000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T06:56:41Z'), (b'request-id', b'req_011CPQ2SZ5ohNDmZcDcu3CMB'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442a783a9508b68-ICN')])]
[2025-05-23 15:56:37,036][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 06:56:37 GMT', 'content-type': 'text/event-stream; charset=utf-8', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cache-control': 'no-cache', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T06:56:41Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '3000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T06:56:50Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '1', 'anthropic-ratelimit-requests-reset': '2025-05-23T06:57:20Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '21000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T06:56:41Z', 'request-id': 'req_011CPQ2SZ5ohNDmZcDcu3CMB', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442a783a9508b68-ICN'})]
[2025-05-23 15:56:37,036][DEBUG][request_id: req_011CPQ2SZ5ohNDmZcDcu3CMB]
[2025-05-23 15:56:37,037][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:56:37,038][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/metadata', 'message_id': '28', 'data': '{"run--7d25d4fe-3fbc-4b3b-b644-c59fb24f95ca":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":"","langgraph_step":1,"langgraph_node":"generate","langgraph_triggers":["branch:to:generate"],"langgraph_path":["__pregel_pull","generate"],"langgraph_checkpoint_ns":"generate:d05419f2-3ba0-7e58-3c09-b3f24b71290e","checkpoint_ns":"generate:d05419f2-3ba0-7e58-3c09-b3f24b71290e","ls_provider":"anthropic","ls_model_name":"claude-3-5-sonnet-20240620","ls_model_type":"chat","ls_temperature":0.0,"ls_max_tokens":1024}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.038757Z'}]
[2025-05-23 15:56:37,039][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '29', 'data': '[{"content":[],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--7d25d4fe-3fbc-4b3b-b644-c59fb24f95ca","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":791,"output_tokens":0,"total_tokens":791,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.039906Z'}]
[2025-05-23 15:56:37,041][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '30', 'data': '[{"content":[{"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--7d25d4fe-3fbc-4b3b-b644-c59fb24f95ca","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{},"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":791,"output_tokens":0,"total_tokens":791,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.041089Z'}]
[2025-05-23 15:56:37,042][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '31', 'data': '[{"content":[{"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0,"partial_json":""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--7d25d4fe-3fbc-4b3b-b644-c59fb24f95ca","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{},"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":791,"output_tokens":0,"total_tokens":791,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.042152Z'}]
[2025-05-23 15:56:37,255][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '32', 'data': '[{"content":[{"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\""}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--7d25d4fe-3fbc-4b3b-b644-c59fb24f95ca","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{},"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":791,"output_tokens":0,"total_tokens":791,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.255018Z'}]
[2025-05-23 15:56:37,257][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '33', 'data': '[{"content":[{"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620"},"type":"ai","name":null,"id":"run--7d25d4fe-3fbc-4b3b-b644-c59fb24f95ca","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{"pass_yn":"Y"},"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":791,"output_tokens":0,"total_tokens":791,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.257278Z'}]
[2025-05-23 15:56:37,258][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/partial', 'message_id': '34', 'data': '[{"content":[{"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","input":{},"name":"GradeQuestionAnswer","type":"tool_use","index":0,"partial_json":"{\\"pass_yn\\": \\"Y\\"}"}],"additional_kwargs":{},"response_metadata":{"model_name":"claude-3-5-sonnet-20240620","stop_reason":"tool_use","stop_sequence":null},"type":"ai","name":null,"id":"run--7d25d4fe-3fbc-4b3b-b644-c59fb24f95ca","example":false,"tool_calls":[{"name":"GradeQuestionAnswer","args":{"pass_yn":"Y"},"id":"toolu_01KbKqyFk23QcKq6GH4vfMNH","type":"tool_call"}],"invalid_tool_calls":[],"usage_metadata":{"input_tokens":791,"output_tokens":35,"total_tokens":826,"input_token_details":{"cache_creation":0,"cache_read":0}}}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.258653Z'}]
[2025-05-23 15:56:37,280][DEBUG][receive_response_body.complete]
[2025-05-23 15:56:37,281][DEBUG][response_closed.started]
[2025-05-23 15:56:37,285][DEBUG][response_closed.complete]
[2025-05-23 15:56:37,294][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/metadata', 'message_id': '35', 'data': '{"ec54ac2e-1a2a-42c0-9fa5-163a8a46fec7":{"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":"","langgraph_step":1,"langgraph_node":"generate","langgraph_triggers":["branch:to:generate"],"langgraph_path":["__pregel_pull","generate"],"langgraph_checkpoint_ns":"generate:d05419f2-3ba0-7e58-3c09-b3f24b71290e"}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.294635Z'}]
[2025-05-23 15:56:37,295][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'messages/complete', 'message_id': '36', 'data': '[{"content":"죄송합니다. 다른 질문을 해주세요.","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"ec54ac2e-1a2a-42c0-9fa5-163a8a46fec7","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.295659Z'}]
[2025-05-23 15:56:37,296][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'debug', 'message_id': '37', 'data': '{"type":"task_result","timestamp":"2025-05-23T06:56:37.293163+00:00","step":1,"payload":{"id":"d05419f2-3ba0-7e58-3c09-b3f24b71290e","name":"generate","error":null,"result":[["generate_message","죄송합니다. 다른 질문을 해주세요."],["messages",{"content":"죄송합니다. 다른 질문을 해주세요.","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"ec54ac2e-1a2a-42c0-9fa5-163a8a46fec7","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}],["documents",""]],"interrupts":[]}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.296922Z'}]
[2025-05-23 15:56:37,299][DEBUG][{'run_id': '1f037a30-eeb1-61c8-8c06-fa3b01827bec', 'stream_mode': 'debug', 'message_id': '38', 'data': '{"type":"checkpoint","timestamp":"2025-05-23T06:56:37.296793+00:00","step":1,"payload":{"config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true,"checkpoint_id":"1f037a31-2324-6a54-8001-593796e07d6f"},"run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec"},"parent_config":{"tags":[],"metadata":{"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":""},"callbacks":null,"recursion_limit":25,"configurable":{"checkpoint_ns":"","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user":null,"langgraph_auth_user_id":"","langgraph_auth_permissions":[],"langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","user_id":"","__pregel_node_finished":null,"__pregel_checkpoint_during":true,"checkpoint_id":"1f037a30-ff5a-6394-8000-825a53ad0c97"},"run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec"},"values":{"question":"오늘 점심 추천해줘","generate_message":"죄송합니다. 다른 질문을 해주세요.","documents":"","messages":[{"content":"죄송합니다. 다른 질문을 해주세요.","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"ec54ac2e-1a2a-42c0-9fa5-163a8a46fec7","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null}]},"metadata":{"source":"loop","writes":{"generate":{"generate_message":"죄송합니다. 다른 질문을 해주세요.","messages":{"content":"죄송합니다. 다른 질문을 해주세요.","additional_kwargs":{},"response_metadata":{},"type":"ai","name":null,"id":"ec54ac2e-1a2a-42c0-9fa5-163a8a46fec7","example":false,"tool_calls":[],"invalid_tool_calls":[],"usage_metadata":null},"documents":""}},"step":1,"parents":{},"created_by":"system","graph_id":"adaptive_rag","assistant_id":"57c4d76c-a160-5917-a7c1-2f6cbc8ecc11","from_studio":true,"LANGGRAPH_API_URL":"http://127.0.0.1:2024","run_attempt":1,"langgraph_version":"0.4.5","langgraph_plan":"developer","langgraph_host":"self-hosted","langgraph_api_url":"http://127.0.0.1:2024","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","x-auth-scheme":"langsmith","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36","x-request-id":"77100b30-ea01-42ce-a023-04d0e3165549","langgraph_auth_user_id":"","langgraph_request_id":"77100b30-ea01-42ce-a023-04d0e3165549","run_id":"1f037a30-eeb1-61c8-8c06-fa3b01827bec","user_id":""},"next":[],"tasks":[],"checkpoint":{"checkpoint_id":"1f037a31-2324-6a54-8001-593796e07d6f","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","checkpoint_ns":""},"parent_checkpoint":{"checkpoint_id":"1f037a30-ff5a-6394-8000-825a53ad0c97","thread_id":"f477c8a1-4f6b-4f2a-8d70-410fe38ee57d","checkpoint_ns":""}}}', 'event': 'Streamed run event', 'thread_name': 'MainThread', 'logger': 'langgraph_runtime_inmem.ops', 'level': 'debug', 'api_variant': 'local_dev', 'timestamp': '2025-05-23T06:56:37.299089Z'}]
[2025-05-23 15:56:37,321][DEBUG][close.started]
[2025-05-23 15:56:37,322][DEBUG][close.complete]
[2025-05-23 15:56:37,829][DEBUG][Sending compressed multipart request with context: trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=7d25d4fe-3fbc-4b3b-b644-c59fb24f95ca; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=acb1c500-ed5d-498d-8b7e-3b3f9bdc2727; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=acb1c500-ed5d-498d-8b7e-3b3f9bdc2727; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=5f33fa0b-7a19-45a6-9cc8-580e4b48b0cb; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=385cf2af-efb6-4de1-a013-fa822f9fdaf6; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=8831d10b-6231-4d1c-8b8b-4bec32b103a3; trace=1f037a30-eeb1-61c8-8c06-fa3b01827bec,id=1f037a30-eeb1-61c8-8c06-fa3b01827bec]
[2025-05-23 15:56:38,046][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 15:58:43,659][DEBUG][close.started]
[2025-05-23 15:58:43,660][DEBUG][close.complete]
[2025-05-23 15:58:44,939][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'0147fa34b49362f8eca3f1e52e83c108'), (b'Date', b'Fri, 23 May 2025 06:58:44 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 15:58:44,943][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 15:58:44,944][DEBUG][receive_response_body.complete]
[2025-05-23 15:58:44,945][DEBUG][response_closed.started]
[2025-05-23 15:58:44,946][DEBUG][response_closed.complete]
[2025-05-23 15:58:54,017][DEBUG][close.started]
[2025-05-23 15:58:54,018][DEBUG][close.complete]
[2025-05-23 16:36:30,082][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 16:36:30,175][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-0827cefa-66c0-41e3-a6bf-f382602f8041', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '안녕하세요.'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-23 16:36:30,176][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:36:30,176][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:36:30,210][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1060f3810>]
[2025-05-23 16:36:30,210][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1062c8680> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:36:30,230][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1062eaf10>]
[2025-05-23 16:36:30,231][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:36:30,231][DEBUG][send_request_headers.complete]
[2025-05-23 16:36:30,231][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:36:30,231][DEBUG][send_request_body.complete]
[2025-05-23 16:36:30,231][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:36:30,345][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 16:36:30,398][DEBUG][Sending multipart request with context: trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=613be60a-eb61-4d59-8960-7caed3cd8209; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=e142b038-de24-4c6d-9d22-903cdf40b317; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=5d2b4240-4295-46ac-ad2d-d19d6e5e3c0c; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=e380ba62-6d5d-4eab-a0fe-c619be912d3e; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=eed78199-0067-4d30-9a17-3bcba763efa7; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=e92b07b5-7d13-4c81-9354-eddb051b14ac]
[2025-05-23 16:36:30,660][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:36:31,515][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:36:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:36:34Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:36:33Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:36:44Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'24000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:36:33Z'), (b'request-id', b'req_011CPQ5VAnJBRVjDfzLWn9tb'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442e2025c75eab1-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:36:31,515][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:36:31,516][DEBUG][receive_response_body.complete]
[2025-05-23 16:36:31,516][DEBUG][response_closed.started]
[2025-05-23 16:36:31,516][DEBUG][response_closed.complete]
[2025-05-23 16:36:31,516][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:36:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:36:34Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:36:33Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:36:44Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '24000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:36:33Z', 'request-id': 'req_011CPQ5VAnJBRVjDfzLWn9tb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442e2025c75eab1-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:36:31,516][DEBUG][request_id: req_011CPQ5VAnJBRVjDfzLWn9tb]
[2025-05-23 16:36:31,538][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-b20a4180-55cb-44a5-914f-eb3f9479bda5', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n안녕하세요.\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-23 16:36:31,538][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:36:31,539][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:36:31,553][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106825710>]
[2025-05-23 16:36:31,553][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1062c9640> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:36:31,567][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106216450>]
[2025-05-23 16:36:31,567][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:36:31,567][DEBUG][send_request_headers.complete]
[2025-05-23 16:36:31,567][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:36:31,567][DEBUG][send_request_body.complete]
[2025-05-23 16:36:31,567][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:36:32,076][DEBUG][Sending compressed multipart request with context: trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=e92b07b5-7d13-4c81-9354-eddb051b14ac; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=370b8820-385d-4b3f-a0ee-d93fffea10c1; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=370b8820-385d-4b3f-a0ee-d93fffea10c1; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=e380ba62-6d5d-4eab-a0fe-c619be912d3e; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=5d2b4240-4295-46ac-ad2d-d19d6e5e3c0c; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=e142b038-de24-4c6d-9d22-903cdf40b317; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=3182489e-4e74-4d10-87cb-6cda3da8bb67; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=2f8f5567-7d52-4288-9017-dbd12af73041; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=33f9f3e7-24c5-4b6f-bcce-eb132a9e2415; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=33f9f3e7-24c5-4b6f-bcce-eb132a9e2415; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=7fa8e06e-d2e8-4161-8569-305a255de600]
[2025-05-23 16:36:32,318][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:36:32,490][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:36:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:36:37Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:36:34Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:36:56Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:36:34Z'), (b'request-id', b'req_011CPQ5VGUrQTefnRJXnWyhC'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442e20ab913d1ed-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:36:32,491][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:36:32,491][DEBUG][receive_response_body.complete]
[2025-05-23 16:36:32,491][DEBUG][response_closed.started]
[2025-05-23 16:36:32,491][DEBUG][response_closed.complete]
[2025-05-23 16:36:32,491][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:36:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:36:37Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:36:34Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:36:56Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:36:34Z', 'request-id': 'req_011CPQ5VGUrQTefnRJXnWyhC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442e20ab913d1ed-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:36:32,491][DEBUG][request_id: req_011CPQ5VGUrQTefnRJXnWyhC]
[2025-05-23 16:36:32,508][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-25c57f41-c2e9-4863-bbff-c8288ef81c38', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n  \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 16:36:32,508][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:36:32,508][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:36:32,524][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106840c50>]
[2025-05-23 16:36:32,524][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1062c9250> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:36:32,546][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106827dd0>]
[2025-05-23 16:36:32,546][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:36:32,547][DEBUG][send_request_headers.complete]
[2025-05-23 16:36:32,547][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:36:32,547][DEBUG][send_request_body.complete]
[2025-05-23 16:36:32,547][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:36:33,029][DEBUG][Sending compressed multipart request with context: trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=7fa8e06e-d2e8-4161-8569-305a255de600; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=1f7ece8a-37be-4548-bf38-2a2361a5e62f; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=1f7ece8a-37be-4548-bf38-2a2361a5e62f; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=2f8f5567-7d52-4288-9017-dbd12af73041; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=1b168725-e342-4998-8786-a1442e88b200; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=d84af8de-a6f2-4baf-8a46-ee5661594ba2; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=ea14191c-79bf-4942-b11a-638506985711; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=ea14191c-79bf-4942-b11a-638506985711; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=aae64010-d220-4319-bdb0-ffe58312b78b]
[2025-05-23 16:36:33,259][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:36:34,564][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:36:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:36:39Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:36:36Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:37:08Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:36:36Z'), (b'request-id', b'req_011CPQ5VLg7Wi4JcDYmfw4ph'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442e210d968d1df-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:36:34,566][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:36:34,566][DEBUG][receive_response_body.complete]
[2025-05-23 16:36:34,567][DEBUG][response_closed.started]
[2025-05-23 16:36:34,567][DEBUG][response_closed.complete]
[2025-05-23 16:36:34,567][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:36:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:36:39Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:36:36Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:37:08Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:36:36Z', 'request-id': 'req_011CPQ5VLg7Wi4JcDYmfw4ph', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442e210d968d1df-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:36:34,567][DEBUG][request_id: req_011CPQ5VLg7Wi4JcDYmfw4ph]
[2025-05-23 16:36:34,596][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-37b4df6f-cf73-444f-ab22-174923487b16', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 안녕하세요. \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 16:36:34,596][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:36:34,596][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:36:34,613][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106846dd0>]
[2025-05-23 16:36:34,614][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1062c9520> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:36:34,626][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10683ce90>]
[2025-05-23 16:36:34,626][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:36:34,627][DEBUG][send_request_headers.complete]
[2025-05-23 16:36:34,627][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:36:34,627][DEBUG][send_request_body.complete]
[2025-05-23 16:36:34,627][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:36:35,129][DEBUG][Sending compressed multipart request with context: trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=aae64010-d220-4319-bdb0-ffe58312b78b; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=ca6fddfb-4acd-4586-9441-e7745e72e5b1; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=ca6fddfb-4acd-4586-9441-e7745e72e5b1; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=d84af8de-a6f2-4baf-8a46-ee5661594ba2; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=10917f37-1bb3-4a56-bd28-e123801fc7e9; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=671774dc-15c1-4415-bce7-ee8d9d415cdd; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=671774dc-15c1-4415-bce7-ee8d9d415cdd; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=24e80751-caf0-4d4d-8c26-24aa442f443b]
[2025-05-23 16:36:35,363][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:36:35,735][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:36:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:36:42Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:36:37Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'1'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:37:20Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:36:37Z'), (b'request-id', b'req_011CPQ5VVYuZz12YSKQDev34'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442e21dd88bd1db-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:36:35,738][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:36:35,738][DEBUG][receive_response_body.complete]
[2025-05-23 16:36:35,738][DEBUG][response_closed.started]
[2025-05-23 16:36:35,738][DEBUG][response_closed.complete]
[2025-05-23 16:36:35,739][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:36:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:36:42Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:36:37Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '1', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:37:20Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:36:37Z', 'request-id': 'req_011CPQ5VVYuZz12YSKQDev34', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442e21dd88bd1db-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:36:35,739][DEBUG][request_id: req_011CPQ5VVYuZz12YSKQDev34]
[2025-05-23 16:36:35,801][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 16:36:35,802][DEBUG][Sending compressed multipart request with context: trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=24e80751-caf0-4d4d-8c26-24aa442f443b; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=5461fc9c-7c99-4be2-aba2-4965dbc3ebc0; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=5461fc9c-7c99-4be2-aba2-4965dbc3ebc0; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=10917f37-1bb3-4a56-bd28-e123801fc7e9; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=1b168725-e342-4998-8786-a1442e88b200; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=3182489e-4e74-4d10-87cb-6cda3da8bb67; trace=613be60a-eb61-4d59-8960-7caed3cd8209,id=613be60a-eb61-4d59-8960-7caed3cd8209]
[2025-05-23 16:36:36,004][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 16:36:36,004][DEBUG][Tracing control thread is shutting down]
[2025-05-23 16:36:36,026][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:36:36,026][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 16:36:36,026][DEBUG][Closing Client.session]
[2025-05-23 16:36:36,027][DEBUG][Closing Client.session]
[2025-05-23 16:36:36,064][DEBUG][close.started]
[2025-05-23 16:36:36,065][DEBUG][close.complete]
[2025-05-23 16:36:36,065][DEBUG][close.started]
[2025-05-23 16:36:36,065][DEBUG][close.complete]
[2025-05-23 16:36:36,065][DEBUG][close.started]
[2025-05-23 16:36:36,065][DEBUG][close.complete]
[2025-05-23 16:36:36,065][DEBUG][close.started]
[2025-05-23 16:36:36,065][DEBUG][close.complete]
[2025-05-23 16:39:49,701][DEBUG][close.started]
[2025-05-23 16:39:49,702][DEBUG][close.complete]
[2025-05-23 16:39:50,957][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'32c7785231e0c696537ea94a6ca7f8ea'), (b'Date', b'Fri, 23 May 2025 07:39:50 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 16:39:50,959][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:39:50,959][DEBUG][receive_response_body.complete]
[2025-05-23 16:39:50,959][DEBUG][response_closed.started]
[2025-05-23 16:39:50,960][DEBUG][response_closed.complete]
[2025-05-23 16:39:55,233][DEBUG][close.started]
[2025-05-23 16:39:55,233][DEBUG][close.complete]
[2025-05-23 16:43:08,995][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 16:43:09,061][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-dd9ceb0c-708d-491a-af46-526f12cd0faa', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '안녕하세요.'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-23 16:43:09,061][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:43:09,061][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:43:09,086][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10990c150>]
[2025-05-23 16:43:09,086][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1098e4680> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:43:09,107][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098eee90>]
[2025-05-23 16:43:09,107][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:43:09,107][DEBUG][send_request_headers.complete]
[2025-05-23 16:43:09,107][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:43:09,107][DEBUG][send_request_body.complete]
[2025-05-23 16:43:09,107][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:43:09,217][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 16:43:09,274][DEBUG][Sending multipart request with context: trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=60edb17b-7dcb-48e5-b8d8-04963ef4bdef; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=10e39d26-1ba6-4631-8cab-5fd10b7c8b51; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=d921c2e9-d258-4e94-aabc-b5a5ca44ded7; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=23ef6086-b073-4ec5-950d-7053e1374f51; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=d601c2d0-ed21-4057-a58f-46e1b4740ac5; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=7b55e330-8200-43ff-8be7-9d084581bffb]
[2025-05-23 16:43:09,517][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:43:10,130][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:43:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:43:11Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:43:10Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:43:21Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:43:10Z'), (b'request-id', b'req_011CPQ5zR18AP7Ke66AJQXEu'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442ebb1fc68ea12-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:43:10,133][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:43:10,134][DEBUG][receive_response_body.complete]
[2025-05-23 16:43:10,134][DEBUG][response_closed.started]
[2025-05-23 16:43:10,134][DEBUG][response_closed.complete]
[2025-05-23 16:43:10,134][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:43:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:43:11Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:43:10Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:43:21Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:43:10Z', 'request-id': 'req_011CPQ5zR18AP7Ke66AJQXEu', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442ebb1fc68ea12-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:43:10,135][DEBUG][request_id: req_011CPQ5zR18AP7Ke66AJQXEu]
[2025-05-23 16:43:10,168][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-d7544e50-f360-4d22-b782-70292aeafbb7', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n안녕하세요.\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-23 16:43:10,170][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:43:10,170][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:43:10,189][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109e2a610>]
[2025-05-23 16:43:10,189][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1098e5640> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:43:10,220][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109806210>]
[2025-05-23 16:43:10,220][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:43:10,220][DEBUG][send_request_headers.complete]
[2025-05-23 16:43:10,220][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:43:10,220][DEBUG][send_request_body.complete]
[2025-05-23 16:43:10,220][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:43:10,702][DEBUG][Sending compressed multipart request with context: trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=7b55e330-8200-43ff-8be7-9d084581bffb; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=cc5f859c-7bc8-4e6b-bec5-7ce0e7e225ed; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=cc5f859c-7bc8-4e6b-bec5-7ce0e7e225ed; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=23ef6086-b073-4ec5-950d-7053e1374f51; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=d921c2e9-d258-4e94-aabc-b5a5ca44ded7; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=10e39d26-1ba6-4631-8cab-5fd10b7c8b51; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=2a5b3554-0949-409d-8d3a-ea66a4984f84; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=3ac1653a-669d-48c8-8cc9-bbd7051112bd; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=0a901ea6-a255-4dcc-82fe-08bf569a2647; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=0a901ea6-a255-4dcc-82fe-08bf569a2647; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=cc9a4132-9f59-4f59-bcb3-e64967f3e64c]
[2025-05-23 16:43:10,948][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:43:11,400][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:43:11 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:43:14Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:43:11Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:43:33Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:43:11Z'), (b'request-id', b'req_011CPQ5zVsp3CdfGDTCABVyn'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442ebb8f991305e-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:43:11,401][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:43:11,401][DEBUG][receive_response_body.complete]
[2025-05-23 16:43:11,401][DEBUG][response_closed.started]
[2025-05-23 16:43:11,401][DEBUG][response_closed.complete]
[2025-05-23 16:43:11,401][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:43:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:43:14Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:43:11Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:43:33Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:43:11Z', 'request-id': 'req_011CPQ5zVsp3CdfGDTCABVyn', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442ebb8f991305e-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:43:11,402][DEBUG][request_id: req_011CPQ5zVsp3CdfGDTCABVyn]
[2025-05-23 16:43:11,417][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-2f3dc19e-1aa0-4a65-8b40-f712763aa55a', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n  \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 16:43:11,418][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:43:11,418][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:43:11,428][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109e41690>]
[2025-05-23 16:43:11,428][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1098e5130> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:43:11,445][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109e41710>]
[2025-05-23 16:43:11,445][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:43:11,445][DEBUG][send_request_headers.complete]
[2025-05-23 16:43:11,445][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:43:11,445][DEBUG][send_request_body.complete]
[2025-05-23 16:43:11,445][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:43:11,958][DEBUG][Sending compressed multipart request with context: trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=cc9a4132-9f59-4f59-bcb3-e64967f3e64c; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=db225a3e-e22d-41e4-9ff8-31dcc9999f4e; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=db225a3e-e22d-41e4-9ff8-31dcc9999f4e; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=3ac1653a-669d-48c8-8cc9-bbd7051112bd; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=6559279b-279f-4085-9e56-f6ffa1849f38; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=fcfcb419-bdba-4dff-a81a-709126758e50; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=4747c4db-6fc3-446d-8d95-aab53eb31f80; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=4747c4db-6fc3-446d-8d95-aab53eb31f80; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=b655f91f-ed6a-4e48-8406-287f12651611]
[2025-05-23 16:43:12,178][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:43:12,505][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:43:12 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:43:16Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:43:12Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:43:45Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:43:12Z'), (b'request-id', b'req_011CPQ5zb28FC1FWic1aK4dS'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442ebc09db6aa84-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:43:12,506][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:43:12,506][DEBUG][receive_response_body.complete]
[2025-05-23 16:43:12,506][DEBUG][response_closed.started]
[2025-05-23 16:43:12,506][DEBUG][response_closed.complete]
[2025-05-23 16:43:12,507][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:43:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:43:16Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:43:12Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:43:45Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:43:12Z', 'request-id': 'req_011CPQ5zb28FC1FWic1aK4dS', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442ebc09db6aa84-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:43:12,507][DEBUG][request_id: req_011CPQ5zb28FC1FWic1aK4dS]
[2025-05-23 16:43:12,523][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-bb3ee253-55ed-4d70-8268-6e0368e4cdb8', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 안녕하세요. \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 16:43:12,524][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:43:12,524][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:43:12,552][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109e470d0>]
[2025-05-23 16:43:12,552][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1098e59a0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:43:12,570][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109e47090>]
[2025-05-23 16:43:12,571][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:43:12,571][DEBUG][send_request_headers.complete]
[2025-05-23 16:43:12,571][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:43:12,571][DEBUG][send_request_body.complete]
[2025-05-23 16:43:12,571][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:43:13,061][DEBUG][Sending compressed multipart request with context: trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=b655f91f-ed6a-4e48-8406-287f12651611; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=037e5733-1154-4109-b587-853fe729730e; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=037e5733-1154-4109-b587-853fe729730e; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=fcfcb419-bdba-4dff-a81a-709126758e50; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=17024515-8dfd-4e79-a893-dbf54092f88b; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=8355f9f2-8f23-4c84-89e5-5eb3f3d4a01d; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=8355f9f2-8f23-4c84-89e5-5eb3f3d4a01d; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=dbdfce5d-a102-4170-b904-6410caac8ad9]
[2025-05-23 16:43:13,300][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:43:13,610][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:43:13 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:43:18Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:43:13Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'1'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:43:57Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:43:13Z'), (b'request-id', b'req_011CPQ5zftKhkpdrVVvMG3EU'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442ebc7b861e9f9-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:43:13,611][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:43:13,611][DEBUG][receive_response_body.complete]
[2025-05-23 16:43:13,611][DEBUG][response_closed.started]
[2025-05-23 16:43:13,611][DEBUG][response_closed.complete]
[2025-05-23 16:43:13,611][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:43:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:43:18Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:43:13Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '1', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:43:57Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:43:13Z', 'request-id': 'req_011CPQ5zftKhkpdrVVvMG3EU', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442ebc7b861e9f9-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:43:13,612][DEBUG][request_id: req_011CPQ5zftKhkpdrVVvMG3EU]
[2025-05-23 16:43:13,670][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 16:43:13,670][DEBUG][Sending compressed multipart request with context: trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=dbdfce5d-a102-4170-b904-6410caac8ad9; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=bd2d45ad-f51f-4638-8e94-2547b1c427ec; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=bd2d45ad-f51f-4638-8e94-2547b1c427ec; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=17024515-8dfd-4e79-a893-dbf54092f88b; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=6559279b-279f-4085-9e56-f6ffa1849f38; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=2a5b3554-0949-409d-8d3a-ea66a4984f84; trace=60edb17b-7dcb-48e5-b8d8-04963ef4bdef,id=60edb17b-7dcb-48e5-b8d8-04963ef4bdef]
[2025-05-23 16:43:13,833][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 16:43:13,833][DEBUG][Tracing control thread is shutting down]
[2025-05-23 16:43:13,894][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:43:13,895][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 16:43:13,895][DEBUG][Closing Client.session]
[2025-05-23 16:43:13,896][DEBUG][Closing Client.session]
[2025-05-23 16:43:13,924][DEBUG][close.started]
[2025-05-23 16:43:13,924][DEBUG][close.complete]
[2025-05-23 16:43:13,925][DEBUG][close.started]
[2025-05-23 16:43:13,925][DEBUG][close.complete]
[2025-05-23 16:43:13,925][DEBUG][close.started]
[2025-05-23 16:43:13,925][DEBUG][close.complete]
[2025-05-23 16:43:13,925][DEBUG][close.started]
[2025-05-23 16:43:13,925][DEBUG][close.complete]
[2025-05-23 16:43:48,937][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'9a99935b07e64df7ea6dc1e222ece832'), (b'Date', b'Fri, 23 May 2025 07:43:48 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 16:43:48,938][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:43:48,939][DEBUG][receive_response_body.complete]
[2025-05-23 16:43:48,939][DEBUG][response_closed.started]
[2025-05-23 16:43:48,939][DEBUG][response_closed.complete]
[2025-05-23 16:43:50,893][DEBUG][close.started]
[2025-05-23 16:43:50,893][DEBUG][close.complete]
[2025-05-23 16:46:35,595][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 16:46:35,939][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 16:46:35,941][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 16:46:35,942][DEBUG][Sending multipart request with context: trace=88805fe9-9ee8-44f8-aec6-1e2269f6ed43,id=88805fe9-9ee8-44f8-aec6-1e2269f6ed43]
[2025-05-23 16:46:35,994][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 16:46:35,995][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 16:46:36,160][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:46:36,160][DEBUG][Tracing control thread is shutting down]
[2025-05-23 16:46:36,161][DEBUG][Closing Client.session]
[2025-05-23 16:46:36,161][DEBUG][Closing Client.session]
[2025-05-23 16:49:09,056][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 16:49:09,292][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 16:49:09,293][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 16:49:09,293][DEBUG][Sending multipart request with context: trace=60dcb446-aef9-4f03-8a08-eb829e072d92,id=60dcb446-aef9-4f03-8a08-eb829e072d92]
[2025-05-23 16:49:09,346][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 16:49:09,347][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 16:49:09,514][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:49:09,514][DEBUG][Tracing control thread is shutting down]
[2025-05-23 16:49:09,514][DEBUG][Closing Client.session]
[2025-05-23 16:49:09,515][DEBUG][Closing Client.session]
[2025-05-23 16:51:22,333][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 16:51:22,557][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 16:51:22,558][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 16:51:22,558][DEBUG][Sending multipart request with context: trace=3e40fb40-fbef-448c-8e30-c75e4a6297da,id=3e40fb40-fbef-448c-8e30-c75e4a6297da]
[2025-05-23 16:51:22,613][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 16:51:22,613][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 16:51:22,762][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:51:22,763][DEBUG][Tracing control thread is shutting down]
[2025-05-23 16:51:22,763][DEBUG][Closing Client.session]
[2025-05-23 16:51:22,764][DEBUG][Closing Client.session]
[2025-05-23 16:54:08,537][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 16:54:08,809][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 16:54:08,809][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 16:54:08,810][DEBUG][Sending multipart request with context: trace=d28a9677-1fd0-4135-b8fb-bf265149e3c8,id=d28a9677-1fd0-4135-b8fb-bf265149e3c8; trace=d28a9677-1fd0-4135-b8fb-bf265149e3c8,id=d940280d-9e85-4d4e-8bfe-d2f74bd9e7a5; trace=d28a9677-1fd0-4135-b8fb-bf265149e3c8,id=a9ac505c-626b-4321-9eff-634d69eef4f3]
[2025-05-23 16:54:08,863][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 16:54:08,863][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 16:54:09,057][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:54:09,058][DEBUG][Tracing control thread is shutting down]
[2025-05-23 16:54:09,058][DEBUG][Closing Client.session]
[2025-05-23 16:54:09,059][DEBUG][Closing Client.session]
[2025-05-23 16:54:33,405][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 16:54:33,526][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-d81fd68e-12a5-423f-accd-bc2232b8388d', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '안녕하세요.'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-23 16:54:33,528][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:54:33,529][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:54:33,561][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10f8dd550>]
[2025-05-23 16:54:33,562][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x10f9c85f0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:54:33,576][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109d58e10>]
[2025-05-23 16:54:33,577][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:54:33,577][DEBUG][send_request_headers.complete]
[2025-05-23 16:54:33,577][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:54:33,578][DEBUG][send_request_body.complete]
[2025-05-23 16:54:33,578][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:54:33,633][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 16:54:33,687][DEBUG][Sending multipart request with context: trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=d62bd7f9-e28a-479f-82c6-66095b597095; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=357e9b8d-944e-4cab-8abb-f31fea4e766f; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=0893a21a-fc6d-48d8-abfa-7eba9ddeee92; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=f37b862c-47c3-407f-807d-ec3fb0d94445; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=bf982ea5-495b-4e98-a526-55ca703dc20f; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=324fbfb1-f38f-43c7-8d32-4fad777329db]
[2025-05-23 16:54:33,922][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:54:41,780][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:54:41 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:54:42Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:54:41Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:54:45Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'24000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:54:41Z'), (b'request-id', b'req_011CPQ6rsTUyLd4bNgVa3ZNh'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442fc680cfdea8b-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:54:41,783][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:54:41,783][DEBUG][receive_response_body.complete]
[2025-05-23 16:54:41,783][DEBUG][response_closed.started]
[2025-05-23 16:54:41,784][DEBUG][response_closed.complete]
[2025-05-23 16:54:41,784][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:54:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:54:42Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:54:41Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:54:45Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '24000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:54:41Z', 'request-id': 'req_011CPQ6rsTUyLd4bNgVa3ZNh', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442fc680cfdea8b-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:54:41,784][DEBUG][request_id: req_011CPQ6rsTUyLd4bNgVa3ZNh]
[2025-05-23 16:54:41,819][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-690635a7-a648-4927-b8a9-51be204259e7', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n안녕하세요.\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-23 16:54:41,819][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:54:41,820][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:54:41,840][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10fc36950>]
[2025-05-23 16:54:41,840][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x10f9c9640> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:54:41,864][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10fc36910>]
[2025-05-23 16:54:41,864][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:54:41,865][DEBUG][send_request_headers.complete]
[2025-05-23 16:54:41,865][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:54:41,865][DEBUG][send_request_body.complete]
[2025-05-23 16:54:41,865][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:54:42,354][DEBUG][Sending compressed multipart request with context: trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=324fbfb1-f38f-43c7-8d32-4fad777329db; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=10aab00e-292e-40ee-9a7f-685a4c423507; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=10aab00e-292e-40ee-9a7f-685a4c423507; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=f37b862c-47c3-407f-807d-ec3fb0d94445; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=0893a21a-fc6d-48d8-abfa-7eba9ddeee92; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=357e9b8d-944e-4cab-8abb-f31fea4e766f; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=a2bc0fc9-7bbc-40ed-b095-10e3ff0967a1; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=d2c102b8-dbe6-4c88-84d2-538fc08f82e1; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=33803998-4428-4dcb-adc8-89ae0f3e145c; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=33803998-4428-4dcb-adc8-89ae0f3e145c; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=6b48373e-5b2a-4da0-8a57-92bfcdf41e7d]
[2025-05-23 16:54:42,700][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:54:43,110][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:54:43 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:54:44Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:54:42Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:54:57Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:54:42Z'), (b'request-id', b'req_011CPQ6sUtTCkEvEXoG5iokT'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442fc9bccc9ea8f-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:54:43,111][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:54:43,111][DEBUG][receive_response_body.complete]
[2025-05-23 16:54:43,111][DEBUG][response_closed.started]
[2025-05-23 16:54:43,111][DEBUG][response_closed.complete]
[2025-05-23 16:54:43,112][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:54:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:54:44Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:54:42Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:54:57Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:54:42Z', 'request-id': 'req_011CPQ6sUtTCkEvEXoG5iokT', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442fc9bccc9ea8f-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:54:43,112][DEBUG][request_id: req_011CPQ6sUtTCkEvEXoG5iokT]
[2025-05-23 16:54:43,127][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-87004690-2ded-424c-9343-e1e631c6a240', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n  \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 16:54:43,128][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:54:43,128][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:54:43,136][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10fc55710>]
[2025-05-23 16:54:43,136][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x10f9c91c0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:54:43,151][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10fc556d0>]
[2025-05-23 16:54:43,151][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:54:43,151][DEBUG][send_request_headers.complete]
[2025-05-23 16:54:43,151][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:54:43,152][DEBUG][send_request_body.complete]
[2025-05-23 16:54:43,152][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:54:43,663][DEBUG][Sending compressed multipart request with context: trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=6b48373e-5b2a-4da0-8a57-92bfcdf41e7d; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=1063948a-5278-4bf1-acd6-436a1af5e0a5; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=1063948a-5278-4bf1-acd6-436a1af5e0a5; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=d2c102b8-dbe6-4c88-84d2-538fc08f82e1; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=3348fd99-215c-4cf6-9514-c757ae97b766; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=3dfcf501-4a9e-459b-b52c-0649b2ff7740; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=3df8ba97-12cd-4a57-acb9-becb395b2da2; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=3df8ba97-12cd-4a57-acb9-becb395b2da2; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=48a81076-e663-4e71-815b-5baa0da12570]
[2025-05-23 16:54:43,898][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:54:44,164][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:54:44 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:54:47Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:54:44Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:55:09Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:54:44Z'), (b'request-id', b'req_011CPQ6saPbjhLwfadwK8pw4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442fca3ddff8b60-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:54:44,167][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:54:44,168][DEBUG][receive_response_body.complete]
[2025-05-23 16:54:44,169][DEBUG][response_closed.started]
[2025-05-23 16:54:44,169][DEBUG][response_closed.complete]
[2025-05-23 16:54:44,169][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:54:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:54:47Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:54:44Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:55:09Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:54:44Z', 'request-id': 'req_011CPQ6saPbjhLwfadwK8pw4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442fca3ddff8b60-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:54:44,169][DEBUG][request_id: req_011CPQ6saPbjhLwfadwK8pw4]
[2025-05-23 16:54:44,189][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-e526d77a-4c42-4ae5-a6b4-6d1b29e9fa1b', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 안녕하세요. \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 16:54:44,190][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 16:54:44,190][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 16:54:44,201][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10fc5b310>]
[2025-05-23 16:54:44,201][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x10f9c9910> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 16:54:44,222][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10fc5b2d0>]
[2025-05-23 16:54:44,222][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 16:54:44,223][DEBUG][send_request_headers.complete]
[2025-05-23 16:54:44,223][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 16:54:44,223][DEBUG][send_request_body.complete]
[2025-05-23 16:54:44,223][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 16:54:44,720][DEBUG][Sending compressed multipart request with context: trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=48a81076-e663-4e71-815b-5baa0da12570; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=40f44321-a340-42fc-9746-268bfbf3a37a; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=40f44321-a340-42fc-9746-268bfbf3a37a; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=3dfcf501-4a9e-459b-b52c-0649b2ff7740; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=7eb01aa4-bf7a-4fdf-a4ed-32f6b46b0436; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=b59b39fd-87a1-4ee4-9d30-cb61d6be0f97; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=b59b39fd-87a1-4ee4-9d30-cb61d6be0f97; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=76a0fc4b-594a-4e7a-8368-00a3208efecc]
[2025-05-23 16:54:44,967][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:54:45,987][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 07:54:45 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T07:54:49Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T07:54:45Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'1'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T07:55:21Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T07:54:45Z'), (b'request-id', b'req_011CPQ6seyRWBbqTAsEV1HrD'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9442fcaa8990a7ba-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 16:54:45,989][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 16:54:45,989][DEBUG][receive_response_body.complete]
[2025-05-23 16:54:45,990][DEBUG][response_closed.started]
[2025-05-23 16:54:45,990][DEBUG][response_closed.complete]
[2025-05-23 16:54:45,990][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 07:54:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T07:54:49Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T07:54:45Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '1', 'anthropic-ratelimit-requests-reset': '2025-05-23T07:55:21Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T07:54:45Z', 'request-id': 'req_011CPQ6seyRWBbqTAsEV1HrD', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9442fcaa8990a7ba-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 16:54:45,990][DEBUG][request_id: req_011CPQ6seyRWBbqTAsEV1HrD]
[2025-05-23 16:54:46,054][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 16:54:46,055][DEBUG][Sending compressed multipart request with context: trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=76a0fc4b-594a-4e7a-8368-00a3208efecc; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=9424d72c-b741-48e5-87c8-62429db894c9; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=9424d72c-b741-48e5-87c8-62429db894c9; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=7eb01aa4-bf7a-4fdf-a4ed-32f6b46b0436; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=3348fd99-215c-4cf6-9514-c757ae97b766; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=a2bc0fc9-7bbc-40ed-b095-10e3ff0967a1; trace=d62bd7f9-e28a-479f-82c6-66095b597095,id=d62bd7f9-e28a-479f-82c6-66095b597095]
[2025-05-23 16:54:46,120][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 16:54:46,121][DEBUG][Tracing control thread is shutting down]
[2025-05-23 16:54:46,285][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 16:54:46,286][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 16:54:46,286][DEBUG][Closing Client.session]
[2025-05-23 16:54:46,286][DEBUG][Closing Client.session]
[2025-05-23 16:54:46,313][DEBUG][close.started]
[2025-05-23 16:54:46,314][DEBUG][close.complete]
[2025-05-23 16:54:46,314][DEBUG][close.started]
[2025-05-23 16:54:46,314][DEBUG][close.complete]
[2025-05-23 16:54:46,314][DEBUG][close.started]
[2025-05-23 16:54:46,314][DEBUG][close.complete]
[2025-05-23 16:54:46,314][DEBUG][close.started]
[2025-05-23 16:54:46,314][DEBUG][close.complete]
[2025-05-23 16:56:17,945][DEBUG][receive_response_headers.failed exception=CancelledError('Task group Lifespan cancelled.')]
[2025-05-23 16:56:17,946][DEBUG][response_closed.started]
[2025-05-23 16:56:17,950][DEBUG][response_closed.complete]
[2025-05-23 16:59:59,494][DEBUG][close.started]
[2025-05-23 16:59:59,497][DEBUG][close.complete]
[2025-05-23 17:01:26,297][DEBUG][start_tls.failed exception=CancelledError('Task group Lifespan cancelled.')]
[2025-05-23 17:01:42,372][DEBUG][receive_response_headers.failed exception=CancelledError('Task group Lifespan cancelled.')]
[2025-05-23 17:01:42,374][DEBUG][response_closed.started]
[2025-05-23 17:01:42,381][DEBUG][response_closed.complete]
[2025-05-23 17:01:51,153][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'2379a11f7f3224027477654d8178f39b'), (b'Date', b'Fri, 23 May 2025 08:01:51 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 17:01:51,155][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:01:51,155][DEBUG][receive_response_body.complete]
[2025-05-23 17:01:51,155][DEBUG][response_closed.started]
[2025-05-23 17:01:51,156][DEBUG][response_closed.complete]
[2025-05-23 17:02:17,836][DEBUG][close.started]
[2025-05-23 17:02:17,837][DEBUG][close.complete]
[2025-05-23 17:02:18,877][DEBUG][connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103f54bd0>]
[2025-05-23 17:02:18,878][DEBUG][start_tls.started ssl_context=<truststore._api.SSLContext object at 0x106e28710> server_hostname='api.smith.langchain.com' timeout=5]
[2025-05-23 17:02:18,908][DEBUG][start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c29e50>]
[2025-05-23 17:02:18,909][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:18,910][DEBUG][send_request_headers.complete]
[2025-05-23 17:02:18,910][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:18,911][DEBUG][send_request_body.complete]
[2025-05-23 17:02:18,911][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:19,396][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'92233811496145ceb96aaf450e9a9d4f'), (b'Date', b'Fri, 23 May 2025 08:02:19 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 17:02:19,401][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:19,402][DEBUG][receive_response_body.complete]
[2025-05-23 17:02:19,402][DEBUG][response_closed.started]
[2025-05-23 17:02:19,403][DEBUG][response_closed.complete]
[2025-05-23 17:02:22,315][DEBUG][close.started]
[2025-05-23 17:02:22,316][DEBUG][close.complete]
[2025-05-23 17:02:29,795][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 17:02:29,856][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-6409aed1-b9a8-4191-b87a-69f23a5aea87', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '안녕하세요.'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-23 17:02:29,857][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:02:29,857][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:02:29,876][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x107be5290>]
[2025-05-23 17:02:29,876][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x107cc4560> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:02:29,891][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x106c58d10>]
[2025-05-23 17:02:29,891][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:29,892][DEBUG][send_request_headers.complete]
[2025-05-23 17:02:29,892][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:29,892][DEBUG][send_request_body.complete]
[2025-05-23 17:02:29,892][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:30,019][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 17:02:30,108][DEBUG][Sending multipart request with context: trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=13f913f2-7eba-40fc-8c1f-19cd302a1914; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=e1ca57ec-e383-41ee-b512-80fe369e1524; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=ca08144c-7957-4444-a202-2a1a5a194464; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=b8af81c2-b4b9-4732-a1e3-b1170424a938; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=af525da5-4f77-420e-b512-da22c30f50c2; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=02c66f91-32b3-4ca1-b123-63b7441c7e5e]
[2025-05-23 17:02:30,344][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:02:31,395][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:02:31 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:02:32Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:02:31Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:02:42Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'24000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:02:31Z'), (b'request-id', b'req_011CPQ7TzBXQKCDZUoUtkQZT'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944308090b6f30fd-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:02:31,396][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:31,396][DEBUG][receive_response_body.complete]
[2025-05-23 17:02:31,396][DEBUG][response_closed.started]
[2025-05-23 17:02:31,396][DEBUG][response_closed.complete]
[2025-05-23 17:02:31,397][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:02:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:02:32Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:02:31Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:02:42Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '24000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:02:31Z', 'request-id': 'req_011CPQ7TzBXQKCDZUoUtkQZT', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944308090b6f30fd-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:02:31,397][DEBUG][request_id: req_011CPQ7TzBXQKCDZUoUtkQZT]
[2025-05-23 17:02:31,424][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-8d88361c-951f-4837-9112-fea1f33e2380', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n안녕하세요.\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-23 17:02:31,425][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:02:31,425][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:02:31,433][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108225890>]
[2025-05-23 17:02:31,434][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x107cc55b0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:02:31,449][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108225850>]
[2025-05-23 17:02:31,449][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:31,450][DEBUG][send_request_headers.complete]
[2025-05-23 17:02:31,450][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:31,450][DEBUG][send_request_body.complete]
[2025-05-23 17:02:31,450][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:31,950][DEBUG][Sending compressed multipart request with context: trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=02c66f91-32b3-4ca1-b123-63b7441c7e5e; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=8992f551-fd60-48c0-a4dc-6320da98a688; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=8992f551-fd60-48c0-a4dc-6320da98a688; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=b8af81c2-b4b9-4732-a1e3-b1170424a938; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=ca08144c-7957-4444-a202-2a1a5a194464; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=e1ca57ec-e383-41ee-b512-80fe369e1524; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=79041537-0674-4c73-92e8-256f1e286278; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=ef99bec4-6ed6-4c39-a448-794a5e6eeb04; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=9ddf4086-6673-454b-b0ff-b0ec00d25f30; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=9ddf4086-6673-454b-b0ff-b0ec00d25f30; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=d1cc8c88-62f4-4267-86e8-3c8da3d3d2e8]
[2025-05-23 17:02:32,189][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:02:33,012][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:02:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:02:35Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:02:32Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:02:54Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:02:32Z'), (b'request-id', b'req_011CPQ7U6bz5Dm1aRdYaEofL'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430812c81f5871-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:02:33,013][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:33,013][DEBUG][receive_response_body.complete]
[2025-05-23 17:02:33,013][DEBUG][response_closed.started]
[2025-05-23 17:02:33,013][DEBUG][response_closed.complete]
[2025-05-23 17:02:33,013][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:02:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:02:35Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:02:32Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:02:54Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:02:32Z', 'request-id': 'req_011CPQ7U6bz5Dm1aRdYaEofL', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430812c81f5871-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:02:33,014][DEBUG][request_id: req_011CPQ7U6bz5Dm1aRdYaEofL]
[2025-05-23 17:02:33,033][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-10f85069-3f3d-47b2-a5ca-6a43d84493ac', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n  \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 17:02:33,033][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:02:33,033][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:02:33,051][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1082407d0>]
[2025-05-23 17:02:33,051][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x107cc52e0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:02:33,067][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108240790>]
[2025-05-23 17:02:33,067][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:33,067][DEBUG][send_request_headers.complete]
[2025-05-23 17:02:33,067][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:33,067][DEBUG][send_request_body.complete]
[2025-05-23 17:02:33,067][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:33,566][DEBUG][Sending compressed multipart request with context: trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=d1cc8c88-62f4-4267-86e8-3c8da3d3d2e8; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=f7f09fd2-20e3-44ac-8ccc-79f0680db613; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=f7f09fd2-20e3-44ac-8ccc-79f0680db613; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=ef99bec4-6ed6-4c39-a448-794a5e6eeb04; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=bfc55aec-ba9a-4e86-a0f7-c4626564c26e; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=189245e1-8f65-48d0-86f9-3061eb2cf6d0; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=f7cd4268-2941-49a2-bb7b-4e33e95e6172; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=f7cd4268-2941-49a2-bb7b-4e33e95e6172; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=7c1912fe-12f7-4337-83c2-d983d56da2c8]
[2025-05-23 17:02:33,793][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:02:34,166][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:02:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:02:37Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:02:34Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:03:06Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:02:34Z'), (b'request-id', b'req_011CPQ7UDXho1Vjejt6Zb1np'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9443081cef02aa40-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:02:34,167][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:34,167][DEBUG][receive_response_body.complete]
[2025-05-23 17:02:34,167][DEBUG][response_closed.started]
[2025-05-23 17:02:34,168][DEBUG][response_closed.complete]
[2025-05-23 17:02:34,168][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:02:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:02:37Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:02:34Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:03:06Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:02:34Z', 'request-id': 'req_011CPQ7UDXho1Vjejt6Zb1np', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9443081cef02aa40-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:02:34,170][DEBUG][request_id: req_011CPQ7UDXho1Vjejt6Zb1np]
[2025-05-23 17:02:34,192][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-dec32403-a9b8-49d1-9a10-07ef9e7138f3', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 안녕하세요. \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 17:02:34,193][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:02:34,193][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:02:34,209][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1082464d0>]
[2025-05-23 17:02:34,209][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x107cc51c0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:02:34,227][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108246490>]
[2025-05-23 17:02:34,228][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:34,228][DEBUG][send_request_headers.complete]
[2025-05-23 17:02:34,228][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:34,228][DEBUG][send_request_body.complete]
[2025-05-23 17:02:34,228][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:02:34,723][DEBUG][Sending compressed multipart request with context: trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=7c1912fe-12f7-4337-83c2-d983d56da2c8; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=b0cb1b66-b763-49c9-853c-5343181b45c4; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=b0cb1b66-b763-49c9-853c-5343181b45c4; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=189245e1-8f65-48d0-86f9-3061eb2cf6d0; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=b89045fa-4ee1-4a6b-b86f-ce0134f0c890; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=36a84e69-d318-4b78-8dc0-2a82d74c2697; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=36a84e69-d318-4b78-8dc0-2a82d74c2697; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=2a1de0b3-4619-4fc4-90e9-9f8a1ea22128]
[2025-05-23 17:02:35,048][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:02:35,346][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:02:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:02:39Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:02:35Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'1'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:03:18Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:02:35Z'), (b'request-id', b'req_011CPQ7UJVMMKf2TfXs5r1Ue'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944308242852316a-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:02:35,346][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:02:35,590][DEBUG][receive_response_body.complete]
[2025-05-23 17:02:35,590][DEBUG][response_closed.started]
[2025-05-23 17:02:35,590][DEBUG][response_closed.complete]
[2025-05-23 17:02:35,590][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:02:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:02:39Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:02:35Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '1', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:03:18Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:02:35Z', 'request-id': 'req_011CPQ7UJVMMKf2TfXs5r1Ue', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944308242852316a-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:02:35,591][DEBUG][request_id: req_011CPQ7UJVMMKf2TfXs5r1Ue]
[2025-05-23 17:02:35,650][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 17:02:35,650][DEBUG][Sending compressed multipart request with context: trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=2a1de0b3-4619-4fc4-90e9-9f8a1ea22128; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=e7c8d86e-dbf3-4aef-82ae-e480536fa00d; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=e7c8d86e-dbf3-4aef-82ae-e480536fa00d; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=b89045fa-4ee1-4a6b-b86f-ce0134f0c890; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=bfc55aec-ba9a-4e86-a0f7-c4626564c26e; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=79041537-0674-4c73-92e8-256f1e286278; trace=13f913f2-7eba-40fc-8c1f-19cd302a1914,id=13f913f2-7eba-40fc-8c1f-19cd302a1914]
[2025-05-23 17:02:35,669][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 17:02:35,669][DEBUG][Tracing control thread is shutting down]
[2025-05-23 17:02:35,863][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:02:35,863][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 17:02:35,863][DEBUG][Closing Client.session]
[2025-05-23 17:02:35,864][DEBUG][Closing Client.session]
[2025-05-23 17:02:35,893][DEBUG][close.started]
[2025-05-23 17:02:35,894][DEBUG][close.complete]
[2025-05-23 17:02:35,894][DEBUG][close.started]
[2025-05-23 17:02:35,894][DEBUG][close.complete]
[2025-05-23 17:02:35,894][DEBUG][close.started]
[2025-05-23 17:02:35,894][DEBUG][close.complete]
[2025-05-23 17:02:35,894][DEBUG][close.started]
[2025-05-23 17:02:35,894][DEBUG][close.complete]
[2025-05-23 17:03:23,973][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 17:03:24,027][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-14ff89f0-a1bb-44d4-b603-31f9c8b47569', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '안녕하세요.'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-23 17:03:24,028][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:03:24,028][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:03:24,040][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109942390>]
[2025-05-23 17:03:24,040][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1099d8560> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:03:24,057][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108a7b210>]
[2025-05-23 17:03:24,057][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:03:24,057][DEBUG][send_request_headers.complete]
[2025-05-23 17:03:24,058][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:03:24,058][DEBUG][send_request_body.complete]
[2025-05-23 17:03:24,058][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:03:24,197][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 17:03:24,248][DEBUG][Sending multipart request with context: trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=7797f539-3271-40b2-a7f2-9c25ee0c1522; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=ae492145-b782-4387-8f61-ec2fc23aae3e; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=2beb2d17-3f4e-4fba-8793-9b890fae65cd; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=f7f0a97f-a28c-4c30-9f3c-2dcecca865d1; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=5cf8ea70-700b-44b6-b39f-0a72d9da3e49; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=588eba5d-a1a3-45b0-ab4f-037d2785b9db]
[2025-05-23 17:03:24,475][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:03:25,078][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:03:25 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:03:26Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:03:25Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:03:36Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:03:25Z'), (b'request-id', b'req_011CPQ7XyWxCjL1ZayxrG1Qa'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9443095b8c2ce9f7-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:03:25,079][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:03:25,079][DEBUG][receive_response_body.complete]
[2025-05-23 17:03:25,079][DEBUG][response_closed.started]
[2025-05-23 17:03:25,079][DEBUG][response_closed.complete]
[2025-05-23 17:03:25,080][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:03:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:03:26Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:03:25Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:03:36Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:03:25Z', 'request-id': 'req_011CPQ7XyWxCjL1ZayxrG1Qa', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9443095b8c2ce9f7-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:03:25,080][DEBUG][request_id: req_011CPQ7XyWxCjL1ZayxrG1Qa]
[2025-05-23 17:03:25,102][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-fcb1429e-32b6-4420-8edb-ba576acdb6ed', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n안녕하세요.\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-23 17:03:25,103][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:03:25,103][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:03:25,115][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109c25390>]
[2025-05-23 17:03:25,116][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1099d95b0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:03:25,130][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109c25350>]
[2025-05-23 17:03:25,130][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:03:25,131][DEBUG][send_request_headers.complete]
[2025-05-23 17:03:25,131][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:03:25,131][DEBUG][send_request_body.complete]
[2025-05-23 17:03:25,131][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:03:25,631][DEBUG][Sending compressed multipart request with context: trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=588eba5d-a1a3-45b0-ab4f-037d2785b9db; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=56851220-bbd6-4878-99a6-bbe78ca87d09; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=56851220-bbd6-4878-99a6-bbe78ca87d09; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=f7f0a97f-a28c-4c30-9f3c-2dcecca865d1; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=2beb2d17-3f4e-4fba-8793-9b890fae65cd; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=ae492145-b782-4387-8f61-ec2fc23aae3e; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=ea085407-0d88-4e28-94b2-7bfce34b7532; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=e132449f-afda-4600-a072-d4119927be29; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=9ed19e3a-a718-4ccf-9dd4-11027d5609eb; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=9ed19e3a-a718-4ccf-9dd4-11027d5609eb; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=c83d5872-b4d2-462c-b937-b9dccdc16d0d]
[2025-05-23 17:03:25,875][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:03:26,578][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:03:26 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:03:29Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:03:26Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:03:48Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:03:26Z'), (b'request-id', b'req_011CPQ7Y48WpJgasRyGN2LCa'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944309624e093271-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:03:26,580][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:03:26,581][DEBUG][receive_response_body.complete]
[2025-05-23 17:03:26,581][DEBUG][response_closed.started]
[2025-05-23 17:03:26,581][DEBUG][response_closed.complete]
[2025-05-23 17:03:26,581][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:03:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:03:29Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:03:26Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:03:48Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:03:26Z', 'request-id': 'req_011CPQ7Y48WpJgasRyGN2LCa', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944309624e093271-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:03:26,582][DEBUG][request_id: req_011CPQ7Y48WpJgasRyGN2LCa]
[2025-05-23 17:03:26,609][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-365bd18f-f65e-44ad-bd7a-5081a027ae96', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n  \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 17:03:26,610][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:03:26,610][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:03:26,620][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109c40a50>]
[2025-05-23 17:03:26,620][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1099d92e0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:03:26,645][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1095ab310>]
[2025-05-23 17:03:26,645][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:03:26,646][DEBUG][send_request_headers.complete]
[2025-05-23 17:03:26,646][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:03:26,646][DEBUG][send_request_body.complete]
[2025-05-23 17:03:26,646][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:03:27,136][DEBUG][Sending compressed multipart request with context: trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=c83d5872-b4d2-462c-b937-b9dccdc16d0d; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=1715d6c4-f73e-43d2-8aca-13c5d76eb583; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=1715d6c4-f73e-43d2-8aca-13c5d76eb583; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=e132449f-afda-4600-a072-d4119927be29; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=d745d618-1dd2-4fac-af5e-34a329ac7d74; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=27d8115d-67d8-49c1-b842-4f59ad1239a2; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=e8169a6c-fd1e-43b1-bb24-b2452c91c4ee; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=e8169a6c-fd1e-43b1-bb24-b2452c91c4ee; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=1fc9c372-ae17-402d-87a5-f2b370cea762]
[2025-05-23 17:03:27,372][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:03:36,818][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:03:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'20000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:03:37Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:03:36Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:04:00Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'24000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:03:36Z'), (b'request-id', b'req_011CPQ7YAv3zpGy3rjBNUTFY'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9443096bb83030cd-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:03:36,821][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:03:36,821][DEBUG][receive_response_body.complete]
[2025-05-23 17:03:36,821][DEBUG][response_closed.started]
[2025-05-23 17:03:36,821][DEBUG][response_closed.complete]
[2025-05-23 17:03:36,822][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:03:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '20000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:03:37Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:03:36Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:04:00Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '24000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:03:36Z', 'request-id': 'req_011CPQ7YAv3zpGy3rjBNUTFY', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9443096bb83030cd-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:03:36,822][DEBUG][request_id: req_011CPQ7YAv3zpGy3rjBNUTFY]
[2025-05-23 17:03:36,849][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-1fe857ea-a2c5-4673-8b31-45996031c7eb', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 안녕하세요. \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 17:03:36,850][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:03:36,850][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:03:36,863][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109c46c90>]
[2025-05-23 17:03:36,863][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x1099d9640> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:03:36,881][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109c46c10>]
[2025-05-23 17:03:36,881][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:03:36,881][DEBUG][send_request_headers.complete]
[2025-05-23 17:03:36,881][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:03:36,881][DEBUG][send_request_body.complete]
[2025-05-23 17:03:36,881][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:03:37,385][DEBUG][Sending compressed multipart request with context: trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=1fc9c372-ae17-402d-87a5-f2b370cea762; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=5b5ca6a7-cad2-4870-b68b-95a9b784811a; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=5b5ca6a7-cad2-4870-b68b-95a9b784811a; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=27d8115d-67d8-49c1-b842-4f59ad1239a2; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=245541a0-5bb3-477f-a576-00a40c55263c; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=fec0c40e-db4c-4abd-a287-a2e45ffb5c92; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=fec0c40e-db4c-4abd-a287-a2e45ffb5c92; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=7281c8ab-30e9-4d80-a83d-d54c24288725]
[2025-05-23 17:03:37,613][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:03:38,037][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:03:38 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:03:39Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:03:37Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:04:12Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:03:37Z'), (b'request-id', b'req_011CPQ7YvLjMcyTAvDxxZZSn'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'944309abbd19e9fc-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:03:38,039][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:03:38,039][DEBUG][receive_response_body.complete]
[2025-05-23 17:03:38,039][DEBUG][response_closed.started]
[2025-05-23 17:03:38,039][DEBUG][response_closed.complete]
[2025-05-23 17:03:38,040][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:03:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:03:39Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:03:37Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:04:12Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:03:37Z', 'request-id': 'req_011CPQ7YvLjMcyTAvDxxZZSn', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '944309abbd19e9fc-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:03:38,040][DEBUG][request_id: req_011CPQ7YvLjMcyTAvDxxZZSn]
[2025-05-23 17:03:38,100][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 17:03:38,101][DEBUG][Sending compressed multipart request with context: trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=7281c8ab-30e9-4d80-a83d-d54c24288725; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=3606b3bd-ccc2-4950-971d-497830c79cb8; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=3606b3bd-ccc2-4950-971d-497830c79cb8; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=245541a0-5bb3-477f-a576-00a40c55263c; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=d745d618-1dd2-4fac-af5e-34a329ac7d74; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=ea085407-0d88-4e28-94b2-7bfce34b7532; trace=7797f539-3271-40b2-a7f2-9c25ee0c1522,id=7797f539-3271-40b2-a7f2-9c25ee0c1522]
[2025-05-23 17:03:38,197][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 17:03:38,198][DEBUG][Tracing control thread is shutting down]
[2025-05-23 17:03:38,313][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:03:38,314][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 17:03:38,314][DEBUG][Closing Client.session]
[2025-05-23 17:03:38,315][DEBUG][Closing Client.session]
[2025-05-23 17:03:38,350][DEBUG][close.started]
[2025-05-23 17:03:38,351][DEBUG][close.complete]
[2025-05-23 17:03:38,351][DEBUG][close.started]
[2025-05-23 17:03:38,351][DEBUG][close.complete]
[2025-05-23 17:03:38,351][DEBUG][close.started]
[2025-05-23 17:03:38,351][DEBUG][close.complete]
[2025-05-23 17:03:38,351][DEBUG][close.started]
[2025-05-23 17:03:38,351][DEBUG][close.complete]
[2025-05-23 17:04:56,756][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-23 17:04:56,824][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-ec9b78a1-cc3a-4c00-a0ad-73f77888f8c0', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-23 17:04:56,824][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:04:56,824][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:04:56,835][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x1098eedd0>]
[2025-05-23 17:04:56,836][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x109ac45f0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:04:56,853][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x109a09f10>]
[2025-05-23 17:04:56,853][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:04:56,854][DEBUG][send_request_headers.complete]
[2025-05-23 17:04:56,854][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:04:56,854][DEBUG][send_request_body.complete]
[2025-05-23 17:04:56,854][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:04:56,972][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-23 17:04:57,029][DEBUG][Sending multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=f9251381-49d8-4054-bb22-15ef9b8cf2d7; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=0984d4c9-2f84-4048-ae05-c3f2e7bd8cfc; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=c8f04aed-0b96-4075-82cd-0f0979ea9bd3; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=018f73cc-e194-4643-af1a-3ddf702510a0; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=f71f8492-cbd6-4514-b3e8-8baa8b046dcf; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=9780242d-0483-45ca-8da2-00cffe82ff76]
[2025-05-23 17:04:57,263][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:04:58,143][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:04:58 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:04:59Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:04:58Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:05:09Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:04:58Z'), (b'request-id', b'req_011CPQ7epHmcqRSyLSSrsi8V'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430b9f8913ea8d-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:04:58,145][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:04:58,145][DEBUG][receive_response_body.complete]
[2025-05-23 17:04:58,145][DEBUG][response_closed.started]
[2025-05-23 17:04:58,145][DEBUG][response_closed.complete]
[2025-05-23 17:04:58,145][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:04:58 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:04:59Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:04:58Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:05:09Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:04:58Z', 'request-id': 'req_011CPQ7epHmcqRSyLSSrsi8V', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430b9f8913ea8d-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:04:58,146][DEBUG][request_id: req_011CPQ7epHmcqRSyLSSrsi8V]
[2025-05-23 17:04:58,922][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=9780242d-0483-45ca-8da2-00cffe82ff76; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=5aaf0fa6-67be-4aec-ba4a-20500f6b5300; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=5aaf0fa6-67be-4aec-ba4a-20500f6b5300; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=018f73cc-e194-4643-af1a-3ddf702510a0; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=c8f04aed-0b96-4075-82cd-0f0979ea9bd3; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=0984d4c9-2f84-4048-ae05-c3f2e7bd8cfc; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=2429d9e5-e1e8-4d1c-b0e7-47851fb67f1c]
[2025-05-23 17:04:58,995][DEBUG][close.started]
[2025-05-23 17:04:58,996][DEBUG][close.complete]
[2025-05-23 17:04:59,151][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:03,502][DEBUG][Starting new HTTPS connection (1): huggingface.co:443]
[2025-05-23 17:05:03,760][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/modules.json HTTP/1.1" 200 0]
[2025-05-23 17:05:04,020][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/config_sentence_transformers.json HTTP/1.1" 200 0]
[2025-05-23 17:05:04,284][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/README.md HTTP/1.1" 200 0]
[2025-05-23 17:05:04,514][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/modules.json HTTP/1.1" 200 0]
[2025-05-23 17:05:04,735][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/sentence_bert_config.json HTTP/1.1" 200 0]
[2025-05-23 17:05:04,972][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/adapter_config.json HTTP/1.1" 404 0]
[2025-05-23 17:05:05,200][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/config.json HTTP/1.1" 200 0]
[2025-05-23 17:05:05,935][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/model.safetensors HTTP/1.1" 404 0]
[2025-05-23 17:05:05,939][DEBUG][Starting new HTTPS connection (1): huggingface.co:443]
[2025-05-23 17:05:06,188][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3 HTTP/1.1" 200 5220]
[2025-05-23 17:05:06,504][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/commits/main HTTP/1.1" 200 9525]
[2025-05-23 17:05:06,785][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/discussions?p=0 HTTP/1.1" 200 30448]
[2025-05-23 17:05:07,134][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/commits/refs%2Fpr%2F118 HTTP/1.1" 200 10490]
[2025-05-23 17:05:07,348][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/tokenizer_config.json HTTP/1.1" 200 0]
[2025-05-23 17:05:07,357][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/refs%2Fpr%2F118/model.safetensors.index.json HTTP/1.1" 404 0]
[2025-05-23 17:05:07,628][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/refs%2Fpr%2F118/model.safetensors HTTP/1.1" 302 0]
[2025-05-23 17:05:07,648][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64]
[2025-05-23 17:05:09,009][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/revision/main HTTP/1.1" 200 5220]
[2025-05-23 17:05:09,287][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3 HTTP/1.1" 200 5220]
[2025-05-23 17:05:12,060][DEBUG][Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU]
[2025-05-23 17:05:12,664][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=8d5f3153-6ae7-45ef-993c-05cbbece1693]
[2025-05-23 17:05:12,869][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:13,976][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-3a926bb1-921a-4f89-95c5-93651d96f09e', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\n해야 할 것이므로 산업안전보건법이 전부 적용됨\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 17:05:13,977][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:13,977][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:13,989][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3118342d0>]
[2025-05-23 17:05:13,989][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x3aca93a40> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:14,002][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x311863e90>]
[2025-05-23 17:05:14,002][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:14,002][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:14,002][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:14,002][DEBUG][send_request_body.complete]
[2025-05-23 17:05:14,003][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:14,511][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=8d5f3153-6ae7-45ef-993c-05cbbece1693; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=2429d9e5-e1e8-4d1c-b0e7-47851fb67f1c; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=9af81b36-6f44-418e-a4e5-35258fb46cf0; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=249fe58c-f54c-4eb0-bfdd-a8e3ac7de2e7; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=4f56ec77-9d18-46d0-89b0-20500ce844bc; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=4f56ec77-9d18-46d0-89b0-20500ce844bc; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=9645fb13-1bcb-4adf-a6ea-bb9d8268b658]
[2025-05-23 17:05:14,745][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:15,155][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:05:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:18Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:15Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:05:26Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:15Z'), (b'request-id', b'req_011CPQ7g5cni3aY1uRnGywbx'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430c0aba6cea30-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:05:15,157][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:15,157][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:15,158][DEBUG][response_closed.started]
[2025-05-23 17:05:15,158][DEBUG][response_closed.complete]
[2025-05-23 17:05:15,158][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:05:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:18Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:15Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:05:26Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:15Z', 'request-id': 'req_011CPQ7g5cni3aY1uRnGywbx', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430c0aba6cea30-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:05:15,158][DEBUG][request_id: req_011CPQ7g5cni3aY1uRnGywbx]
[2025-05-23 17:05:15,180][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-c65c155a-bcb1-401d-a624-beb35efb14bd', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\n가능한지?\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\n되는 범위에서의 상시근로자수를 판단하여야 함\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 17:05:15,181][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:15,181][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:15,192][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3aca4bc50>]
[2025-05-23 17:05:15,192][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x3aca93920> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:15,204][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3aca4bc10>]
[2025-05-23 17:05:15,204][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:15,204][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:15,205][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:15,205][DEBUG][send_request_body.complete]
[2025-05-23 17:05:15,205][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:15,706][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=9645fb13-1bcb-4adf-a6ea-bb9d8268b658; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=0ccf2169-841c-4f71-9b5e-8df31af83de6; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=0ccf2169-841c-4f71-9b5e-8df31af83de6; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=249fe58c-f54c-4eb0-bfdd-a8e3ac7de2e7; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=c2eededf-e455-4c5b-9a5a-c2d6c0b7f070; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=b6885569-a30c-4519-9f21-c7b7c8c1a0c8; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=b6885569-a30c-4519-9f21-c7b7c8c1a0c8; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=a276785f-b1aa-4a57-b46f-2968f51a16b8]
[2025-05-23 17:05:15,937][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:16,455][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:05:16 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:23Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:16Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:05:38Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:16Z'), (b'request-id', b'req_011CPQ7gAisNk9gdTkutyGdm'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430c123d4de9fd-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:05:16,456][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:16,457][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:16,457][DEBUG][response_closed.started]
[2025-05-23 17:05:16,458][DEBUG][response_closed.complete]
[2025-05-23 17:05:16,458][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:05:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:23Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:16Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:05:38Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:16Z', 'request-id': 'req_011CPQ7gAisNk9gdTkutyGdm', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430c123d4de9fd-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:05:16,458][DEBUG][request_id: req_011CPQ7gAisNk9gdTkutyGdm]
[2025-05-23 17:05:16,469][DEBUG][close.started]
[2025-05-23 17:05:16,469][DEBUG][close.complete]
[2025-05-23 17:05:16,488][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-2e2f8f32-5fe0-4f89-b392-70d60b3f0be6', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\n므로 상시근로자수 판단에서 제외하여야 함\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\n보건관리체제 등을 갖추도록 할 경우\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 17:05:16,488][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:16,489][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:16,506][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3aca3ba90>]
[2025-05-23 17:05:16,506][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x3aca93b60> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:16,517][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3aca4b950>]
[2025-05-23 17:05:16,517][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:16,517][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:16,517][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:16,518][DEBUG][send_request_body.complete]
[2025-05-23 17:05:16,518][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:17,018][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=a276785f-b1aa-4a57-b46f-2968f51a16b8; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=6fc1cf76-b2e9-44d8-b350-83fb10c35937; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=6fc1cf76-b2e9-44d8-b350-83fb10c35937; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=c2eededf-e455-4c5b-9a5a-c2d6c0b7f070; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=41a2ed19-22b4-45ab-aec1-b09c303dde8a; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=50fcb7b2-3a80-4fb4-96ab-005794e52857; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=50fcb7b2-3a80-4fb4-96ab-005794e52857; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=70327b0a-d8e6-4222-be87-15f7c4584d1d]
[2025-05-23 17:05:17,256][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:18,183][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:05:18 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:27Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:18Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:05:50Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'21000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:18Z'), (b'request-id', b'req_011CPQ7gGMwyqtwjiNAATDfL'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430c1a7a58d1d1-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:05:18,185][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:18,185][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:18,186][DEBUG][response_closed.started]
[2025-05-23 17:05:18,186][DEBUG][response_closed.complete]
[2025-05-23 17:05:18,186][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:05:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:27Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:18Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:05:50Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '21000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:18Z', 'request-id': 'req_011CPQ7gGMwyqtwjiNAATDfL', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430c1a7a58d1d1-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:05:18,186][DEBUG][request_id: req_011CPQ7gGMwyqtwjiNAATDfL]
[2025-05-23 17:05:18,214][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-60261d01-a667-498e-ac70-d9e581dd9dd8', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\n포함하여 상시근로자로 판단하여야 함\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\n안법 위반으로 처분 가능한지?\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 17:05:18,215][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:18,215][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:18,225][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31185ed50>]
[2025-05-23 17:05:18,225][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x3aca93ec0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:18,239][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31185ed10>]
[2025-05-23 17:05:18,239][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:18,239][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:18,239][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:18,240][DEBUG][send_request_body.complete]
[2025-05-23 17:05:18,240][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:18,743][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=70327b0a-d8e6-4222-be87-15f7c4584d1d; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=7fa24835-45cd-436c-885b-e5264fd7b9ab; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=7fa24835-45cd-436c-885b-e5264fd7b9ab; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=41a2ed19-22b4-45ab-aec1-b09c303dde8a; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=14485223-0b48-4f6f-8645-f6d0e9f23653; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=b975a5c5-7df4-446b-94fb-8eb45a9f422e; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=b975a5c5-7df4-446b-94fb-8eb45a9f422e; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=19a17a52-4a77-40ff-8265-341934770ac9]
[2025-05-23 17:05:18,745][DEBUG][close.started]
[2025-05-23 17:05:18,745][DEBUG][close.complete]
[2025-05-23 17:05:18,968][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:19,631][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:05:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'16000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:31Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:19Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'1'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:06:02Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'20000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:19Z'), (b'request-id', b'req_011CPQ7gPjTNEMiJwHrtrjxd'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430c25385faa80-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:05:19,633][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:19,634][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:19,634][DEBUG][response_closed.started]
[2025-05-23 17:05:19,634][DEBUG][response_closed.complete]
[2025-05-23 17:05:19,635][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:05:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '16000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:31Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:19Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '1', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:06:02Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '20000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:19Z', 'request-id': 'req_011CPQ7gPjTNEMiJwHrtrjxd', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430c25385faa80-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:05:19,635][DEBUG][request_id: req_011CPQ7gPjTNEMiJwHrtrjxd]
[2025-05-23 17:05:19,664][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-2c2d70a5-7b71-4910-938c-2fce221d95ba', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'- 다만, 공공행정사업이더라도 근로형태가 현저히 다르고 노무관리가\n명확히 구분되는 경우에는 해당 부문의 유사업종에 기초하여 법\n적용여부를 판단하여야 함\n○ 즉, 지방자치단체는 ｢한국표준산업분류｣에 따르면 원칙적으로 공공\n행정에 해당하나,\n- 일반 행정사무와 근로형태나 노무관리가 명확히 구분되는 환경\n미화, 가로청소 등의 현업업무는 별도로 해당 업무와 유사한 업종에\n따라 ｢산업안전보건법｣ 적용 여부를 판단해야 할 것이므로 산업\n안전보건법이 전부 적용됨\n○ 한편, 지방자치단체는 ｢지방자치법｣ 제3조에 따른 법인인 사업주\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 17:05:19,665][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:19,665][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:19,676][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31181b790>]
[2025-05-23 17:05:19,676][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x3aca93e30> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:19,689][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31181b750>]
[2025-05-23 17:05:19,689][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:19,690][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:19,690][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:19,690][DEBUG][send_request_body.complete]
[2025-05-23 17:05:19,690][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:20,196][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=19a17a52-4a77-40ff-8265-341934770ac9; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=4ec2c5e9-5bac-4541-96f0-06d9c5b41669; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=4ec2c5e9-5bac-4541-96f0-06d9c5b41669; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=14485223-0b48-4f6f-8645-f6d0e9f23653; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=3c55d891-6a52-4c45-9c13-c9fa02ee62b4; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=06f79c32-87d8-487b-b027-edb81e9c981d; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=06f79c32-87d8-487b-b027-edb81e9c981d; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=d1f1cb84-f409-45b5-9245-0a53eb97bfcd]
[2025-05-23 17:05:20,449][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:22,319][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:05:22 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'15000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:36Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:22Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:06:14Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'19000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:22Z'), (b'request-id', b'req_011CPQ7gVvmeobkcWEYtkmu2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430c2e48463116-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:05:22,319][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:22,320][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:22,320][DEBUG][response_closed.started]
[2025-05-23 17:05:22,320][DEBUG][response_closed.complete]
[2025-05-23 17:05:22,320][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:05:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '15000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:36Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:22Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:06:14Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '19000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:22Z', 'request-id': 'req_011CPQ7gVvmeobkcWEYtkmu2', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430c2e48463116-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:05:22,320][DEBUG][request_id: req_011CPQ7gVvmeobkcWEYtkmu2]
[2025-05-23 17:05:22,337][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-122932f9-7506-49cb-916f-b3ca23d01a1f', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n[Document(id=\'ea9b99b0-7d00-4222-9767-c3b76a773f1c\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'95dcda13-702a-4175-bd2c-29207f7ad5dd\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'892bb75e-94ff-4093-9ef5-98b8be192e32\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')]\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-23 17:05:22,338][DEBUG][close.started]
[2025-05-23 17:05:22,338][DEBUG][close.complete]
[2025-05-23 17:05:22,340][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:22,340][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:22,355][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31181b550>]
[2025-05-23 17:05:22,356][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x311838200> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:22,378][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31181b710>]
[2025-05-23 17:05:22,378][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:22,379][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:22,379][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:22,379][DEBUG][send_request_body.complete]
[2025-05-23 17:05:22,379][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:22,612][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Fri, 23 May 2025 08:05:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'15000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:36Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:22Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:06:14Z'), (b'retry-after', b'4'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'19000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:22Z'), (b'request-id', b'req_011CPQ7ghR5cjKnDLM3AEpZN'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430c3f196d3290-ICN')])]
[2025-05-23 17:05:22,612][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:22,613][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:22,613][DEBUG][response_closed.started]
[2025-05-23 17:05:22,613][DEBUG][response_closed.complete]
[2025-05-23 17:05:22,613][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Fri, 23 May 2025 08:05:22 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '15000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:36Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:22Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:06:14Z', 'retry-after': '4', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '19000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:22Z', 'request-id': 'req_011CPQ7ghR5cjKnDLM3AEpZN', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430c3f196d3290-ICN'})]
[2025-05-23 17:05:22,613][DEBUG][request_id: req_011CPQ7ghR5cjKnDLM3AEpZN]
[2025-05-23 17:05:22,613][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-23 17:05:22,616][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-23 17:05:22,616][DEBUG][2 retries left]
[2025-05-23 17:05:22,866][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=d1f1cb84-f409-45b5-9245-0a53eb97bfcd; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=7c423412-3b72-4bb4-a914-f68c8493c87b; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=7c423412-3b72-4bb4-a914-f68c8493c87b; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=3c55d891-6a52-4c45-9c13-c9fa02ee62b4; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=dd1a360d-f672-4216-89c3-d4cbd8b9bcf5; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=dd1a360d-f672-4216-89c3-d4cbd8b9bcf5; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=9af81b36-6f44-418e-a4e5-35258fb46cf0; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=7405121b-5045-4911-9528-7b60f643d0f3; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=79eb74e1-a5b5-4e12-90f3-168107228fe6; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=5d57bbd2-ad16-4b0d-a3d6-496d19108ce2; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=5d57bbd2-ad16-4b0d-a3d6-496d19108ce2; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=cfb84f23-f756-44ef-a55c-9a34dbc4abdd]
[2025-05-23 17:05:23,114][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:26,622][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-122932f9-7506-49cb-916f-b3ca23d01a1f', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n[Document(id=\'ea9b99b0-7d00-4222-9767-c3b76a773f1c\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'95dcda13-702a-4175-bd2c-29207f7ad5dd\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'892bb75e-94ff-4093-9ef5-98b8be192e32\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')]\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-23 17:05:26,627][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:26,627][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:26,628][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:26,629][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:26,629][DEBUG][send_request_body.complete]
[2025-05-23 17:05:26,629][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:31,163][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:05:31 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'15000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:44Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:31Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:06:26Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'19000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:31Z'), (b'request-id', b'req_011CPQ7h1aiuSA9a8kHSVgza'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430c59ae6c3290-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:05:31,165][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:31,165][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:31,166][DEBUG][response_closed.started]
[2025-05-23 17:05:31,166][DEBUG][response_closed.complete]
[2025-05-23 17:05:31,166][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:05:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '15000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:44Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:31Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:06:26Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '19000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:31Z', 'request-id': 'req_011CPQ7h1aiuSA9a8kHSVgza', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430c59ae6c3290-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:05:31,167][DEBUG][request_id: req_011CPQ7h1aiuSA9a8kHSVgza]
[2025-05-23 17:05:31,197][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-22959d94-3061-440a-9826-789a2710d291', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n [Document(id=\'ea9b99b0-7d00-4222-9767-c3b76a773f1c\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'95dcda13-702a-4175-bd2c-29207f7ad5dd\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'892bb75e-94ff-4093-9ef5-98b8be192e32\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')] \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보고, 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용할 수 있습니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 17:05:31,198][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:31,198][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:31,218][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31c32a350>]
[2025-05-23 17:05:31,218][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x3aca93e30> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:31,241][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31c32a3d0>]
[2025-05-23 17:05:31,241][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:31,241][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:31,241][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:31,241][DEBUG][send_request_body.complete]
[2025-05-23 17:05:31,242][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:31,473][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Fri, 23 May 2025 08:05:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'16000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:44Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:31Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:06:26Z'), (b'retry-after', b'7'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'20000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:31Z'), (b'request-id', b'req_011CPQ7hMJdqnwz4GjFTA8Fh'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430c767afec10c-ICN')])]
[2025-05-23 17:05:31,475][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:31,476][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:31,476][DEBUG][response_closed.started]
[2025-05-23 17:05:31,476][DEBUG][response_closed.complete]
[2025-05-23 17:05:31,476][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Fri, 23 May 2025 08:05:31 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '16000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:44Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:31Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:06:26Z', 'retry-after': '7', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '20000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:31Z', 'request-id': 'req_011CPQ7hMJdqnwz4GjFTA8Fh', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430c767afec10c-ICN'})]
[2025-05-23 17:05:31,476][DEBUG][request_id: req_011CPQ7hMJdqnwz4GjFTA8Fh]
[2025-05-23 17:05:31,477][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-23 17:05:31,478][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-23 17:05:31,478][DEBUG][2 retries left]
[2025-05-23 17:05:31,720][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=cfb84f23-f756-44ef-a55c-9a34dbc4abdd; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=dd3eb83e-0cef-4597-a721-3b447efe4789; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=dd3eb83e-0cef-4597-a721-3b447efe4789; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=79eb74e1-a5b5-4e12-90f3-168107228fe6; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=52481ee3-45bd-4229-b958-78eb360fc76d; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=b0843323-32b5-438f-9c45-4e309a33211e; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=cb8c3ff5-6ec9-4e79-8b8c-046e0c1ebbd2; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=cb8c3ff5-6ec9-4e79-8b8c-046e0c1ebbd2; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=024792ea-cd5a-4450-9fbc-2c274fac75b5]
[2025-05-23 17:05:32,020][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:38,483][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-22959d94-3061-440a-9826-789a2710d291', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n [Document(id=\'ea9b99b0-7d00-4222-9767-c3b76a773f1c\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'95dcda13-702a-4175-bd2c-29207f7ad5dd\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'892bb75e-94ff-4093-9ef5-98b8be192e32\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')] \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보고, 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용할 수 있습니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-23 17:05:38,487][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:38,488][DEBUG][close.started]
[2025-05-23 17:05:38,488][DEBUG][close.complete]
[2025-05-23 17:05:38,488][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:38,517][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31c31b5d0>]
[2025-05-23 17:05:38,517][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x3aca93e30> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:38,535][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31c31bf90>]
[2025-05-23 17:05:38,535][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:38,536][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:38,536][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:38,536][DEBUG][send_request_body.complete]
[2025-05-23 17:05:38,536][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:40,111][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:05:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'16000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:52Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:39Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:06:38Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'20000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:39Z'), (b'request-id', b'req_011CPQ7htaa6owFeZod5PNBw'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430ca418cb32a2-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:05:40,113][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:40,114][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:40,114][DEBUG][response_closed.started]
[2025-05-23 17:05:40,114][DEBUG][response_closed.complete]
[2025-05-23 17:05:40,114][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:05:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '16000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:52Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:39Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:06:38Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '20000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:39Z', 'request-id': 'req_011CPQ7htaa6owFeZod5PNBw', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430ca418cb32a2-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:05:40,114][DEBUG][request_id: req_011CPQ7htaa6owFeZod5PNBw]
[2025-05-23 17:05:40,142][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-d4abacbd-6a85-4ae8-a7c8-1e93bad2afff', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지? \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보고, 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용할 수 있습니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 17:05:40,143][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:40,143][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:40,406][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31c334290>]
[2025-05-23 17:05:40,406][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x311838320> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:40,429][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31c32ffd0>]
[2025-05-23 17:05:40,430][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:40,430][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:40,431][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:40,431][DEBUG][send_request_body.complete]
[2025-05-23 17:05:40,431][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:40,660][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Fri, 23 May 2025 08:05:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'16000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:52Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:40Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:06:38Z'), (b'retry-after', b'10'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'20000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:40Z'), (b'request-id', b'req_011CPQ7i2b2Z1Ads6pox1Yfg'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430cafec1a30da-ICN')])]
[2025-05-23 17:05:40,661][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:40,662][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:40,662][DEBUG][response_closed.started]
[2025-05-23 17:05:40,662][DEBUG][response_closed.complete]
[2025-05-23 17:05:40,662][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Fri, 23 May 2025 08:05:40 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '16000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:52Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:40Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:06:38Z', 'retry-after': '10', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '20000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:40Z', 'request-id': 'req_011CPQ7i2b2Z1Ads6pox1Yfg', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430cafec1a30da-ICN'})]
[2025-05-23 17:05:40,663][DEBUG][request_id: req_011CPQ7i2b2Z1Ads6pox1Yfg]
[2025-05-23 17:05:40,663][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-23 17:05:40,664][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-23 17:05:40,664][DEBUG][2 retries left]
[2025-05-23 17:05:40,670][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=024792ea-cd5a-4450-9fbc-2c274fac75b5; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=d474a2b9-9044-46a0-8bab-f157e98941de; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=d474a2b9-9044-46a0-8bab-f157e98941de; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=b0843323-32b5-438f-9c45-4e309a33211e; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=0115c12f-aac0-49f9-bbdc-c1c8ff9a3a14; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=f1386907-9386-44a0-8cc9-8cd2ee225005; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=f1386907-9386-44a0-8cc9-8cd2ee225005; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=79e0b4b7-1b6f-46ec-9438-d8ca63c9729f]
[2025-05-23 17:05:40,932][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:50,668][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-d4abacbd-6a85-4ae8-a7c8-1e93bad2afff', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지? \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보고, 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용할 수 있습니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n'Y'는 답변이 질문과 관련이 있음을 의미합니다.\n예외사항) 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-23 17:05:50,669][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-23 17:05:50,669][DEBUG][close.started]
[2025-05-23 17:05:50,669][DEBUG][close.complete]
[2025-05-23 17:05:50,669][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-23 17:05:50,681][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31c336790>]
[2025-05-23 17:05:50,681][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x311838320> server_hostname='api.anthropic.com' timeout=None]
[2025-05-23 17:05:50,698][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x31c336690>]
[2025-05-23 17:05:50,698][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:50,698][DEBUG][send_request_headers.complete]
[2025-05-23 17:05:50,698][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:50,698][DEBUG][send_request_body.complete]
[2025-05-23 17:05:50,698][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-23 17:05:52,196][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 23 May 2025 08:05:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-23T08:05:55Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-23T08:05:52Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-23T08:06:50Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-23T08:05:52Z'), (b'request-id', b'req_011CPQ7inUyuzauLDHNPvHg9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94430cf01befea18-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-23 17:05:52,198][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:05:52,199][DEBUG][receive_response_body.complete]
[2025-05-23 17:05:52,199][DEBUG][response_closed.started]
[2025-05-23 17:05:52,199][DEBUG][response_closed.complete]
[2025-05-23 17:05:52,199][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 23 May 2025 08:05:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-23T08:05:55Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-23T08:05:52Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-23T08:06:50Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-23T08:05:52Z', 'request-id': 'req_011CPQ7inUyuzauLDHNPvHg9', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '94430cf01befea18-ICN', 'content-encoding': 'gzip'})]
[2025-05-23 17:05:52,199][DEBUG][request_id: req_011CPQ7inUyuzauLDHNPvHg9]
[2025-05-23 17:05:52,263][DEBUG][Main thread is dead, stopping compression thread]
[2025-05-23 17:05:52,264][DEBUG][Sending compressed multipart request with context: trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=79e0b4b7-1b6f-46ec-9438-d8ca63c9729f; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=bccc9ccf-48f0-4adc-a744-76fa4c7156b7; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=bccc9ccf-48f0-4adc-a744-76fa4c7156b7; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=0115c12f-aac0-49f9-bbdc-c1c8ff9a3a14; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=52481ee3-45bd-4229-b958-78eb360fc76d; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=7405121b-5045-4911-9528-7b60f643d0f3; trace=f9251381-49d8-4054-bb22-15ef9b8cf2d7,id=f9251381-49d8-4054-bb22-15ef9b8cf2d7]
[2025-05-23 17:05:52,393][DEBUG][Main thread is dead, stopping tracing thread]
[2025-05-23 17:05:52,394][DEBUG][Tracing control thread is shutting down]
[2025-05-23 17:05:52,505][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-23 17:05:52,506][DEBUG][Compressed traces control thread is shutting down]
[2025-05-23 17:05:52,511][DEBUG][Closing Client.session]
[2025-05-23 17:05:52,520][DEBUG][Closing Client.session]
[2025-05-23 17:05:52,668][DEBUG][close.started]
[2025-05-23 17:05:52,669][DEBUG][close.complete]
[2025-05-23 17:05:52,669][DEBUG][close.started]
[2025-05-23 17:05:52,669][DEBUG][close.complete]
[2025-05-23 17:05:52,669][DEBUG][close.started]
[2025-05-23 17:05:52,669][DEBUG][close.complete]
[2025-05-23 17:05:52,669][DEBUG][close.started]
[2025-05-23 17:05:52,670][DEBUG][close.complete]
[2025-05-23 17:05:52,670][DEBUG][close.started]
[2025-05-23 17:05:52,670][DEBUG][close.complete]
[2025-05-23 17:08:12,275][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 204, b'No Content', [(b'Cache-Control', b'no-cache, no-store, no-transform, must-revalidate, private, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Vary', b'Origin'), (b'X-Accel-Expires', b'0'), (b'X-Datadog-Trace-Id', b'a653a7f0775c1b8240e0c24e8332de99'), (b'Date', b'Fri, 23 May 2025 08:08:12 GMT'), (b'Via', b'1.1 google'), (b'Access-Control-Allow-Origin', b''), (b'Access-Control-Allow-Methods', b'*'), (b'Access-Control-Allow-Headers', b'*'), (b'Access-Control-Allow-Credentials', b'true'), (b'Access-Control-Expose-Headers', b'*'), (b'Access-Control-Max-Age', b'600'), (b'Content-Security-Policy', b"frame-ancestors 'self' https://smith.langchain.com; object-src 'none'"), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Timing-Allow-Origin', b''), (b'X-Content-Type-Options', b'nosniff'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000')])]
[2025-05-23 17:08:12,278][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-23 17:08:12,279][DEBUG][receive_response_body.complete]
[2025-05-23 17:08:12,279][DEBUG][response_closed.started]
[2025-05-23 17:08:12,280][DEBUG][response_closed.complete]
[2025-05-23 17:09:15,546][DEBUG][close.started]
[2025-05-23 17:09:15,547][DEBUG][close.complete]
