[2025-05-28 10:15:16,281][DEBUG][Starting new HTTPS connection (1): api.smith.langchain.com:443]
[2025-05-28 10:15:16,377][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-7a72a0e1-4294-4ad8-9b97-f15ffc7f56e0', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '안녕하세요'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-28 10:15:16,377][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:15:16,378][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:15:16,391][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f20fc90>]
[2025-05-28 10:15:16,391][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x12f26aa80> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:15:16,405][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f20f150>]
[2025-05-28 10:15:16,405][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:16,405][DEBUG][send_request_headers.complete]
[2025-05-28 10:15:16,405][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:16,406][DEBUG][send_request_body.complete]
[2025-05-28 10:15:16,406][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:16,562][DEBUG][https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 709]
[2025-05-28 10:15:16,623][DEBUG][Sending multipart request with context: trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=c1335056-d01b-4841-8ed0-26faff4b8047; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=b9c5f499-7324-40e5-b29c-3a648e274fef; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=aa708a10-5301-403a-81e5-b0ee866d2320; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=41d7ca63-8e4b-4196-bb24-2547ebe10442; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=ef7c2314-d674-45f0-9c73-98df9137cd8f; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=51c93741-d1d6-47a4-bf5a-681c89f4d9e2]
[2025-05-28 10:15:16,859][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:15:17,557][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:15:17 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:15:18Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:15:17Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'4'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:15:28Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:15:17Z'), (b'request-id', b'req_011CPZ3TTz9YTNxBooWyvv4J'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e663cd1dea33-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:15:17,561][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:17,562][DEBUG][receive_response_body.complete]
[2025-05-28 10:15:17,562][DEBUG][response_closed.started]
[2025-05-28 10:15:17,562][DEBUG][response_closed.complete]
[2025-05-28 10:15:17,563][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:15:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:15:18Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:15:17Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '4', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:15:28Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:15:17Z', 'request-id': 'req_011CPZ3TTz9YTNxBooWyvv4J', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e663cd1dea33-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:15:17,564][DEBUG][request_id: req_011CPZ3TTz9YTNxBooWyvv4J]
[2025-05-28 10:15:17,598][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-affff44e-b9fa-4ecf-ba2d-fb8204e1c565', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n안녕하세요\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-28 10:15:17,598][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:15:17,598][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:15:17,608][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f481e50>]
[2025-05-28 10:15:17,608][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x12f26b9b0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:15:17,621][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f481e10>]
[2025-05-28 10:15:17,621][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:17,621][DEBUG][send_request_headers.complete]
[2025-05-28 10:15:17,621][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:17,621][DEBUG][send_request_body.complete]
[2025-05-28 10:15:17,621][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:18,128][DEBUG][Sending compressed multipart request with context: trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=51c93741-d1d6-47a4-bf5a-681c89f4d9e2; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=500a5dab-c316-4f10-8a73-bdc19cb0cd4a; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=500a5dab-c316-4f10-8a73-bdc19cb0cd4a; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=41d7ca63-8e4b-4196-bb24-2547ebe10442; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=aa708a10-5301-403a-81e5-b0ee866d2320; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=b9c5f499-7324-40e5-b29c-3a648e274fef; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=063672a4-3c47-49d7-bc6e-ef694709fb9c; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=60f02fd5-26b3-40e3-a925-f8197b45d7e6; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=1bc80cd7-b4bf-43ea-940e-1f95aa05f530; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=1bc80cd7-b4bf-43ea-940e-1f95aa05f530; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=d1d850fd-a2e6-4616-b962-2b253347fc1e]
[2025-05-28 10:15:18,403][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:15:18,936][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:15:18 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:15:21Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:15:18Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:15:40Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:15:18Z'), (b'request-id', b'req_011CPZ3TZAhFoGy7UsTv4enp'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e66b6f32aa60-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:15:18,941][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:18,942][DEBUG][receive_response_body.complete]
[2025-05-28 10:15:18,942][DEBUG][response_closed.started]
[2025-05-28 10:15:18,942][DEBUG][response_closed.complete]
[2025-05-28 10:15:18,942][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:15:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:15:21Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:15:18Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:15:40Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:15:18Z', 'request-id': 'req_011CPZ3TZAhFoGy7UsTv4enp', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e66b6f32aa60-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:15:18,943][DEBUG][request_id: req_011CPZ3TZAhFoGy7UsTv4enp]
[2025-05-28 10:15:18,952][DEBUG][close.started]
[2025-05-28 10:15:18,953][DEBUG][close.complete]
[2025-05-28 10:15:18,953][DEBUG][close.started]
[2025-05-28 10:15:18,953][DEBUG][close.complete]
[2025-05-28 10:15:18,968][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-4a98bdc0-d159-4fb5-b8e5-9b4ae1c73760', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n  \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-28 10:15:18,968][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:15:18,968][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:15:18,979][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f48d550>]
[2025-05-28 10:15:18,979][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x12f26b5c0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:15:18,991][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f48d590>]
[2025-05-28 10:15:18,991][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:18,991][DEBUG][send_request_headers.complete]
[2025-05-28 10:15:18,992][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:18,992][DEBUG][send_request_body.complete]
[2025-05-28 10:15:18,992][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:19,502][DEBUG][Sending compressed multipart request with context: trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=d1d850fd-a2e6-4616-b962-2b253347fc1e; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=83931ea2-decb-4426-b2e6-9b648b3ae4d0; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=83931ea2-decb-4426-b2e6-9b648b3ae4d0; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=60f02fd5-26b3-40e3-a925-f8197b45d7e6; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=2997e167-e411-48fa-ba2a-f608dace69ea; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=19af0a5e-65c8-43a2-8407-e726accc3150; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=0bb49ca3-a179-42e2-88f9-3c9a679142aa; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=0bb49ca3-a179-42e2-88f9-3c9a679142aa; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=5556d7bb-9491-4606-894c-19c4e88ff887]
[2025-05-28 10:15:19,706][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:15:19,918][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:15:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:15:23Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:15:19Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:15:52Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:15:19Z'), (b'request-id', b'req_011CPZ3Tf2AsXoU6uveVJgYM'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e673fdf6ea0c-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:15:19,920][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:19,920][DEBUG][receive_response_body.complete]
[2025-05-28 10:15:19,920][DEBUG][response_closed.started]
[2025-05-28 10:15:19,921][DEBUG][response_closed.complete]
[2025-05-28 10:15:19,921][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:15:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:15:23Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:15:19Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:15:52Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:15:19Z', 'request-id': 'req_011CPZ3Tf2AsXoU6uveVJgYM', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e673fdf6ea0c-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:15:19,921][DEBUG][request_id: req_011CPZ3Tf2AsXoU6uveVJgYM]
[2025-05-28 10:15:19,949][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-64a8477a-0e45-4c00-9a0a-5c51ac11ee51', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 안녕하세요 \n\n LLM generation: 안녕하세요. 무엇을 도와드릴까요?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n답변이 질문과 관련이 있으면 'Y'를 부여하고 관련이 없으면 'N'을 부여하세요.\n 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-28 10:15:19,951][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:15:19,951][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:15:19,979][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f4a4550>]
[2025-05-28 10:15:19,979][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x12f26b9b0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:15:20,002][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f4a4510>]
[2025-05-28 10:15:20,002][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:20,002][DEBUG][send_request_headers.complete]
[2025-05-28 10:15:20,002][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:20,003][DEBUG][send_request_body.complete]
[2025-05-28 10:15:20,003][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:20,483][DEBUG][Sending compressed multipart request with context: trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=5556d7bb-9491-4606-894c-19c4e88ff887; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=5b9ae736-5fe6-464e-aaf2-6279930225ac; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=5b9ae736-5fe6-464e-aaf2-6279930225ac; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=19af0a5e-65c8-43a2-8407-e726accc3150; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=e4f3b8ab-2585-4691-9381-3ed4db686a5b; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=6a1fbf21-ea3c-4bf3-ad49-e3762c3e590f; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=6a1fbf21-ea3c-4bf3-ad49-e3762c3e590f; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=6f2575d6-ece6-4b54-94e5-139956cc4c87]
[2025-05-28 10:15:20,485][DEBUG][close.started]
[2025-05-28 10:15:20,486][DEBUG][close.complete]
[2025-05-28 10:15:20,691][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:15:21,257][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:15:21 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:15:26Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:15:21Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'1'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:16:04Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:15:21Z'), (b'request-id', b'req_011CPZ3TjTKiz5RCmA1tTW7B'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e67a7f31ea0c-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:15:21,259][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:21,259][DEBUG][receive_response_body.complete]
[2025-05-28 10:15:21,259][DEBUG][response_closed.started]
[2025-05-28 10:15:21,260][DEBUG][response_closed.complete]
[2025-05-28 10:15:21,260][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:15:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:15:26Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:15:21Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '1', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:16:04Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:15:21Z', 'request-id': 'req_011CPZ3TjTKiz5RCmA1tTW7B', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e67a7f31ea0c-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:15:21,260][DEBUG][request_id: req_011CPZ3TjTKiz5RCmA1tTW7B]
[2025-05-28 10:15:21,814][DEBUG][Sending compressed multipart request with context: trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=6f2575d6-ece6-4b54-94e5-139956cc4c87; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=ecb08a88-47c1-415d-abe9-9b654d0e5d1d; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=ecb08a88-47c1-415d-abe9-9b654d0e5d1d; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=e4f3b8ab-2585-4691-9381-3ed4db686a5b; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=2997e167-e411-48fa-ba2a-f608dace69ea; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=063672a4-3c47-49d7-bc6e-ef694709fb9c; trace=c1335056-d01b-4841-8ed0-26faff4b8047,id=c1335056-d01b-4841-8ed0-26faff4b8047]
[2025-05-28 10:15:22,006][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:15:48,348][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-97dd5b60-2ae2-443c-a26b-6c0c495cb1c9', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 사용자 질문을 vector(벡터) 또는 search(웹 검색) 또는 generate(답변 생성)으로 라우팅하는 전문가입니다.\n- vector에는 '지방자치단체의 산안법 적용'과 관련된 문서가 포함되어 있습니다．이러한 주제에 대한 질문은 vector(벡터)를 routing하세요.\n- 일상적인 질문을 하는 경우, generate(답변 생성)으로 routing하세요.\n- 이 외의 검색이 필요한 질문의 경우, search(웹 검색)으로 routing하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'RouteQuery'}, 'tools': [{'name': 'RouteQuery', 'input_schema': {'properties': {'next_node': {'description': 'web_search/retrieve/generate 노드로 갈 지 질문을 보고 선택합니다.', 'enum': ['search', 'vector', 'generate'], 'type': 'string'}}, 'required': ['next_node'], 'type': 'object'}, 'description': '질문을 보고 가장 적합한 노드로 이동시킵니다.'}]}}]
[2025-05-28 10:15:48,349][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:15:48,349][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:15:48,360][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f20cc10>]
[2025-05-28 10:15:48,361][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x12f26bb60> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:15:48,374][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12f20cfd0>]
[2025-05-28 10:15:48,374][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:48,374][DEBUG][send_request_headers.complete]
[2025-05-28 10:15:48,374][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:48,374][DEBUG][send_request_body.complete]
[2025-05-28 10:15:48,374][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:15:48,878][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=37fa2cbf-98fa-4164-b54a-7fc26141247c; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=0782e8e5-da14-4b8e-85d5-d284c2d44830; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=34673445-7a8c-445f-9d65-e96b76b979f7; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=1971a410-8045-4e8d-a358-536e2d27b1a5; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=2111c5b3-4a95-4fc2-891b-05927df0aaf3; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=2111c5b3-4a95-4fc2-891b-05927df0aaf3; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=1ab4ef0a-df9d-4ce1-a89f-f34e6c43470f]
[2025-05-28 10:15:49,069][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:15:49,474][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:15:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:15:51Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:15:49Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:16:16Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:15:49Z'), (b'request-id', b'req_011CPZ3Vph9aLaBXUczvos9s'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e72b9b4daa41-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:15:49,475][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:15:49,475][DEBUG][receive_response_body.complete]
[2025-05-28 10:15:49,475][DEBUG][response_closed.started]
[2025-05-28 10:15:49,475][DEBUG][response_closed.complete]
[2025-05-28 10:15:49,475][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:15:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:15:51Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:15:49Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:16:16Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:15:49Z', 'request-id': 'req_011CPZ3Vph9aLaBXUczvos9s', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e72b9b4daa41-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:15:49,476][DEBUG][request_id: req_011CPZ3Vph9aLaBXUczvos9s]
[2025-05-28 10:15:49,487][DEBUG][close.started]
[2025-05-28 10:15:49,487][DEBUG][close.complete]
[2025-05-28 10:15:49,559][DEBUG][close.started]
[2025-05-28 10:15:49,559][DEBUG][close.complete]
[2025-05-28 10:15:50,296][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=1ab4ef0a-df9d-4ce1-a89f-f34e6c43470f; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=d2c070cd-aa60-4318-9a27-ca95b285a295; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=d2c070cd-aa60-4318-9a27-ca95b285a295; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=1971a410-8045-4e8d-a358-536e2d27b1a5; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=34673445-7a8c-445f-9d65-e96b76b979f7; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=0782e8e5-da14-4b8e-85d5-d284c2d44830; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=dba3c0cb-9f85-468d-b2e7-2ece95abde51]
[2025-05-28 10:15:50,505][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:15:55,225][DEBUG][Starting new HTTPS connection (1): huggingface.co:443]
[2025-05-28 10:15:55,485][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/modules.json HTTP/1.1" 200 0]
[2025-05-28 10:15:55,689][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/config_sentence_transformers.json HTTP/1.1" 200 0]
[2025-05-28 10:15:55,900][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/README.md HTTP/1.1" 200 0]
[2025-05-28 10:15:56,111][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/modules.json HTTP/1.1" 200 0]
[2025-05-28 10:15:56,325][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/sentence_bert_config.json HTTP/1.1" 200 0]
[2025-05-28 10:15:56,596][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/adapter_config.json HTTP/1.1" 404 0]
[2025-05-28 10:15:56,809][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/config.json HTTP/1.1" 200 0]
[2025-05-28 10:15:57,570][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/model.safetensors HTTP/1.1" 404 0]
[2025-05-28 10:15:57,578][DEBUG][Starting new HTTPS connection (1): huggingface.co:443]
[2025-05-28 10:15:58,309][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3 HTTP/1.1" 200 5209]
[2025-05-28 10:15:58,730][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/commits/main HTTP/1.1" 200 9525]
[2025-05-28 10:15:59,079][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/discussions?p=0 HTTP/1.1" 200 30448]
[2025-05-28 10:15:59,193][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/main/tokenizer_config.json HTTP/1.1" 200 0]
[2025-05-28 10:15:59,415][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/tree/main/additional_chat_templates?recursive=False&expand=False HTTP/1.1" 404 64]
[2025-05-28 10:16:00,352][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/commits/refs%2Fpr%2F118 HTTP/1.1" 200 10490]
[2025-05-28 10:16:00,685][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3/revision/main HTTP/1.1" 200 5209]
[2025-05-28 10:16:00,722][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/refs%2Fpr%2F118/model.safetensors.index.json HTTP/1.1" 404 0]
[2025-05-28 10:16:00,917][DEBUG][https://huggingface.co:443 "GET /api/models/BAAI/bge-m3 HTTP/1.1" 200 5209]
[2025-05-28 10:16:00,935][DEBUG][https://huggingface.co:443 "HEAD /BAAI/bge-m3/resolve/refs%2Fpr%2F118/model.safetensors HTTP/1.1" 302 0]
[2025-05-28 10:16:04,967][DEBUG][Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU]
[2025-05-28 10:16:05,289][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-81e6f8c8-74e7-4d24-ba75-438503cbbb03', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\n해야 할 것이므로 산업안전보건법이 전부 적용됨\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-28 10:16:05,290][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:05,290][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:05,316][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305f99b10>]
[2025-05-28 10:16:05,317][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305df3260> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:05,332][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305e22010>]
[2025-05-28 10:16:05,333][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:05,333][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:05,333][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:05,333][DEBUG][send_request_body.complete]
[2025-05-28 10:16:05,333][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:05,807][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=077e926e-0f17-47d0-acfd-378316c13c90; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=077e926e-0f17-47d0-acfd-378316c13c90; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=dba3c0cb-9f85-468d-b2e7-2ece95abde51; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=82e1ce35-6f73-4e60-9179-45ba26a4bebe; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=ef744803-0b4c-4600-bbfa-4bb2e9aec1d7; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=2d1d50c7-2e34-45bc-af9f-2794b5cd6620; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=2d1d50c7-2e34-45bc-af9f-2794b5cd6620; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=6c3fd715-a063-4181-9202-63edf7c90e17]
[2025-05-28 10:16:06,023][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:16:06,447][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:16:06 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:10Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:06Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'3'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:16:28Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:06Z'), (b'request-id', b'req_011CPZ3X5EnFxh9AeHbTbjWy'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e795a943aa53-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:16:06,449][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:06,450][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:06,450][DEBUG][response_closed.started]
[2025-05-28 10:16:06,450][DEBUG][response_closed.complete]
[2025-05-28 10:16:06,450][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:16:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:10Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:06Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '3', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:16:28Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:06Z', 'request-id': 'req_011CPZ3X5EnFxh9AeHbTbjWy', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e795a943aa53-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:16:06,450][DEBUG][request_id: req_011CPZ3X5EnFxh9AeHbTbjWy]
[2025-05-28 10:16:06,478][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-969c0907-d984-4bda-a7bc-1fa468af82ec', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\n가능한지?\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\n되는 범위에서의 상시근로자수를 판단하여야 함\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-28 10:16:06,478][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:06,479][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:06,488][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2dcc10>]
[2025-05-28 10:16:06,488][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305df30b0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:06,510][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2dcbd0>]
[2025-05-28 10:16:06,510][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:06,511][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:06,511][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:06,511][DEBUG][send_request_body.complete]
[2025-05-28 10:16:06,511][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:07,004][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=6c3fd715-a063-4181-9202-63edf7c90e17; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=8eaed8b8-4764-4210-956f-e261d0153284; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=8eaed8b8-4764-4210-956f-e261d0153284; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=ef744803-0b4c-4600-bbfa-4bb2e9aec1d7; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=da56323e-b3e9-4c34-9b7c-57d1b460bdb0; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=fc6e2c54-75c6-4035-9558-6caf305d67c4; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=fc6e2c54-75c6-4035-9558-6caf305d67c4; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=d52b0824-0c29-44b4-8de9-4769ebe82eb6]
[2025-05-28 10:16:07,210][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:16:07,558][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:16:07 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:14Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:07Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'2'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:16:40Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:07Z'), (b'request-id', b'req_011CPZ3XA9hzdDLDYbAkRmzm'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e79cf9998b62-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:16:07,559][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:07,560][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:07,560][DEBUG][response_closed.started]
[2025-05-28 10:16:07,560][DEBUG][response_closed.complete]
[2025-05-28 10:16:07,560][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:16:07 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:14Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:07Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '2', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:16:40Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:07Z', 'request-id': 'req_011CPZ3XA9hzdDLDYbAkRmzm', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e79cf9998b62-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:16:07,561][DEBUG][request_id: req_011CPZ3XA9hzdDLDYbAkRmzm]
[2025-05-28 10:16:07,575][DEBUG][close.started]
[2025-05-28 10:16:07,576][DEBUG][close.complete]
[2025-05-28 10:16:07,592][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-a1fb968c-92b8-41fd-9f99-8e05294b7e3b', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'규정은 전체 지자체 종사자를 상시근로자로 파악하여 적용하고,\n적용제외 규정이나 예외적으로 현업종사자를 대상으로 적용되는\n규정은(제2장 등)은 그 적용대상 종사자만을 상시근로자로 판단\n- 현업업무의 관리 및 집행행정 사무담당자는 공공행정에 해당하\n므로 상시근로자수 판단에서 제외하여야 함\n○ 지방자치단체에서 현업 종사자등의 안전·보건관리를 위해 안전\n보건관리체제 등을 갖추도록 할 경우\n- 지방자치단체를 하나의 사업장으로 보아 다양한 업무 종사자를\n하나의 적용단위로 판단할 때 업종판단은 가장 많은 비율을 차지\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-28 10:16:07,592][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:07,593][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:07,606][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2def90>]
[2025-05-28 10:16:07,606][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305df34a0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:07,629][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2dfed0>]
[2025-05-28 10:16:07,629][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:07,630][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:07,630][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:07,630][DEBUG][send_request_body.complete]
[2025-05-28 10:16:07,630][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:08,121][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=d52b0824-0c29-44b4-8de9-4769ebe82eb6; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=01bb6431-74d1-4e73-8bbc-0d141f9a6749; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=01bb6431-74d1-4e73-8bbc-0d141f9a6749; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=da56323e-b3e9-4c34-9b7c-57d1b460bdb0; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=cc8c1804-830e-4690-8f25-8a5ce0d60a9d; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=36a95c68-773f-4882-8ac0-6bbaaa974b95; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=36a95c68-773f-4882-8ac0-6bbaaa974b95; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=91247fb8-636f-438b-b6fd-2343e3857c12]
[2025-05-28 10:16:08,341][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:16:09,199][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:16:09 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:18Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:09Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'1'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:16:52Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'21000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:09Z'), (b'request-id', b'req_011CPZ3XF1uNa7AeWXgXwWja'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e7a40cbfea2b-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:16:09,199][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:09,199][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:09,199][DEBUG][response_closed.started]
[2025-05-28 10:16:09,199][DEBUG][response_closed.complete]
[2025-05-28 10:16:09,200][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:16:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:18Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:09Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '1', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:16:52Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '21000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:09Z', 'request-id': 'req_011CPZ3XF1uNa7AeWXgXwWja', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e7a40cbfea2b-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:16:09,200][DEBUG][request_id: req_011CPZ3XF1uNa7AeWXgXwWja]
[2025-05-28 10:16:09,214][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-aea024ac-35d8-45bd-a9e2-1f2f5fd06906', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\n포함하여 상시근로자로 판단하여야 함\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\n안법 위반으로 처분 가능한지?\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-28 10:16:09,215][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:09,215][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:09,240][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2ef690>]
[2025-05-28 10:16:09,240][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305df2e70> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:09,264][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2ef650>]
[2025-05-28 10:16:09,265][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:09,265][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:09,265][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:09,265][DEBUG][send_request_body.complete]
[2025-05-28 10:16:09,265][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:09,746][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=91247fb8-636f-438b-b6fd-2343e3857c12; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=eb8df6ee-03c3-43f4-b8d0-4533b691f8c9; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=eb8df6ee-03c3-43f4-b8d0-4533b691f8c9; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=cc8c1804-830e-4690-8f25-8a5ce0d60a9d; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=baa49bf2-266d-4fce-ad4a-39b5fc65da5b; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=7ed6a4a7-1731-4891-9051-f6dfcd8d9b45; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=7ed6a4a7-1731-4891-9051-f6dfcd8d9b45; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=50364266-0b83-4f5f-8925-1b4b33d8f05c]
[2025-05-28 10:16:09,747][DEBUG][close.started]
[2025-05-28 10:16:09,747][DEBUG][close.complete]
[2025-05-28 10:16:09,940][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:16:10,291][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:16:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'16000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:23Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:10Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:17:04Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'20000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:10Z'), (b'request-id', b'req_011CPZ3XMzbP7tABZmvJHAi4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e7ae48028b61-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:16:10,292][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:10,292][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:10,292][DEBUG][response_closed.started]
[2025-05-28 10:16:10,293][DEBUG][response_closed.complete]
[2025-05-28 10:16:10,293][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:16:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '16000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:23Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:10Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:17:04Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '20000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:10Z', 'request-id': 'req_011CPZ3XMzbP7tABZmvJHAi4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e7ae48028b61-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:16:10,293][DEBUG][request_id: req_011CPZ3XMzbP7tABZmvJHAi4]
[2025-05-28 10:16:10,307][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-9ed0cbab-674d-4c6f-b42f-738f50e605c1', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'- 다만, 공공행정사업이더라도 근로형태가 현저히 다르고 노무관리가\n명확히 구분되는 경우에는 해당 부문의 유사업종에 기초하여 법\n적용여부를 판단하여야 함\n○ 즉, 지방자치단체는 ｢한국표준산업분류｣에 따르면 원칙적으로 공공\n행정에 해당하나,\n- 일반 행정사무와 근로형태나 노무관리가 명확히 구분되는 환경\n미화, 가로청소 등의 현업업무는 별도로 해당 업무와 유사한 업종에\n따라 ｢산업안전보건법｣ 적용 여부를 판단해야 할 것이므로 산업\n안전보건법이 전부 적용됨\n○ 한편, 지방자치단체는 ｢지방자치법｣ 제3조에 따른 법인인 사업주\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-28 10:16:10,308][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:10,308][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:10,320][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2fc550>]
[2025-05-28 10:16:10,320][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305df3020> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:10,344][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2fc510>]
[2025-05-28 10:16:10,344][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:10,344][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:10,344][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:10,345][DEBUG][send_request_body.complete]
[2025-05-28 10:16:10,345][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:10,606][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Wed, 28 May 2025 01:16:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'16000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:23Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:10Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:17:04Z'), (b'retry-after', b'7'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'20000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:10Z'), (b'request-id', b'req_011CPZ3XSWxKU3nF1eB85cwD'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e7b4fc70ea1c-ICN')])]
[2025-05-28 10:16:10,607][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:10,607][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:10,607][DEBUG][response_closed.started]
[2025-05-28 10:16:10,607][DEBUG][response_closed.complete]
[2025-05-28 10:16:10,607][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Wed, 28 May 2025 01:16:10 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '16000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:23Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:10Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:17:04Z', 'retry-after': '7', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '20000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:10Z', 'request-id': 'req_011CPZ3XSWxKU3nF1eB85cwD', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e7b4fc70ea1c-ICN'})]
[2025-05-28 10:16:10,608][DEBUG][request_id: req_011CPZ3XSWxKU3nF1eB85cwD]
[2025-05-28 10:16:10,608][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-28 10:16:10,613][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-28 10:16:10,613][DEBUG][2 retries left]
[2025-05-28 10:16:10,839][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=50364266-0b83-4f5f-8925-1b4b33d8f05c; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=4219b958-e4e5-4c9c-a915-93d349e400aa; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=4219b958-e4e5-4c9c-a915-93d349e400aa; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=baa49bf2-266d-4fce-ad4a-39b5fc65da5b; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=e9322285-4d68-4c52-92c4-b28e63532fd4; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=5440ce11-569e-4c35-b73b-fe3c5f247109; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=5440ce11-569e-4c35-b73b-fe3c5f247109; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=24c5865a-ec9b-4842-a6ed-5ee0f9d80a2c]
[2025-05-28 10:16:11,052][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:16:17,619][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-9ed0cbab-674d-4c6f-b42f-738f50e605c1', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Retrieved document: \n\n page_content=\'- 다만, 공공행정사업이더라도 근로형태가 현저히 다르고 노무관리가\n명확히 구분되는 경우에는 해당 부문의 유사업종에 기초하여 법\n적용여부를 판단하여야 함\n○ 즉, 지방자치단체는 ｢한국표준산업분류｣에 따르면 원칙적으로 공공\n행정에 해당하나,\n- 일반 행정사무와 근로형태나 노무관리가 명확히 구분되는 환경\n미화, 가로청소 등의 현업업무는 별도로 해당 업무와 유사한 업종에\n따라 ｢산업안전보건법｣ 적용 여부를 판단해야 할 것이므로 산업\n안전보건법이 전부 적용됨\n○ 한편, 지방자치단체는 ｢지방자치법｣ 제3조에 따른 법인인 사업주\' metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 1, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'} \n\n User question: 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 검색된 문서와 사용자 질문의 관련성을 평가하는 채점자입니다. \\n \n문서에 사용자 질문과 관련된 키워드 또는 의미론적 의미가 포함되어 있으면 관련성이 있는 것으로 채점합니다. \\n\n잘못된 검색을 걸러내는 것이 목표입니다. \\n\n문서가 질문으로 해결할 수 있는 내용인지 여부를 나타내는 이진 점수 'Y' 또는 'N'을 부여합니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeDocuments'}, 'tools': [{'name': 'GradeDocuments', 'input_schema': {'properties': {'pass_yn': {'description': "문서가 질문으로 해결 가능한 내용인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '검색된 문서가 질문으로 해결 가능한 내용인지에 대한 여부를 판단합니다.'}]}}]
[2025-05-28 10:16:17,619][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:17,620][DEBUG][close.started]
[2025-05-28 10:16:17,620][DEBUG][close.complete]
[2025-05-28 10:16:17,620][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:17,638][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2dfdd0>]
[2025-05-28 10:16:17,638][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305df3020> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:17,654][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x3ae2dea90>]
[2025-05-28 10:16:17,654][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:17,655][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:17,655][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:17,655][DEBUG][send_request_body.complete]
[2025-05-28 10:16:17,655][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:19,139][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:16:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:27Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:19Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:17:16Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'21000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:19Z'), (b'request-id', b'req_011CPZ3XypP4TtWuVLrLpWu6'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e7e29c61ea97-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:16:19,140][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:19,140][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:19,140][DEBUG][response_closed.started]
[2025-05-28 10:16:19,141][DEBUG][response_closed.complete]
[2025-05-28 10:16:19,141][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:16:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:27Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:19Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:17:16Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '21000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:19Z', 'request-id': 'req_011CPZ3XypP4TtWuVLrLpWu6', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e7e29c61ea97-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:16:19,141][DEBUG][request_id: req_011CPZ3XypP4TtWuVLrLpWu6]
[2025-05-28 10:16:19,162][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-ed379c81-795d-49c3-9a6b-43ed7eb5a892', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n[Document(id=\'1da8e06a-fd97-49d2-a3f2-8347d0474e32\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'c76a087c-04f1-4682-81c4-fa6d218771ca\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'590cf2e1-07ac-426b-8d22-f011bf6458b5\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')]\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-28 10:16:19,163][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:19,163][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:19,175][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305f87110>]
[2025-05-28 10:16:19,175][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305f585f0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:19,189][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305f870d0>]
[2025-05-28 10:16:19,189][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:19,190][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:19,190][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:19,190][DEBUG][send_request_body.complete]
[2025-05-28 10:16:19,190][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:19,421][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Wed, 28 May 2025 01:16:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:27Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:19Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:17:16Z'), (b'retry-after', b'10'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'21000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:19Z'), (b'request-id', b'req_011CPZ3Y6KJEqra1FFkgckRq'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e7ec3847a422-ICN')])]
[2025-05-28 10:16:19,422][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:19,423][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:19,423][DEBUG][response_closed.started]
[2025-05-28 10:16:19,423][DEBUG][response_closed.complete]
[2025-05-28 10:16:19,423][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Wed, 28 May 2025 01:16:19 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:27Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:19Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:17:16Z', 'retry-after': '10', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '21000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:19Z', 'request-id': 'req_011CPZ3Y6KJEqra1FFkgckRq', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e7ec3847a422-ICN'})]
[2025-05-28 10:16:19,424][DEBUG][request_id: req_011CPZ3Y6KJEqra1FFkgckRq]
[2025-05-28 10:16:19,424][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-28 10:16:19,426][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-28 10:16:19,436][DEBUG][2 retries left]
[2025-05-28 10:16:19,700][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=24c5865a-ec9b-4842-a6ed-5ee0f9d80a2c; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=75df2169-f5a8-4d13-b11e-141b88243ca6; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=75df2169-f5a8-4d13-b11e-141b88243ca6; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=e9322285-4d68-4c52-92c4-b28e63532fd4; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=97cb17c6-c87e-4784-9f14-234313e69989; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=97cb17c6-c87e-4784-9f14-234313e69989; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=82e1ce35-6f73-4e60-9179-45ba26a4bebe; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=22c112b6-34e8-4ca8-b08d-a1111de04c8e; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=03308d2b-39ad-49a8-b6f5-7193e511c111; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=16bd3d4d-74d9-4cde-a16b-9671a99a098f; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=16bd3d4d-74d9-4cde-a16b-9671a99a098f; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=923530c4-05fc-4fcc-94c5-556aabae8caa]
[2025-05-28 10:16:19,929][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:16:29,441][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-ed379c81-795d-49c3-9a6b-43ed7eb5a892', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': '당신은 질문-응답(QA) 작업을 전문으로 하는 AI 어시스턴트입니다. \n여러분의 주요 임무는 제공된 context 또는 채팅 기록을 기반으로 질문에 답변하는 것입니다.\n추가적인 내레이션 없이 간결하고 질문에 직접적으로 답변해야 합니다.\n\n###\n\n최종 답변은 간결하게 작성하되 중요한 숫자 값, 기술 용어, 전문 용어 및 이름을 포함해야 하며, 그 뒤에 정보의 출처를 적어야 합니다.\n\n# 단계\n\n1. 제공된 문맥을 주의 깊게 읽고 이해합니다.\n2. 문맥 내에서 질문과 관련된 핵심 정보를 파악합니다.\n3. 관련 정보를 바탕으로 간결하게 답안을 작성합니다.\n4. 최종 답변이 질문과 직접적으로 관련이 있는지 확인합니다.\n5. 답변의 출처를 글머리 기호로 나열하며, 파일 이름(페이지 번호 포함) 또는 문맥에 따른 URL이어야 합니다. 소스를 찾을 수 없는 경우 생략합니다.\n\n# 출력 형식:\n[최종 답안, 여기에 숫자 값, 전문 용어, 전문 용어 및 이름을 원래 언어로 입력]\n\n**출처**(선택 사항)\n- (답변의 출처는 문맥에서 파일 이름(페이지 번호 포함) 또는 URL이어야 합니다. 답안의 출처를 찾을 수 없는 경우 생략).\n- (출처가 여러 개 있는 경우 더 나열)\n- ...\n\n###\n\n기억하세요:\n- 오직 **제공된 문맥**에 근거하여 답안을 작성하는 것이 중요합니다.\n- 주어진 자료에 없는 외부 지식이나 정보를 사용하지 마세요.\n- 답의 출처를 찾을 수 없는 경우 "죄송합니다. 다른 질문을 해주세요." 답해야 합니다.\n- 단, 질문이 일상적인 대화인 경우 답해줘도 괜찮습니다. (예시: 안녕, 누구세요, 반가워 등)\n\n\n###\n\n# 다음은 여러분이 답해야 하는 사용자의 질문입니다:\n현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\n\n# 다음은 질문에 답변할 때 사용해야 하는 컨텍스트입니다:\n[Document(id=\'1da8e06a-fd97-49d2-a3f2-8347d0474e32\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'c76a087c-04f1-4682-81c4-fa6d218771ca\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'590cf2e1-07ac-426b-8d22-f011bf6458b5\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')]\n\n# 사용자의 질문에 대한 최종 답변입니다:\n'}], 'model': 'claude-3-5-sonnet-20240620', 'temperature': 0.0}}]
[2025-05-28 10:16:29,444][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:29,445][DEBUG][close.started]
[2025-05-28 10:16:29,446][DEBUG][close.complete]
[2025-05-28 10:16:29,446][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:29,476][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fa1890>]
[2025-05-28 10:16:29,476][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305f585f0> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:29,501][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fa1790>]
[2025-05-28 10:16:29,501][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:29,501][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:29,501][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:29,501][DEBUG][send_request_body.complete]
[2025-05-28 10:16:29,501][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:32,782][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:16:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'17000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:37Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:32Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:17:28Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'21000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:32Z'), (b'request-id', b'req_011CPZ3YrSeTxDP3hJCmhFAY'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e82cacd4c16c-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:16:32,785][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:32,788][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:32,789][DEBUG][response_closed.started]
[2025-05-28 10:16:32,789][DEBUG][response_closed.complete]
[2025-05-28 10:16:32,789][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:16:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '17000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:37Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:32Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:17:28Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '21000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:32Z', 'request-id': 'req_011CPZ3YrSeTxDP3hJCmhFAY', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e82cacd4c16c-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:16:32,790][DEBUG][request_id: req_011CPZ3YrSeTxDP3hJCmhFAY]
[2025-05-28 10:16:32,801][DEBUG][close.started]
[2025-05-28 10:16:32,801][DEBUG][close.complete]
[2025-05-28 10:16:32,820][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-0385f32f-9d22-43b9-bbdc-567c44cfbc02', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n [Document(id=\'1da8e06a-fd97-49d2-a3f2-8347d0474e32\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'c76a087c-04f1-4682-81c4-fa6d218771ca\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'590cf2e1-07ac-426b-8d22-f011bf6458b5\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')] \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보고, 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용할 수 있습니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-28 10:16:32,821][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:32,821][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:32,843][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fa5590>]
[2025-05-28 10:16:32,843][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305f58680> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:32,865][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fa55d0>]
[2025-05-28 10:16:32,865][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:32,865][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:32,865][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:32,865][DEBUG][send_request_body.complete]
[2025-05-28 10:16:32,865][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:33,173][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Wed, 28 May 2025 01:16:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:37Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:33Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:17:28Z'), (b'retry-after', b'8'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:33Z'), (b'request-id', b'req_011CPZ3Z6rKpFMejcwacNUh4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e841b995ea21-ICN')])]
[2025-05-28 10:16:33,173][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:33,174][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:33,174][DEBUG][response_closed.started]
[2025-05-28 10:16:33,174][DEBUG][response_closed.complete]
[2025-05-28 10:16:33,174][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Wed, 28 May 2025 01:16:33 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:37Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:33Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:17:28Z', 'retry-after': '8', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:33Z', 'request-id': 'req_011CPZ3Z6rKpFMejcwacNUh4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e841b995ea21-ICN'})]
[2025-05-28 10:16:33,174][DEBUG][request_id: req_011CPZ3Z6rKpFMejcwacNUh4]
[2025-05-28 10:16:33,175][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-28 10:16:33,175][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-28 10:16:33,175][DEBUG][2 retries left]
[2025-05-28 10:16:33,357][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=923530c4-05fc-4fcc-94c5-556aabae8caa; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=7ffa164a-4779-4cea-b6b0-7968bc81ec40; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=7ffa164a-4779-4cea-b6b0-7968bc81ec40; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=03308d2b-39ad-49a8-b6f5-7193e511c111; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=4ed2bfe0-79c8-4525-943f-a7bc9e0a4da5; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=c53f5cfa-9249-442e-89b0-8f4b5e9a32da; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=8fb00a2c-1239-495b-af3c-f87c0c381ea1; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=8fb00a2c-1239-495b-af3c-f87c0c381ea1; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=4c6c28ae-9b52-4cbb-ab33-4963c855b60c]
[2025-05-28 10:16:33,570][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:16:41,181][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-0385f32f-9d22-43b9-bbdc-567c44cfbc02', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Set of facts: \n\n [Document(id=\'1da8e06a-fd97-49d2-a3f2-8347d0474e32\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'장비유지관리, 현장공사, 현장지도 단속·감시 등 현업업무는 별도로\\n해당 업무와 유사한 업종에 따라 ｢산업안전보건법｣ 적용 여부를 판단\\n해야 할 것이므로 산업안전보건법이 전부 적용됨\\n2. 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를\\n포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업\\n종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지?\\n○ 지방자치단체를 하나의 사업장으로 보아 공공행정에 해당하는 일반\\n행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\'), Document(id=\'c76a087c-04f1-4682-81c4-fa6d218771ca\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'행정사무 외의 다양한 현업업무는 가장 많은 비율을 차지하는 현업\\n업무종사자의 업태와 유사한 업종을 기준으로 판단하여야 할 것임\\n3. 산업안전보건법을 전부 적용 가능하면 지방자치단체 소속 공무직\\n및 공공근로 등 단기간 근로자수를 합산하여 총 근로자수로 판단\\n가능한지?\\n○ 법 적용을 위한 상시근로자수 판단에 있어서는 해당 조문이 적용\\n되는 범위에서의 상시근로자수를 판단하여야 함\\n- 즉, 공공행정에 해당하는 업무 외 현업업무에 해당하여 산업안전\\n보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\'), Document(id=\'590cf2e1-07ac-426b-8d22-f011bf6458b5\', metadata={\'source\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'file_path\': \'/Users/ranifarm/python-work/adaptive-rag-public/vectorstore/data/지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf\', \'page\': 2, \'total_pages\': 3, \'Author\': \'dw\', \'CreationDate\': "D:20241223160641+09\'00\'", \'Creator\': \'Hwp 2022 12.0.0.2416\', \'ModDate\': "D:20241223160641+09\'00\'", \'PDFVersion\': \'1.4\', \'Producer\': \'Hancom PDF 1.3.0.545\'}, page_content=\'보건법 관련 규정을 적용할 때에는 지자체를 하나의 사업장으로\\n보고 해당 지자체에서 현업업무에 종사하는 공무원, 공무직 등을\\n포함하여 상시근로자로 판단하여야 함\\n4. 합산한 근로자수가 100명 이상이면 산안법 제13조제1항, 산안법 제15조제\\n1항, 산안법 제16조제1항, 산안법 제19조제1항, 산안법 제20조제1항, 산\\n안법 제24조제1항제5항, 산안법 제31조 등 각 조항을 적용하여 산\\n안법 위반으로 처분 가능한지?\\n○ 지자체가 수행하는 다양한 현업업무 종사자들의 대표 업종이 정\')] \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보고, 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용할 수 있습니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "채점자는 생성된 LLM 답변이 검색된 일련의 사실에 근거/지원되는지 평가하는 채점자입니다. \\n \n'Y' 또는 'N'으로 이진 점수를 부여합니다. 'Y'는 답변이 일련의 사실에 근거하거나 사실에 의해 뒷받침된다는 의미입니다.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeHallucinations'}, 'tools': [{'name': 'GradeHallucinations', 'input_schema': {'properties': {'pass_yn': {'description': "생성된 답변이 사실인지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 hallucination 현상이 있는지에 대한 여부를 판단합니다. '}]}}]
[2025-05-28 10:16:41,183][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:41,184][DEBUG][close.started]
[2025-05-28 10:16:41,184][DEBUG][close.complete]
[2025-05-28 10:16:41,185][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:41,205][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fa4ad0>]
[2025-05-28 10:16:41,205][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305f58680> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:41,222][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fa6710>]
[2025-05-28 10:16:41,222][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:41,222][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:41,222][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:41,222][DEBUG][send_request_body.complete]
[2025-05-28 10:16:41,223][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:42,346][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:16:42 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:49Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:42Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:17:40Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:42Z'), (b'request-id', b'req_011CPZ3ZiddKLeh6K4Cf2ji4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e875e884aa32-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:16:42,347][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:42,347][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:42,347][DEBUG][response_closed.started]
[2025-05-28 10:16:42,347][DEBUG][response_closed.complete]
[2025-05-28 10:16:42,347][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:16:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:49Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:42Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:17:40Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:42Z', 'request-id': 'req_011CPZ3ZiddKLeh6K4Cf2ji4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e875e884aa32-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:16:42,347][DEBUG][request_id: req_011CPZ3ZiddKLeh6K4Cf2ji4]
[2025-05-28 10:16:42,363][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-bb5ba4ae-b067-4758-90b5-aefbaa686efe', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지? \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보고, 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용할 수 있습니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n답변이 질문과 관련이 있으면 'Y'를 부여하고 관련이 없으면 'N'을 부여하세요.\n 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-28 10:16:42,363][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:42,363][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:42,374][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fbae90>]
[2025-05-28 10:16:42,374][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305f58d40> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:42,387][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fb5190>]
[2025-05-28 10:16:42,387][DEBUG][close.started]
[2025-05-28 10:16:42,387][DEBUG][close.complete]
[2025-05-28 10:16:42,388][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:42,388][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:42,389][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:42,389][DEBUG][send_request_body.complete]
[2025-05-28 10:16:42,389][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:42,683][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Date', b'Wed, 28 May 2025 01:16:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'520'), (b'Connection', b'keep-alive'), (b'x-should-retry', b'true'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'18000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:49Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:42Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:17:40Z'), (b'retry-after', b'11'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'22000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:42Z'), (b'request-id', b'req_011CPZ3ZocmH7n6icLzUtsU1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e87d3eb93091-ICN')])]
[2025-05-28 10:16:42,685][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:42,686][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:42,686][DEBUG][response_closed.started]
[2025-05-28 10:16:42,686][DEBUG][response_closed.complete]
[2025-05-28 10:16:42,686][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "429 Too Many Requests" Headers({'date': 'Wed, 28 May 2025 01:16:42 GMT', 'content-type': 'application/json', 'content-length': '520', 'connection': 'keep-alive', 'x-should-retry': 'true', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '18000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:49Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:42Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:17:40Z', 'retry-after': '11', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '22000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:42Z', 'request-id': 'req_011CPZ3ZocmH7n6icLzUtsU1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e87d3eb93091-ICN'})]
[2025-05-28 10:16:42,687][DEBUG][request_id: req_011CPZ3ZocmH7n6icLzUtsU1]
[2025-05-28 10:16:42,687][DEBUG][Encountered httpx.HTTPStatusError]
Traceback (most recent call last):
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1065, in request
    response.raise_for_status()
  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '429 Too Many Requests' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
[2025-05-28 10:16:42,688][DEBUG][Retrying as header `x-should-retry` is set to `true`]
[2025-05-28 10:16:42,688][DEBUG][2 retries left]
[2025-05-28 10:16:42,895][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=4c6c28ae-9b52-4cbb-ab33-4963c855b60c; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=809eaa9e-581a-4447-af3c-f19448100e76; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=809eaa9e-581a-4447-af3c-f19448100e76; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=c53f5cfa-9249-442e-89b0-8f4b5e9a32da; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=778a1a39-b589-42b4-a3e5-a6bb5fe05bf0; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=4f9608a0-128e-4212-ae28-ab08bf13b476; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=4f9608a0-128e-4212-ae28-ab08bf13b476; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=cf722f84-0237-445a-822e-ebeadd2efa63]
[2025-05-28 10:16:43,096][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
[2025-05-28 10:16:53,692][DEBUG][Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-bb5ba4ae-b067-4758-90b5-aefbaa686efe', 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'User question: \n\n 현업의 업종을 판단할 때 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용 가능한지? \n\n LLM generation: 네, 가능합니다. 지방자치단체를 하나의 사업장으로 보고, 공무직 및 공공근로 등 단기간 근로자를 포함하여 채용인원이 가장 많은 상위 2~3개 부서의 현업업무의 업종을 주된 업종으로 판단하여 산업안전보건법을 적용할 수 있습니다.\n\n**출처**\n- 지방자치단체 산안법 적용 (산재예방정책과-3018 (2018.07.06. 시행).pdf (페이지 2)'}], 'model': 'claude-3-5-sonnet-20240620', 'system': "당신은 제공된 답변이 질문과 관련 있는지 평가하는 채점자입니다.\n'Y' 또는 'N'로 이진 점수를 부여합니다. \n답변이 질문과 관련이 있으면 'Y'를 부여하고 관련이 없으면 'N'을 부여하세요.\n 제공된 답변이 '정보를 찾을 수 없다는' 의미의 답변이라면 'Y'를 부여하세요.\n", 'temperature': 0.0, 'tool_choice': {'type': 'tool', 'name': 'GradeQuestionAnswer'}, 'tools': [{'name': 'GradeQuestionAnswer', 'input_schema': {'properties': {'pass_yn': {'description': "답변이 질문을 해결할 수 있는 지에 따라 'Y' 또는 'N' 로 답합니다.", 'enum': ['Y', 'N'], 'type': 'string'}}, 'required': ['pass_yn'], 'type': 'object'}, 'description': '생성된 답변이 질문과 관련이 있는지에 대한 여부를 판단합니다.'}]}}]
[2025-05-28 10:16:53,693][DEBUG][Sending HTTP Request: POST https://api.anthropic.com/v1/messages]
[2025-05-28 10:16:53,694][DEBUG][close.started]
[2025-05-28 10:16:53,694][DEBUG][close.complete]
[2025-05-28 10:16:53,694][DEBUG][connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=[(65535, 8, True), (6, 257, 60), (6, 258, 5)]]
[2025-05-28 10:16:53,709][DEBUG][connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fa1390>]
[2025-05-28 10:16:53,709][DEBUG][start_tls.started ssl_context=<ssl.SSLContext object at 0x305f58d40> server_hostname='api.anthropic.com' timeout=None]
[2025-05-28 10:16:53,735][DEBUG][start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x305fa7ad0>]
[2025-05-28 10:16:53,736][DEBUG][send_request_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:53,736][DEBUG][send_request_headers.complete]
[2025-05-28 10:16:53,736][DEBUG][send_request_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:53,736][DEBUG][send_request_body.complete]
[2025-05-28 10:16:53,736][DEBUG][receive_response_headers.started request=<Request [b'POST']>]
[2025-05-28 10:16:54,769][DEBUG][receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 28 May 2025 01:16:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'anthropic-ratelimit-input-tokens-limit', b'20000'), (b'anthropic-ratelimit-input-tokens-remaining', b'19000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-05-28T01:16:57Z'), (b'anthropic-ratelimit-output-tokens-limit', b'4000'), (b'anthropic-ratelimit-output-tokens-remaining', b'4000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-05-28T01:16:54Z'), (b'anthropic-ratelimit-requests-limit', b'5'), (b'anthropic-ratelimit-requests-remaining', b'0'), (b'anthropic-ratelimit-requests-reset', b'2025-05-28T01:17:52Z'), (b'anthropic-ratelimit-tokens-limit', b'24000'), (b'anthropic-ratelimit-tokens-remaining', b'23000'), (b'anthropic-ratelimit-tokens-reset', b'2025-05-28T01:16:54Z'), (b'request-id', b'req_011CPZ3ae83PBtVJMbQtDbAi'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'22e5ed16-15d8-4ef0-a72f-fd41275bf557'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9469e8c42d61aa5c-ICN'), (b'Content-Encoding', b'gzip')])]
[2025-05-28 10:16:54,770][DEBUG][receive_response_body.started request=<Request [b'POST']>]
[2025-05-28 10:16:54,770][DEBUG][receive_response_body.complete]
[2025-05-28 10:16:54,770][DEBUG][response_closed.started]
[2025-05-28 10:16:54,770][DEBUG][response_closed.complete]
[2025-05-28 10:16:54,771][DEBUG][HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Wed, 28 May 2025 01:16:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'anthropic-ratelimit-input-tokens-limit': '20000', 'anthropic-ratelimit-input-tokens-remaining': '19000', 'anthropic-ratelimit-input-tokens-reset': '2025-05-28T01:16:57Z', 'anthropic-ratelimit-output-tokens-limit': '4000', 'anthropic-ratelimit-output-tokens-remaining': '4000', 'anthropic-ratelimit-output-tokens-reset': '2025-05-28T01:16:54Z', 'anthropic-ratelimit-requests-limit': '5', 'anthropic-ratelimit-requests-remaining': '0', 'anthropic-ratelimit-requests-reset': '2025-05-28T01:17:52Z', 'anthropic-ratelimit-tokens-limit': '24000', 'anthropic-ratelimit-tokens-remaining': '23000', 'anthropic-ratelimit-tokens-reset': '2025-05-28T01:16:54Z', 'request-id': 'req_011CPZ3ae83PBtVJMbQtDbAi', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '22e5ed16-15d8-4ef0-a72f-fd41275bf557', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9469e8c42d61aa5c-ICN', 'content-encoding': 'gzip'})]
[2025-05-28 10:16:54,771][DEBUG][request_id: req_011CPZ3ae83PBtVJMbQtDbAi]
[2025-05-28 10:16:55,317][DEBUG][Sending compressed multipart request with context: trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=cf722f84-0237-445a-822e-ebeadd2efa63; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=41f79e12-f113-4fdc-a380-481acb019c14; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=41f79e12-f113-4fdc-a380-481acb019c14; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=778a1a39-b589-42b4-a3e5-a6bb5fe05bf0; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=4ed2bfe0-79c8-4525-943f-a7bc9e0a4da5; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=22c112b6-34e8-4ca8-b08d-a1111de04c8e; trace=37fa2cbf-98fa-4164-b54a-7fc26141247c,id=37fa2cbf-98fa-4164-b54a-7fc26141247c]
[2025-05-28 10:16:55,521][DEBUG][https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34]
