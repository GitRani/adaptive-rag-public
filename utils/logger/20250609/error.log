[2025-06-09 17:18:05,179][ERROR][{'run_id': '1f0450a4-3fc1-6d7a-b581-f7440555c1f1', 'run_attempt': 1, 'run_created_at': '2025-06-09T08:18:04.107488+00:00', 'run_started_at': '2025-06-09T08:18:04.674975+00:00', 'run_ended_at': '2025-06-09T08:18:05.175278+00:00', 'run_exec_ms': 500, 'event': "Background run failed. Exception: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'Your credit balance is too low to access the Anthropic API. Please go to Plans & Billing to upgrade or purchase credits.'}}", 'thread_name': 'asyncio_1', 'logger': 'langgraph_api.worker', 'level': 'error', 'api_variant': 'local_dev', 'timestamp': '2025-06-09T08:18:05.175376Z', 'exception': 'Traceback (most recent call last):\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/worker.py", line 148, in worker\n    await asyncio.wait_for(\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/asyncio/tasks.py", line 489, in wait_for\n    return fut.result()\n           ^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/stream.py", line 302, in consume\n    raise e from g\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/stream.py", line 285, in consume\n    async for mode, payload in stream:\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/stream.py", line 220, in astream_state\n    event = await wait_if_not_done(anext(stream, sentinel), done)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/asyncio.py", line 89, in wait_if_not_done\n    raise e.exceptions[0] from None\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph/pregel/__init__.py", line 2830, in astream\n    async for _ in runner.atick(\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph/graph/branch.py", line 196, in _aroute\n    result = await self.path.ainvoke(value, config)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph/utils/runnable.py", line 431, in ainvoke\n    ret = await asyncio.create_task(coro, context=context)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/runnables/config.py", line 616, in run_in_executor\n    return await asyncio.get_running_loop().run_in_executor(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/concurrent/futures/thread.py", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/runnables/config.py", line 607, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/python-work/adaptive-rag-public/graph/edges.py", line 16, in route_vector_or_websearch\n    decision = vector_websearch_chain().invoke({"question": question}).next_node\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3034, in invoke\n    input = context.run(step.invoke, input, config)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 5416, in invoke\n    return self.bound.invoke(\n           ^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 371, in invoke\n    self.generate_prompt(\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 956, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 775, in generate\n    self._generate_with_cache(\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 1010, in _generate_with_cache\n    for chunk in self._stream(messages, stop=stop, **kwargs):\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_anthropic/chat_models.py", line 1097, in _stream\n    stream = self._client.messages.create(**payload)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_utils/_utils.py", line 283, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/resources/messages/messages.py", line 954, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1290, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/anthropic/_base_client.py", line 1085, in request\n    raise self._make_status_error_from_response(err.response) from None\nanthropic.BadRequestError: Error code: 400 - {\'type\': \'error\', \'error\': {\'type\': \'invalid_request_error\', \'message\': \'Your credit balance is too low to access the Anthropic API. Please go to Plans & Billing to upgrade or purchase credits.\'}}\nDuring task with name \'__start__\' and id \'d75cdaff-3601-c234-3d72-9fcea5ab0539\'', 'thread_id': 'c89ce45e-fe2f-4ad5-b9ea-647a3b39bfd4', 'assistant_id': '57c4d76c-a160-5917-a7c1-2f6cbc8ecc11', 'graph_id': 'adaptive_rag', 'request_id': 'a630df2d-85c3-48e9-a8b2-6002cf037718'}]
NoneType: None
[2025-06-09 22:05:43,311][ERROR][{'run_id': '1f045327-2d2d-6f94-8ae9-ebc682edeaf2', 'run_attempt': 1, 'run_created_at': '2025-06-09T13:05:42.559314+00:00', 'run_started_at': '2025-06-09T13:05:43.137828+00:00', 'run_ended_at': '2025-06-09T13:05:43.308690+00:00', 'run_exec_ms': 170, 'event': "Background run failed. Exception: 1 validation error for ChatOllama\nmodel\n  Field required [type=missing, input_value={'model_name': 'deepseek-...http://localhost:11434'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing", 'thread_name': 'asyncio_2', 'logger': 'langgraph_api.worker', 'level': 'error', 'api_variant': 'local_dev', 'timestamp': '2025-06-09T13:05:43.308745Z', 'exception': 'Traceback (most recent call last):\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/worker.py", line 148, in worker\n    await asyncio.wait_for(\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/asyncio/tasks.py", line 489, in wait_for\n    return fut.result()\n           ^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/stream.py", line 302, in consume\n    raise e from g\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/stream.py", line 285, in consume\n    async for mode, payload in stream:\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/stream.py", line 220, in astream_state\n    event = await wait_if_not_done(anext(stream, sentinel), done)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph_api/asyncio.py", line 89, in wait_if_not_done\n    raise e.exceptions[0] from None\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph/pregel/__init__.py", line 2830, in astream\n    async for _ in runner.atick(\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph/graph/branch.py", line 196, in _aroute\n    result = await self.path.ainvoke(value, config)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langgraph/utils/runnable.py", line 431, in ainvoke\n    ret = await asyncio.create_task(coro, context=context)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/runnables/config.py", line 616, in run_in_executor\n    return await asyncio.get_running_loop().run_in_executor(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/concurrent/futures/thread.py", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/runnables/config.py", line 607, in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/python-work/adaptive-rag-public/graph/edges.py", line 16, in route_vector_or_websearch\n    decision = vector_websearch_chain().invoke({"question": question}).next_node\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/python-work/adaptive-rag-public/chains/rag_chain.py", line 23, in vector_websearch_chain\n    structed_llm = DeepSeek(schema=RouteQuery).get_structed_model()\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/ranifarm/python-work/adaptive-rag-public/config/model_config.py", line 23, in get_structed_model\n    model = ChatOllama(\n            ^^^^^^^^^^^\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/langchain_core/load/serializable.py", line 130, in __init__\n    super().__init__(*args, **kwargs)\n  File "/Users/ranifarm/.conda/envs/adaptive-rag/lib/python3.11/site-packages/pydantic/main.py", line 253, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\npydantic_core._pydantic_core.ValidationError: 1 validation error for ChatOllama\nmodel\n  Field required [type=missing, input_value={\'model_name\': \'deepseek-...http://localhost:11434\'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\nDuring task with name \'__start__\' and id \'8c447aa2-1323-adc7-8527-7e899d2f43fd\'', 'thread_id': '9f691f32-b9a7-4ce5-bb63-fc9e52ce0c0f', 'assistant_id': '57c4d76c-a160-5917-a7c1-2f6cbc8ecc11', 'graph_id': 'adaptive_rag', 'request_id': 'dc77c5d0-37ed-4d98-9ed6-746c5e3316a7'}]
NoneType: None
